import{d as A,t as y,J as d,a0 as b,o as v,b as h,f as F,a1 as L,a2 as X,R as Y,e as w,g as $,h as H}from"./modules/vue--jQnZVtx.js";import{u as C}from"./slidev/context-z35ddS6i.js";const I={class:"absolute w-[960px] h-[552px] top-0 left-0"},J=A({__name:"SvgLayer",setup(u){C();const i=y(),g=d(()=>{var l,f;return{width:((l=i.value)==null?void 0:l.clientWidth)||960,height:((f=i.value)==null?void 0:f.clientHeight)||552}});return b("sizes",g),(l,f)=>(v(),h("div",I,[(v(),h("svg",{ref_key:"svg",ref:i,viewBox:"0 0 960 552",stroke:"currentColor",fill:"currentColor",class:"absolute top-0 left-0 w-full h-full"},[F(l.$slots,"default")],512))]))}}),O=["d"],V=["transform"],W=["path"],j=["transform"],K=A({__name:"SvgArrow",props:{start:{},end:{},coords:{},power:{default:.5},endArrow:{type:Boolean,default:!0},startArrow:{type:Boolean,default:!1}},setup(u){C();const i=y(),g=d(()=>{var t;return(t=i.value)==null?void 0:t.getTotalLength()}),l=L("sizes"),f=t=>{let e,a;return typeof t=="string"?[e,a]=t.split(":"):(e=t.x,a=t.y),typeof e=="string"&&(e.endsWith("%")?e=l.value.width/100*parseFloat(e):e=parseFloat(e)),typeof a=="string"&&(a.endsWith("%")?a=l.value.height/100*parseFloat(a):a=parseFloat(a)),{x:e,y:a}},m=d(()=>{let t=u.start,e=u.end;if(u.coords&&([t,e]=u.coords.split(" ")),!t||!e)throw new Error("Coords are required");return[f(t),f(e)]});function z(t,e,a){const n=(a==null?void 0:a.heightRate)||.5,o=e.x-t.x,c=e.y-t.y,s=Math.sqrt(o*o+c*c),P=(t.x+e.x)/2,B=(t.y+e.y)/2,E=-c/s,N=o/s,R=P+E*s*n,T=B+N*s*n;return{start:t,control:{x:R,y:T},end:e}}function k(t){const{start:e,control:a,end:n}=t;return[`M${e.x},${e.y}`,`S${a.x},${a.y}`,`${n.x},${n.y}`].join(" ")}function p({start:t,control:e,end:a},n){const o=1-n,c=2*o*(e.x-t.x)+2*n*(a.x-e.x),s=2*o*(e.y-t.y)+2*n*(a.y-e.y);return Math.atan2(s,c)*(180/Math.PI)}function S(t,e,a){const n=z(t,e,a),o=k(n),c=p(n,1),s=p(n,0);return{curve:n,svgPath:o,endAngle:c,startAngle:s}}const r=d(()=>S(m.value[0],m.value[1],{heightRate:-u.power})),M=X(),x=d(()=>{var t;return(t=M.class)==null?void 0:t.includes("animate")}),_=y();return Y(()=>x.value,t=>{var e;t&&((e=_.value)==null||e.beginElement())}),(t,e)=>(v(),h("g",{class:"svg-arrow",style:H({"--full-length":g.value})},[w("path",{ref_key:"curve",ref:i,d:r.value.svgPath,fill:"none"},null,8,O),t.endArrow?(v(),h("polygon",{key:0,points:"-12,-6 0,0, -12,6",transform:x.value?void 0:`translate(${r.value.curve.end.x},${r.value.curve.end.y}) rotate(${r.value.endAngle})`},[w("animateMotion",{ref_key:"animateMotion",ref:_,dur:"200ms",repeatCount:"1",path:r.value.svgPath,rotate:"auto",fill:"freeze"},null,8,W)],8,V)):$("v-if",!0),t.startArrow?(v(),h("polygon",{key:1,points:"12,-6 0,0, 12,6",transform:`translate(${r.value.curve.start.x},${r.value.curve.start.y}) rotate(${r.value.startAngle})`},null,8,j)):$("v-if",!0)],4))}});export{K as _,J as a};
