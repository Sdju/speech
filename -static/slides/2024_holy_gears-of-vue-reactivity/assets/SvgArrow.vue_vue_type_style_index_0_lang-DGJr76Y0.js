import{d as C,t as y,A as m,aC as L,o as u,b as i,f as N,D as R,G as T,e as b,h as p,g as x,i as F}from"./modules/vue-Q4s2-U04.js";import{u as _}from"./slidev/context-lgS2nqr9.js";const H={class:"absolute w-[960px] h-[552px] top-0 left-0 pointer-events-none"},X=C({__name:"SvgLayer",setup(r){_();const n=y(),f=m(()=>{var s,l;return{width:((s=n.value)==null?void 0:s.clientWidth)||960,height:((l=n.value)==null?void 0:l.clientHeight)||552}});return L("sizes",f),(s,l)=>(u(),i("div",H,[(u(),i("svg",{ref_key:"svg",ref:n,viewBox:"0 0 960 552",stroke:"currentColor",fill:"currentColor",class:"absolute top-0 left-0 w-full h-full"},[N(s.$slots,"default")],512))]))}}),G=["d"],Y=C({__name:"SvgArrow",props:{start:{},end:{},coords:{},power:{default:.5},endArrow:{type:Boolean,default:!0},startArrow:{type:Boolean,default:!1},dashed:{type:Boolean,default:!1}},setup(r){_();const n=y(),f=R("sizes"),s=t=>{let e,o;return typeof t=="string"?[e,o]=t.split(":"):(e=t.x,o=t.y),typeof e=="string"&&(e.endsWith("%")?e=f.value.width/100*parseFloat(e):e=parseFloat(e)),typeof o=="string"&&(o.endsWith("%")?o=f.value.height/100*parseFloat(o):o=parseFloat(o)),{x:e,y:o}},l=m(()=>{let t=r.start,e=r.end;if(r.coords&&([t,e]=r.coords.split(" ")),!t||!e)throw new Error("Coords are required");return[s(t),s(e)]});function $(t,e,o){const a=(o==null?void 0:o.heightRate)||.5,c=e.x-t.x,v=e.y-t.y,g=Math.sqrt(c*c+v*v),A=(t.x+e.x)/2,S=(t.y+e.y)/2,k=-v/g,B=c/g,w=g*a,D=A+k*w,E=S+B*w;return{start:t,control:{x:D,y:E},end:e}}function z(t){const{start:e,control:o,end:a}=t;return[`M${e.x},${e.y}`,`S${o.x},${o.y}`,`${a.x},${a.y}`].join(" ")}function P(t,e,o){const a=$(t,e,o),c=z(a);return{curve:a,svgPath:c}}const d=m(()=>P(l.value[0],l.value[1],{heightRate:-r.power})),h=y(0);return T(d,t=>{const e=document.createElementNS("http://www.w3.org/2000/svg","path");e.setAttribute("d",t.svgPath),h.value=e.getTotalLength(),h.value<1&&console.log("fullLength",{curveData:t,fullLength:h.value})},{flush:"post",immediate:!0}),(t,e)=>(u(),i("g",{class:F(["svg-arrow",{dashed:t.dashed}]),style:p({"--full-length":h.value})},[b("path",{ref_key:"curve",ref:n,d:d.value.svgPath,fill:"none"},null,8,G),t.endArrow?(u(),i("polygon",{key:0,points:"-12,-6 0,0, -12,6",class:"arrow-head",style:p({offsetPath:`path('${d.value.svgPath}')`,offsetDistance:"100%",offsetRotate:"auto"})},null,4)):x("v-if",!0),t.startArrow?(u(),i("polygon",{key:1,points:"12,-6 0,0, 12,6",class:"arrow-tail",style:p({offsetPath:`path('${d.value.svgPath}')`,offsetDistance:"0%",offsetRotate:"auto"})},null,4)):x("v-if",!0)],6))}});export{Y as _,X as a};
