import{d as h,t as j,A as l,O as x,L as O,N as S,o as g,b as E,e as w,f as B,q as K,s as M,F as N}from"./modules/vue-DLh68ZqW.js";import{a as P}from"./index-CrxCzjtL.js";import{u as F}from"./slidev/context-Ck9_7O85.js";const D=h({__name:"Timeline2",props:{steps:{}},setup(n){const u=j();function f(e,t){if(t===null||typeof t!="object")return t;(e===null||typeof e!="object")&&(e={});for(const s in t)Object.prototype.hasOwnProperty.call(t,s)&&(e[s]=f(e[s],t[s]));return e}let y=P(),o=F();const A=l(()=>{let e=new Set(Object.keys(n.steps[0]));return e.delete("$clicks"),e.delete("$clicksAlias"),e.add("$stepsCount"),Array.from(e)});let r=l(()=>n.steps.length);const v=l(()=>{const e=r.value,t=Array.from({length:e},()=>f({},n.steps[0]));let s=0,m={};return n.steps.forEach(c=>{let i=0,k=e;i=s++,c.$clicksAlias&&(Array.isArray(c.$clicksAlias)?c.$clicksAlias.forEach(a=>{m[a]=[i,k]}):m[c.$clicksAlias]=[i,k]);for(let a=i;a<k;a++)t[a]=f(t[a],c)}),{states:t,aliases:m}}),d=l(()=>v.value.aliases),p=l(()=>Math.min(y.clicks.value,r.value-1)),$=l(()=>v.value.states[p.value]),C=[A.value.map(e=>[e,l(()=>{var s;const t=(s=$.value)==null?void 0:s[e];return t===void 0&&console.warn(`Key ${e} not found in ${$.value} ${p.value}`),t})]),Object.keys(d.value).map(e=>[e,l(()=>d.value[e][p.value])]),[["$stepsCount",l(()=>v.value.states.length)]]].flat(),b=x(Object.fromEntries(C));return O(()=>{console.log(o.$clicksContext.calculateSince(0,r.value)),o.$clicksContext.register(u.value,o.$clicksContext.calculateSince(0,r.value))}),S(()=>{o.$clicksContext.unregister(u.value)}),(e,t)=>(g(),E(N,null,[w("span",{ref_key:"root",ref:u},null,512),B(e.$slots,"default",K(M(b)))],64))}});export{D as _};
