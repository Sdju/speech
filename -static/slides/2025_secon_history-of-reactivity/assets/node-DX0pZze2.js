import{d as k,r as x,A as h,f as n,o as c,j as m,a8 as V,a9 as H,P as G,g as T,i as C,k as v,n as P,aa as I,e as L,w as _,t as z,ab as M,F as S,_ as O,D as W,ac as X}from"./modules/vue-B5pjl96G.js";import{u as B}from"./slidev/context-B1edYdcO.js";import{t as Y}from"./bundle-mjs-DPDMyaZw.js";import{_ as q}from"./index-BztLmv4E.js";const J={class:"absolute w-[960px] h-[552px] top-0 left-0 pointer-events-none"},oe=k({__name:"SvgLayer",setup(o){B();const i=x(),g=h(()=>{var s,u;return{width:((s=i.value)==null?void 0:s.clientWidth)||960,height:((u=i.value)==null?void 0:u.clientHeight)||552}});return V("sizes",g),(s,u)=>(c(),n("div",J,[(c(),n("svg",{ref_key:"svg",ref:i,viewBox:"0 0 960 552",stroke:"currentColor",fill:"currentColor",class:"absolute top-0 left-0 w-full h-full"},[m(s.$slots,"default")],512))]))}}),K=["d"],ae=k({__name:"SvgArrow",props:{start:{},end:{},coords:{},power:{default:.5},endArrow:{type:Boolean,default:!0},startArrow:{type:Boolean,default:!1},dashed:{type:Boolean,default:!1}},setup(o){B();const i=x(),g=H("sizes"),s=t=>{let e,r;return typeof t=="string"?[e,r]=t.split(":"):(e=t.x,r=t.y),typeof e=="string"&&(e.endsWith("%")?e=g.value.width/100*parseFloat(e):e=parseFloat(e)),typeof r=="string"&&(r.endsWith("%")?r=g.value.height/100*parseFloat(r):r=parseFloat(r)),{x:e,y:r}},u=h(()=>{let t=o.start,e=o.end;if(o.coords&&([t,e]=o.coords.split(" ")),!t||!e)throw new Error("Coords are required");return[s(t),s(e)]});function y(t,e,r){const f=(r==null?void 0:r.heightRate)||.5,p=e.x-t.x,w=e.y-t.y,$=Math.sqrt(p*p+w*w),D=(t.x+e.x)/2,N=(t.y+e.y)/2,j=-w/$,E=p/$,A=$*f,F=D+j*A,R=N+E*A;return{start:t,control:{x:F,y:R},end:e}}function b(t){const{start:e,control:r,end:f}=t;return[`M${e.x},${e.y}`,`S${r.x},${r.y}`,`${f.x},${f.y}`].join(" ")}function a(t,e,r){const f=y(t,e,r),p=b(f);return{curve:f,svgPath:p}}const l=h(()=>a(u.value[0],u.value[1],{heightRate:-o.power})),d=x(0);return G(l,t=>{const e=document.createElementNS("http://www.w3.org/2000/svg","path");e.setAttribute("d",t.svgPath),d.value=e.getTotalLength(),d.value<1&&console.log("fullLength",{curveData:t,fullLength:d.value})},{flush:"post",immediate:!0}),(t,e)=>(c(),n("g",{class:P(["svg-arrow",{dashed:t.dashed}]),style:v({"--full-length":d.value})},[T("path",{ref_key:"curve",ref:i,d:l.value.svgPath,fill:"none"},null,8,K),t.endArrow?(c(),n("polygon",{key:0,points:"-12,-6 0,0, -12,6",class:"arrow-head",style:v({offsetPath:`path('${l.value.svgPath}')`,offsetDistance:"100%",offsetRotate:"auto"})},null,4)):C("v-if",!0),t.startArrow?(c(),n("polygon",{key:1,points:"12,-6 0,0, 12,6",class:"arrow-tail",style:v({offsetPath:`path('${l.value.svgPath}')`,offsetDistance:"0%",offsetRotate:"auto"})},null,4)):C("v-if",!0)],6))}}),Q=k({__name:"node",props:{color:{default:"green"},form:{default:"rect"},inject:{type:Boolean,default:!1},multiple:{type:Boolean,default:!1},title:{},pulse:{type:Boolean,default:!1},highlight:{type:Boolean,default:!1},solid:{type:Boolean,default:!1}},setup(o){B();const i={green:{color:"bg-green/40 b-green c-green"},blue:{color:"bg-blue/40 b-blue c-blue"},red:{color:"bg-red/40 b-red c-red"},orange:{color:"bg-orange/40 b-orange c-orange"},purple:{color:"bg-purple/40 b-purple c-purple"},gray:{color:"bg-gray/40 b-gray c-gray"},transparent:{color:"bg-transparent b-transparent c-white"}},g={green:{color:"bg-green-7 b-green c-green"},blue:{color:"bg-blue-7 b-blue c-blue"},red:{color:"bg-red-7 b-red c-red"},orange:{color:"bg-orange-7 b-orange c-orange"},purple:{color:"bg-purple-7 b-purple c-purple"},gray:{color:"bg-gray-7 b-gray c-gray"},transparent:{color:"bg-transparent b-transparent c-white"}},s={circle:"rounded-[50%] px-4 py-2",rect:"rounded-[8px] px-4 py-2"},u=I(),y=h(()=>[Y("fx b-1 grid place-items-center text-xl font-bold duration-200",o.highlight&&"[--un-drop-shadow:var(--v-color)]",o.pulse&&"animate-pulse",o.solid?g[o.color].color:i[o.color].color,s[o.form],u.class),{$obj:!o.inject}]),b=h(()=>Array.from({length:5},(a,l)=>({marginLeft:`${(l+1)*7}px`,marginTop:`-${(l+1)*7}px`,opacity:.5**(l+1),transitionDelay:`${l*100}ms`})));return(a,l)=>(c(),n(S,null,[T("div",{class:P(y.value)},[L(M,{name:"title",mode:"out-in"},{default:_(()=>[a.$slots.default?m(a.$slots,"default",{key:0},()=>[m(a.$slots,"default",{},void 0,!0)],!0):(c(),n("span",{key:a.title},z(a.title),1))]),_:3})],2),L(X,{name:"multiple"},{default:_(()=>[a.multiple?(c(!0),n(S,{key:0},O(b.value,d=>(c(),n("div",{key:d.marginLeft,class:P(y.value),style:v(d)},[m(a.$slots,"default",{},()=>[W(z(a.title),1)],!0)],6))),128)):C("v-if",!0)]),_:3})],64))}}),le=q(Q,[["__scopeId","data-v-47fe5a20"]]);export{le as _,oe as a,ae as b};
