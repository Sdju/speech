import{r as k,A as w,U as _,a2 as It,Z as ee,aH as Nt,y as Ft,Q as ne,p as mt,L as W,d as V,f as y,i as T,o as m,aI as Vt,G as Rt,P as gt,aJ as oe,k as K,g as p,j as He,F,E as Kt,aK as yt,aq as _t,aL as Yt,ap as G,b as ae,aM as wt,aN as Bt,ak as ue,t as P,e as q,V as Xt,ae as Q,a as Ht,n as R,ai as Ut,aj as Gt,av as qt,M as Ze,w as Wt,H as Jt,aO as Ke,aP as Ye,am as Zt,h as Qe,af as Qt,aw as en}from"./modules/vue-C5JO9rSz.js";import{S as bt,a as fe,v as Ue,a3 as Be,a4 as st,a2 as tn,a5 as nn,a6 as ve,a7 as sn,a8 as rn,a9 as it,K as rt,V as ot,W as at,b as on,T as an,aa as ln,_ as de,ab as cn,ac as un,ad as dn,ae as hn,af as fn,ag as vn,ah as pn}from"./index-DY43h5TW.js";import{u as Y}from"./slidev/context-Cwbm9j1C.js";import{d as mn}from"./modules/unplugin-icons-BpccaO6-.js";import{t as gn}from"./bundle-mjs-D6B6e0vX.js";import{P as yn,n as _n}from"./presets-C__N5bET.js";function wn(e){return{info:k(bt(e)?.meta.slide??null),update:async()=>{}}}const bn={};function ar(e){function t(n){return bn[n]??=wn(n)}return{info:w({get(){return t(_(e)).info.value},set(n){t(_(e)).info.value=n}}),update:async(n,s)=>{const i=t(s??_(e)),r=await i.update(n);return r&&(i.info.value=r),r}}}var xn=Object.defineProperty,lt=Object.getOwnPropertySymbols,Sn=Object.prototype.hasOwnProperty,$n=Object.prototype.propertyIsEnumerable,ct=(e,t,n)=>t in e?xn(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Ge=(e,t)=>{for(var n in t||(t={}))Sn.call(t,n)&&ct(e,n,t[n]);if(lt)for(var n of lt(t))$n.call(t,n)&&ct(e,n,t[n]);return e},kn=()=>({emit(e,...t){for(let n=this.events[e]||[],s=0,i=n.length;s<i;s++)n[s](...t)},events:{},on(e,t){var n;return((n=this.events)[e]||(n[e]=[])).push(t),()=>{var s;this.events[e]=(s=this.events[e])==null?void 0:s.filter(i=>t!==i)}}});function Te(e,t){return e-t}function Cn(e){return e<0?-1:1}function Le(e){return[Math.abs(e),Cn(e)]}function xt(){const e=()=>((1+Math.random())*65536|0).toString(16).substring(1);return`${e()+e()}-${e()}-${e()}-${e()}-${e()}${e()}${e()}`}var Pn=2,te=Pn;function St(e,t){const n=document.createElementNS("http://www.w3.org/2000/svg","defs"),s=document.createElementNS("http://www.w3.org/2000/svg","marker"),i=document.createElementNS("http://www.w3.org/2000/svg","path");return i.setAttribute("fill",t),s.setAttribute("id",e),s.setAttribute("viewBox","0 -5 10 10"),s.setAttribute("refX","5"),s.setAttribute("refY","0"),s.setAttribute("markerWidth","4"),s.setAttribute("markerHeight","4"),s.setAttribute("orient","auto"),i.setAttribute("d","M0,-5L10,0L0,5"),s.appendChild(i),n.appendChild(s),n}function En(e,t){const n=e.x-t.x,s=e.y-t.y;return n*n+s*s}function Mn(e,t,n){let s=t.x,i=t.y,r=n.x-s,a=n.y-i;if(r!==0||a!==0){const o=((e.x-s)*r+(e.y-i)*a)/(r*r+a*a);o>1?(s=n.x,i=n.y):o>0&&(s+=r*o,i+=a*o)}return r=e.x-s,a=e.y-i,r*r+a*a}function zn(e,t){let n=e[0];const s=[n];let i;for(let r=1,a=e.length;r<a;r++)i=e[r],En(i,n)>t&&(s.push(i),n=i);return n!==i&&i&&s.push(i),s}function qe(e,t,n,s,i){let r=s,a=0;for(let o=t+1;o<n;o++){const h=Mn(e[o],e[t],e[n]);h>r&&(a=o,r=h)}r>s&&(a-t>1&&qe(e,t,a,s,i),i.push(e[a]),n-a>1&&qe(e,a,n,s,i))}function Tn(e,t){const n=e.length-1,s=[e[0]];return qe(e,0,n,t,s),s.push(e[n]),s}function ut(e,t,n=!1){if(e.length<=2)return e;const s=t*t;return e=n?e:zn(e,s),e=Tn(e,s),e}var pe=class{constructor(e){this.drauu=e,this.event=void 0,this.point=void 0,this.start=void 0,this.el=null}onSelected(e){}onUnselected(){}onStart(e){}onMove(e){return!1}onEnd(e){}get brush(){return this.drauu.brush}get shiftPressed(){return this.drauu.shiftPressed}get altPressed(){return this.drauu.altPressed}get svgElement(){return this.drauu.el}getMousePosition(e){var t,n,s,i;const r=this.drauu.el,a=(t=this.drauu.options.cssZoom)!=null?t:1,o=(n=this.drauu.options.coordinateScale)!=null?n:1,h=(s=this.drauu.options.offset)!=null?s:{x:0,y:0};if(this.drauu.options.coordinateTransform===!1){const v=this.drauu.el.getBoundingClientRect();return{x:(e.pageX/a-v.left+h.x)*o,y:(e.pageY/a-v.top+h.y)*o,pressure:e.pressure}}else{const v=this.drauu.svgPoint;v.x=e.clientX/a+h.x,v.y=e.clientY/a+h.y;const u=v.matrixTransform((i=r.getScreenCTM())==null?void 0:i.inverse());return{x:u.x*o,y:u.y*o,pressure:e.pressure}}}createElement(e,t){var n;const s=document.createElementNS("http://www.w3.org/2000/svg",e),i=t?Ge(Ge({},this.brush),t):this.brush;return s.setAttribute("fill",(n=i.fill)!=null?n:"transparent"),s.setAttribute("stroke",i.color),s.setAttribute("stroke-width",i.size.toString()),s.setAttribute("stroke-linecap","round"),i.dasharray&&s.setAttribute("stroke-dasharray",i.dasharray),s}attr(e,t){this.el.setAttribute(e,typeof t=="string"?t:t.toFixed(te))}_setEvent(e){this.event=e,this.point=this.getMousePosition(e)}_eventDown(e){return this._setEvent(e),this.start=this.point,this.onStart(this.point)}_eventMove(e){return this._setEvent(e),this.onMove(this.point)}_eventUp(e){return this._setEvent(e),this.onEnd(this.point)}},Ln=class ce extends pe{constructor(){super(...arguments),this.points=[],this.count=0}onStart(t){if(this.el=this.createElement("path",{fill:"transparent"}),this.points=[t],this.brush.arrowEnd){this.arrowId=xt();const n=St(this.arrowId,this.brush.color);this.el.appendChild(n)}return this.el}onMove(t){return this.el||this.onStart(t),this.points[this.points.length-1]!==t&&(this.points.push(t),this.count+=1),this.count>5&&(this.points=ut(this.points,1,!0),this.count=0),this.attr("d",ce.toSvgData(this.points)),!0}onEnd(){const t=this.el;if(this.el=null,!t)return!1;if(t.setAttribute("d",ce.toSvgData(ut(this.points,1,!0))),!t.getTotalLength()){const{x:n,y:s}=this.points[0],i=this.brush.size/2;t.setAttribute("d",`M ${n-i} ${s} a ${i},${i} 0 1,0 ${i*2},0 a ${i},${i} 0 1,0 ${-i*2},0`),t.setAttribute("fill",this.brush.color),t.setAttribute("stroke-width","0")}return!0}static line(t,n){const s=n.x-t.x,i=n.y-t.y;return{length:Math.sqrt(s**2+i**2),angle:Math.atan2(i,s)}}static controlPoint(t,n,s,i){const r=n||t,a=s||t,o=.2,h=ce.line(r,a),v=h.angle+(i?Math.PI:0),u=h.length*o,f=t.x+Math.cos(v)*u,d=t.y+Math.sin(v)*u;return{x:f,y:d}}static bezierCommand(t,n,s){const i=ce.controlPoint(s[n-1],s[n-2],t),r=ce.controlPoint(t,s[n-1],s[n+1],!0);return`C ${i.x.toFixed(te)},${i.y.toFixed(te)} ${r.x.toFixed(te)},${r.y.toFixed(te)} ${t.x.toFixed(te)},${t.y.toFixed(te)}`}static toSvgData(t){return t.reduce((n,s,i,r)=>i===0?`M ${s.x.toFixed(te)},${s.y.toFixed(te)}`:`${n} ${ce.bezierCommand(s,i,r)}`,"")}},An=class extends pe{onStart(e){return this.el=this.createElement("ellipse"),this.attr("cx",e.x),this.attr("cy",e.y),this.el}onMove(e){if(!this.el||!this.start)return!1;let[t,n]=Le(e.x-this.start.x),[s,i]=Le(e.y-this.start.y);if(this.shiftPressed){const r=Math.min(t,s);t=r,s=r}if(this.altPressed)this.attr("cx",this.start.x),this.attr("cy",this.start.y),this.attr("rx",t),this.attr("ry",s);else{const[r,a]=[this.start.x,this.start.x+t*n].sort(Te),[o,h]=[this.start.y,this.start.y+s*i].sort(Te);this.attr("cx",(r+a)/2),this.attr("cy",(o+h)/2),this.attr("rx",(a-r)/2),this.attr("ry",(h-o)/2)}return!0}onEnd(){const e=this.el;if(this.el=null,!e)return!1;try{if(!e.getTotalLength())return!1}catch{return!1}return!0}},Dn=class extends pe{constructor(){super(...arguments),this.pathSubFactor=20,this.pathFragments=[],this._erased=[]}onSelected(e){const t=(n,s)=>{if(n&&n.length)for(let i=0;i<n.length;i++){const r=n[i];if(r.getTotalLength){const a=r.getTotalLength();for(let o=0;o<this.pathSubFactor;o++){const h=r.getPointAtLength(a*o/this.pathSubFactor),v=r.getPointAtLength(a*(o+1)/this.pathSubFactor);this.pathFragments.push({x1:h.x,x2:v.x,y1:h.y,y2:v.y,segment:o,element:s||r})}}else r.children&&t(r.children,r)}};e&&t(e.children)}onUnselected(){this.pathFragments=[]}onStart(e){this.svgPointPrevious=this.svgElement.createSVGPoint(),this.svgPointPrevious.x=e.x,this.svgPointPrevious.y=e.y}onMove(e){this.svgPointCurrent=this.svgElement.createSVGPoint(),this.svgPointCurrent.x=e.x,this.svgPointCurrent.y=e.y;const t=this.checkAndEraseElement();return this.svgPointPrevious=this.svgPointCurrent,t}onEnd(){this.svgPointPrevious=void 0,this.svgPointCurrent=void 0;const e=this._erased;return this._erased=[],{undo:()=>e.forEach(t=>this.drauu._restoreNode(t)),redo:()=>e.forEach(t=>this.drauu._removeNode(t))}}checkAndEraseElement(){if(this.pathFragments.length)for(let e=0;e<this.pathFragments.length;e++){const t=this.pathFragments[e];if(this.svgPointPrevious&&this.svgPointCurrent){const n={x1:this.svgPointPrevious.x,x2:this.svgPointCurrent.x,y1:this.svgPointPrevious.y,y2:this.svgPointCurrent.y};this.lineLineIntersect(t,n)&&(this.drauu._removeNode(t.element),this._erased.push(t.element))}}return this._erased.length&&(this.pathFragments=this.pathFragments.filter(e=>!this._erased.includes(e.element))),this._erased.length>0}lineLineIntersect(e,t){const n=e.x1,s=e.x2,i=t.x1,r=t.x2,a=e.y1,o=e.y2,h=t.y1,v=t.y2,u=(n-s)*(h-v)-(a-o)*(i-r),f=(n*o-a*s)*(i-r)-(n-s)*(i*v-h*r),d=(n*o-a*s)*(h-v)-(a-o)*(i*v-h*r),l=(c,g,x)=>c>=g&&c<=x?!0:c>=x&&c<=g;if(u===0)return!1;{const c={x:f/u,y:d/u};return l(c.x,n,s)&&l(c.y,a,o)&&l(c.x,i,r)&&l(c.y,h,v)}}},On=class extends pe{onStart(e){if(this.el=this.createElement("line",{fill:"transparent"}),this.attr("x1",e.x),this.attr("y1",e.y),this.attr("x2",e.x),this.attr("y2",e.y),this.brush.arrowEnd){const t=xt(),n=document.createElementNS("http://www.w3.org/2000/svg","g");return n.append(St(t,this.brush.color)),n.append(this.el),this.attr("marker-end",`url(#${t})`),n}return this.el}onMove(e){if(!this.el)return!1;let{x:t,y:n}=e;if(this.shiftPressed){const s=e.x-this.start.x,i=e.y-this.start.y;if(i!==0){let r=s/i;r=Math.round(r),Math.abs(r)<=1?(t=this.start.x+i*r,n=this.start.y+i):(t=this.start.x+s,n=this.start.y)}}return this.altPressed?(this.attr("x1",this.start.x*2-t),this.attr("y1",this.start.y*2-n),this.attr("x2",t),this.attr("y2",n)):(this.attr("x1",this.start.x),this.attr("y1",this.start.y),this.attr("x2",t),this.attr("y2",n)),!0}onEnd(){const e=this.el;if(this.el=null,!e)return!1;try{if(e.getTotalLength()<5)return!1}catch{return!1}return!0}},jn=class extends pe{onStart(e){return this.el=this.createElement("rect"),this.brush.cornerRadius&&(this.attr("rx",this.brush.cornerRadius),this.attr("ry",this.brush.cornerRadius)),this.attr("x",e.x),this.attr("y",e.y),this.el}onMove(e){if(!this.el||!this.start)return!1;let[t,n]=Le(e.x-this.start.x),[s,i]=Le(e.y-this.start.y);if(this.shiftPressed){const r=Math.min(t,s);t=r,s=r}if(this.altPressed)this.attr("x",this.start.x-t),this.attr("y",this.start.y-s),this.attr("width",t*2),this.attr("height",s*2);else{const[r,a]=[this.start.x,this.start.x+t*n].sort(Te),[o,h]=[this.start.y,this.start.y+s*i].sort(Te);this.attr("x",r),this.attr("y",o),this.attr("width",a-r),this.attr("height",h-o)}return!0}onEnd(){const e=this.el;if(this.el=null,!e)return!1;try{if(!e.getTotalLength())return!1}catch{return!1}return!0}};function dt(e,t,n,s=i=>i){return e*s(.5-t*(.5-n))}function In(e){return[-e[0],-e[1]]}function Z(e,t){return[e[0]+t[0],e[1]+t[1]]}function U(e,t){return[e[0]-t[0],e[1]-t[1]]}function J(e,t){return[e[0]*t,e[1]*t]}function Nn(e,t){return[e[0]/t,e[1]/t]}function ye(e){return[e[1],-e[0]]}function ht(e,t){return e[0]*t[0]+e[1]*t[1]}function Fn(e,t){return e[0]===t[0]&&e[1]===t[1]}function Vn(e){return Math.hypot(e[0],e[1])}function Rn(e){return e[0]*e[0]+e[1]*e[1]}function ft(e,t){return Rn(U(e,t))}function $t(e){return Nn(e,Vn(e))}function Kn(e,t){return Math.hypot(e[1]-t[1],e[0]-t[0])}function _e(e,t,n){let s=Math.sin(n),i=Math.cos(n),r=e[0]-t[0],a=e[1]-t[1],o=r*i-a*s,h=r*s+a*i;return[o+t[0],h+t[1]]}function We(e,t,n){return Z(e,J(U(t,e),n))}function vt(e,t,n){return Z(e,J(t,n))}var{min:he,PI:Yn}=Math,pt=.275,we=Yn+1e-4;function Bn(e,t={}){let{size:n=16,smoothing:s=.5,thinning:i=.5,simulatePressure:r=!0,easing:a=M=>M,start:o={},end:h={},last:v=!1}=t,{cap:u=!0,easing:f=M=>M*(2-M)}=o,{cap:d=!0,easing:l=M=>--M*M*M+1}=h;if(e.length===0||n<=0)return[];let c=e[e.length-1].runningLength,g=o.taper===!1?0:o.taper===!0?Math.max(n,c):o.taper,x=h.taper===!1?0:h.taper===!0?Math.max(n,c):h.taper,C=Math.pow(n*s,2),D=[],b=[],E=e.slice(0,10).reduce((M,N)=>{let A=N.pressure;if(r){let I=he(1,N.distance/n),Fe=he(1,1-I);A=he(1,M+(Fe-M)*(I*pt))}return(M+A)/2},e[0].pressure),O=dt(n,i,e[e.length-1].pressure,a),H,me=e[0].vector,se=e[0].point,S=se,$=se,L=S,z=!1;for(let M=0;M<e.length;M++){let{pressure:N}=e[M],{point:A,vector:I,distance:Fe,runningLength:ge}=e[M];if(M<e.length-1&&c-ge<3)continue;if(i){if(r){let re=he(1,Fe/n),Re=he(1,1-re);N=he(1,E+(Re-E)*(re*pt))}O=dt(n,i,N,a)}else O=n/2;H===void 0&&(H=O);let Dt=ge<g?f(ge/g):1,Ot=c-ge<x?l((c-ge)/x):1;O=Math.max(.01,O*Math.min(Dt,Ot));let et=(M<e.length-1?e[M+1]:e[M]).vector,Ve=M<e.length-1?ht(I,et):1,jt=ht(I,me)<0&&!z,tt=Ve!==null&&Ve<0;if(jt||tt){let re=J(ye(me),O);for(let Re=1/13,ke=0;ke<=1;ke+=Re)$=_e(U(A,re),A,we*ke),D.push($),L=_e(Z(A,re),A,we*-ke),b.push(L);se=$,S=L,tt&&(z=!0);continue}if(z=!1,M===e.length-1){let re=J(ye(I),O);D.push(U(A,re)),b.push(Z(A,re));continue}let nt=J(ye(We(et,I,Ve)),O);$=U(A,nt),(M<=1||ft(se,$)>C)&&(D.push($),se=$),L=Z(A,nt),(M<=1||ft(S,L)>C)&&(b.push(L),S=L),E=N,me=I}let j=e[0].point.slice(0,2),ie=e.length>1?e[e.length-1].point.slice(0,2):Z(e[0].point,[1,1]),Ne=[],$e=[];if(e.length===1){if(!(g||x)||v){let M=vt(j,$t(ye(U(j,ie))),-(H||O)),N=[];for(let A=1/13,I=A;I<=1;I+=A)N.push(_e(M,j,we*2*I));return N}}else{if(!(g||x&&e.length===1))if(u)for(let N=1/13,A=N;A<=1;A+=N){let I=_e(b[0],j,we*A);Ne.push(I)}else{let N=U(D[0],b[0]),A=J(N,.5),I=J(N,.51);Ne.push(U(j,A),U(j,I),Z(j,I),Z(j,A))}let M=ye(In(e[e.length-1].vector));if(x||g&&e.length===1)$e.push(ie);else if(d){let N=vt(ie,M,O);for(let A=1/29,I=A;I<1;I+=A)$e.push(_e(N,ie,we*3*I))}else $e.push(Z(ie,J(M,O)),Z(ie,J(M,O*.99)),U(ie,J(M,O*.99)),U(ie,J(M,O)))}return D.concat($e,b.reverse(),Ne)}function Xn(e,t={}){var n;let{streamline:s=.5,size:i=16,last:r=!1}=t;if(e.length===0)return[];let a=.15+(1-s)*.85,o=Array.isArray(e[0])?e:e.map(({x:l,y:c,pressure:g=.5})=>[l,c,g]);if(o.length===2){let l=o[1];o=o.slice(0,-1);for(let c=1;c<5;c++)o.push(We(o[0],l,c/4))}o.length===1&&(o=[...o,[...Z(o[0],[1,1]),...o[0].slice(2)]]);let h=[{point:[o[0][0],o[0][1]],pressure:o[0][2]>=0?o[0][2]:.25,vector:[1,1],distance:0,runningLength:0}],v=!1,u=0,f=h[0],d=o.length-1;for(let l=1;l<o.length;l++){let c=r&&l===d?o[l].slice(0,2):We(f.point,o[l],a);if(Fn(f.point,c))continue;let g=Kn(c,f.point);if(u+=g,l<d&&!v){if(u<i)continue;v=!0}f={point:c,pressure:o[l][2]>=0?o[l][2]:.5,vector:$t(U(f.point,c)),distance:g,runningLength:u},h.push(f)}return h[0].vector=((n=h[1])==null?void 0:n.vector)||[0,0],h}function Hn(e,t={}){return Bn(Xn(e,t),t)}var Un=class kt extends pe{constructor(){super(...arguments),this.points=[]}onStart(t){return this.el=document.createElementNS("http://www.w3.org/2000/svg","path"),this.points=[t],this.attr("fill",this.brush.color),this.attr("d",this.getSvgData(this.points)),this.el}onMove(t){return this.el||this.onStart(t),this.points[this.points.length-1]!==t&&this.points.push(t),this.attr("d",this.getSvgData(this.points)),!0}onEnd(){const t=this.el;return this.el=null,!!t}getSvgData(t){return kt.getSvgData(t,this.brush)}static getSvgData(t,n){const s=Hn(t,Ge({size:n.size,thinning:.9,simulatePressure:!1,start:{taper:5},end:{taper:5}},n.stylusOptions));if(!s.length)return"";const i=s.reduce((r,[a,o],h,v)=>{const[u,f]=v[(h+1)%v.length];return r.push(a,o,(a+u)/2,(o+f)/2),r},["M",...s[0],"Q"]);return i.push("Z"),i.map(r=>typeof r=="number"?r.toFixed(2):r).join(" ")}};function Gn(e){return{draw:new Ln(e),stylus:new Un(e),line:new On(e),rectangle:new jn(e),ellipse:new An(e),eraseLine:new Dn(e)}}var qn=class{constructor(e={}){this.options=e,this.el=null,this.svgPoint=null,this.eventEl=null,this.shiftPressed=!1,this.altPressed=!1,this.drawing=!1,this._emitter=kn(),this._originalPointerId=null,this._models=Gn(this),this._opStack=[],this._opIndex=0,this._disposables=[],this._elements=[],this.options.brush||(this.options.brush={color:"black",size:3,mode:"stylus"}),e.el&&this.mount(e.el,e.eventTarget,e.window)}get model(){return this._models[this.mode]}get mounted(){return!!this.el}get mode(){return this.options.brush.mode||"stylus"}set mode(e){this._models[this.mode].onUnselected(),this.options.brush.mode=e,this.model.onSelected(this.el)}get brush(){return this.options.brush}set brush(e){this.options.brush=e}resolveSelector(e){return typeof e=="string"?document.querySelector(e):e||null}mount(e,t,n=window){if(this.el)throw new Error("[drauu] already mounted, unmount previous target first");if(this.el=this.resolveSelector(e),!this.el)throw new Error("[drauu] target element not found");if(this.el.tagName.toLocaleLowerCase()!=="svg")throw new Error("[drauu] can only mount to a SVG element");if(!this.el.createSVGPoint)throw new Error("[drauu] SVG element must be create by document.createElementNS('http://www.w3.org/2000/svg', 'svg')");this.svgPoint=this.el.createSVGPoint();const s=this.resolveSelector(t)||this.el,i=this.eventStart.bind(this),r=this.eventMove.bind(this),a=this.eventEnd.bind(this),o=this.eventKeyboard.bind(this);s.addEventListener("pointerdown",i,{passive:!1}),n.addEventListener("pointermove",r,{passive:!1}),n.addEventListener("pointerup",a,{passive:!1}),n.addEventListener("pointercancel",a,{passive:!1}),n.addEventListener("keydown",o,!1),n.addEventListener("keyup",o,!1),this._disposables.push(()=>{s.removeEventListener("pointerdown",i),n.removeEventListener("pointermove",r),n.removeEventListener("pointerup",a),n.removeEventListener("pointercancel",a),n.removeEventListener("keydown",o,!1),n.removeEventListener("keyup",o,!1)}),this._emitter.emit("mounted")}unmount(){this._disposables.forEach(e=>e()),this._disposables.length=0,this._elements.length=0,this.el=null,this._emitter.emit("unmounted")}on(e,t){return this._emitter.on(e,t)}undo(){return!this.canUndo()||this.drawing?!1:(this._opStack[--this._opIndex].undo(),this._emitter.emit("changed"),!0)}redo(){return!this.canRedo()||this.drawing?!1:(this._opStack[this._opIndex++].redo(),this._emitter.emit("changed"),!0)}canRedo(){return this._opIndex<this._opStack.length}canUndo(){return this._opIndex>0}eventMove(e){!this.acceptsInput(e)||!this.drawing||this.model._eventMove(e)&&(e.stopPropagation(),e.preventDefault(),this._emitter.emit("changed"))}eventStart(e){this.acceptsInput(e)&&(e.stopPropagation(),e.preventDefault(),this._currentNode&&this.cancel(),this.drawing=!0,this._originalPointerId=e.pointerId,this._emitter.emit("start"),this._currentNode=this.model._eventDown(e),this._currentNode&&this.mode!=="eraseLine"&&this.el.appendChild(this._currentNode),this._emitter.emit("changed"))}eventEnd(e){if(!this.acceptsInput(e)||!this.drawing)return;const t=this.model._eventUp(e);if(!t)this.cancel();else if(t===!0){const n=this._currentNode;n&&(this._appendNode(n),this.commit({undo:()=>this._removeNode(n),redo:()=>this._restoreNode(n)}))}else this.commit(t);this.drawing=!1,this._emitter.emit("end"),this._emitter.emit("changed"),this._originalPointerId=null}acceptsInput(e){return(!this.options.acceptsInputTypes||this.options.acceptsInputTypes.includes(e.pointerType))&&!(this._originalPointerId&&this._originalPointerId!==e.pointerId)}eventKeyboard(e){this.shiftPressed===e.shiftKey&&this.altPressed===e.altKey||(this.shiftPressed=e.shiftKey,this.altPressed=e.altKey,this.model.point&&this.model.onMove(this.model.point)&&this._emitter.emit("changed"))}commit(e){this._opStack.length=this._opIndex,this._opStack.push(e),this._opIndex++;const t=this._currentNode;this._currentNode=void 0,this._emitter.emit("committed",t)}clear(){this._opStack.length=0,this._opIndex=0,this._elements=[],this.cancel(),this.el.innerHTML="",this._emitter.emit("changed")}cancel(){this._currentNode&&(this.el.removeChild(this._currentNode),this._currentNode=void 0,this._emitter.emit("canceled"))}dump(){return this.el.innerHTML}load(e){this.clear(),this.el.innerHTML=e}_appendNode(e){const t=this._elements.at(-1);t?t.after(e):this.el.append(e);const n=this._elements.push(e)-1;e.dataset.drauu_index=n.toString()}_removeNode(e){e.remove(),this._elements[+e.dataset.drauu_index]=null}_restoreNode(e){const t=+e.dataset.drauu_index;this._elements[t]=e;for(let n=t-1;n>=0;n--){const s=this._elements[n];if(s){s.after(e);return}}this.el.prepend(e)}};function Wn(e){return new qn(e)}const Jn=It(()=>{const{currentSlideNo:e,isPresenter:t}=fe(),n=["#ff595e","#ffca3a","#8ac926","#1982c4","#6a4c93","#ffffff","#000000"],s=ee("slidev-drawing-enabled",!1),i=ee("slidev-drawing-pinned",!1),r=Nt(ee("slidev-drawing-brush",{color:n[0],size:4,mode:"stylus"})),a=k(!1),o=k(!1),h=k(!1),v=k(!1),u=k("stylus"),f=w(()=>Ue.drawings.syncAll||t.value);let d=!1;const l=w({get(){return u.value},set(b){u.value=b,b==="arrow"?(g.mode="line",r.arrowEnd=!0):(g.mode=b,r.arrowEnd=!1)}}),c=ne({brush:r,acceptsInputTypes:w(()=>s.value&&(!Ue.drawings.presenterOnly||t.value)?void 0:["pen"]),coordinateTransform:!1}),g=Ft(Wn(c));function x(){g.clear(),f.value&&st(e.value,"")}function C(){h.value=g.canRedo(),o.value=g.canUndo(),v.value=!!g.el?.children.length}function D(b){d=!0;const E=Be[b||e.value];E!=null?g.load(E):g.clear(),C(),d=!1}return g.on("changed",()=>{if(C(),!d){const b=g.dump(),E=e.value;(Be[E]||"")!==b&&f.value&&st(E,g.dump())}}),nn(b=>{d=!0,b[e.value]!=null&&g.load(b[e.value]||""),d=!1,C()}),mt(()=>{W(e,()=>{g.mounted&&D()},{immediate:!0})}),g.on("start",()=>a.value=!0),g.on("end",()=>a.value=!1),window.addEventListener("keydown",b=>{if(!s.value||tn.value)return;const E=!b.ctrlKey&&!b.altKey&&!b.shiftKey&&!b.metaKey;let O=!0;b.code==="KeyZ"&&(b.ctrlKey||b.metaKey)?b.shiftKey?g.redo():g.undo():b.code==="Escape"?s.value=!1:b.code==="KeyL"&&E?l.value="line":b.code==="KeyA"&&E?l.value="arrow":b.code==="KeyS"&&E?l.value="stylus":b.code==="KeyR"&&E?l.value="rectangle":b.code==="KeyE"&&E?l.value="ellipse":b.code==="KeyC"&&E?x():b.code.startsWith("Digit")&&E&&+b.code[5]<=n.length?r.color=n[+b.code[5]-1]:O=!1,O&&(b.preventDefault(),b.stopPropagation())},!1),{brush:r,brushColors:n,canClear:v,canRedo:h,canUndo:o,clear:x,drauu:g,drauuOptions:c,drawingEnabled:s,drawingMode:l,drawingPinned:i,drawingState:Be,isDrawing:a,loadCanvas:D}}),Zn=["innerHTML"],lr=V({__name:"DrawingPreview",props:{page:{}},setup(e){const{drawingState:t}=Jn();return(n,s)=>_(t)[e.page]?(m(),y("svg",{key:0,class:"w-full h-full absolute top-0 pointer-events-none",innerHTML:_(t)[e.page]},null,8,Zn)):T("v-if",!0)}}),le=ne({});let Qn=[],es=[];ve(le,"$syncUp",!0);ve(le,"$syncDown",!0);ve(le,"$paused",!1);ve(le,"$onSet",e=>Qn.push(e));ve(le,"$onPatch",e=>es.push(e));sn();ve(le,"$patch",async()=>!1);const ts=rn(le,le,!0);window.navigator.userAgent.match(/Chrome\/(\d+)/)?.[1];window.navigator.userAgent.match(/Chrome\/(\d+)/)?.[1];class ns{constructor(){this._screenshotSession=null}getSnapshot(t,n){const s=t+(n?"-dark":"-light"),i=ts.state[s];if(!i)return;const r=bt(t);if(r&&i?.revision===r?.meta.slide.revision)return i.image}async saveSnapshot(t,n,s){return!1}async startCapturing(t){return!1}}const ss=new ns,is=["id"],rs=["id"],os={class:"slidev-slide-container w-full h-full relative"},as=["src"],ls=V({__name:"SlideContainer",props:{width:{type:Number},meta:{default:()=>({})},isMain:{type:Boolean,default:!1},no:{type:Number,required:!1},useSnapshot:{type:Boolean,default:!1},contentStyle:{type:Object,default:()=>({})}},setup(e){const t=e,{isPrintMode:n}=fe(),s=k(null),i=Vt(s),r=k(null),a=w(()=>t.width??i.width.value),o=w(()=>t.width?t.width/it.value:i.height.value),h=w(()=>rt.value&&!n.value?+rt.value:Math.min(a.value/ot.value,o.value/at.value)),v=w(()=>({...t.contentStyle,height:`${at.value}px`,width:`${ot.value}px`,transform:`translate(-50%, -50%) scale(${h.value})`,"--slidev-slide-scale":h.value})),u=w(()=>t.width?{width:`${t.width}px`,height:`${t.width/it.value}px`}:{});if(t.isMain){const d=document.documentElement.style;Rt(()=>d.setProperty("--slidev-slide-scale",h.value.toString())),gt(()=>d.removeProperty("--slidev-slide-scale"))}oe(an,h),oe(ln,r);const f=w(()=>{if(!(t.no==null||!t.useSnapshot))return ss.getSnapshot(t.no,on.value)});return(d,l)=>f.value?(m(),y(F,{key:1},[T(" Image Snapshot "),p("div",os,[p("img",{src:f.value,class:"w-full h-full object-cover",style:K(u.value)},null,12,as),l[0]||(l[0]=p("div",{absolute:"","bottom-1":"","right-1":"","p0.5":"","text-cyan:75":"","bg-cyan:10":"",rounded:"",title:"Snapshot"},[p("div",{class:"i-carbon-camera"})],-1))])],2112)):(m(),y("div",{key:0,id:e.isMain?"slide-container":void 0,ref_key:"container",ref:s,class:"slidev-slide-container",style:K(u.value)},[p("div",{id:e.isMain?"slide-content":void 0,ref_key:"slideElement",ref:r,class:"slidev-slide-content",style:K(v.value)},[He(d.$slots,"default",{},void 0,!0)],12,rs),He(d.$slots,"controls",{},void 0,!0)],12,is))}}),cr=de(ls,[["__scopeId","data-v-27d129d0"]]),Ct=Symbol("diContainer");function cs(e){let t=0,n,s;const i=()=>{t-=1,s&&t<=0&&(s.stop(),n=void 0,s=void 0)};return((...r)=>(t+=1,s||(s=yt(!0),n=s.run(()=>e(...r))),_t(i),n))}function us(e){let t,n;return((...s)=>(n||(n=yt(!0),t=n.run(()=>e(...s))),t))}function ds(){const e={services:ne(new Map)};return Yt(Ct,e),{register:(t,n,s={shared:!0})=>{const i=s.shared?cs(n):us(n);e.services.set(t,i)}}}function De(){const e=Kt(Ct);if(!e)throw new Error("Di container not found");const t={inject:n=>{const s=e.services.get(n);if(!s)throw new Error(`Service with key ${String(n)} not found`);return s(t)}};return t}function Oe(e){return Symbol.for(e.name)}function hs(e){return typeof e=="number"?new Promise(t=>setTimeout(t,e)):new Promise(t=>{const n=Symbol(),s=setInterval(()=>{const i=e(n);i!==n&&(clearInterval(s),t(i))},100)})}const Pt=()=>{const e=k(),t=k(1),n=k(),s=k(0),i=k(0),r=k(0),a=k(0);W(()=>e.value,async h=>{h||(e.value=await hs(v=>document.querySelector("#slide-content")??v))},{immediate:!0});function o(){const h=e.value.getBoundingClientRect();n.value=h,s.value=h.left,i.value=h.top,r.value=e.value.clientWidth/t.value,a.value=e.value.clientHeight/t.value,t.value=h.width/e.value.clientWidth}return W(()=>e.value,()=>{o()}),G(window,"resize",()=>{o()}),ne({slideElement:e,rect:n,scale:t,left:s,top:i,width:r,height:a})},je=Oe(Pt),Et=e=>{const t=e.inject(je),n=k(0),s=k(0),i=k(!1),r=k(!1),a=w(()=>(n.value-t.left)/t.scale),o=w(()=>(s.value-t.top)/t.scale),h=w(()=>Math.round(a.value/(t.width/t.scale)*1e4)/100),v=w(()=>Math.round(o.value/(t.height/t.scale)*1e4)/100);G(()=>t.slideElement,"mouseleave",()=>{i.value=!1}),G(()=>t.slideElement,"mouseenter",()=>{i.value=!0}),G(()=>t.slideElement,"mousedown",()=>{r.value=!0}),G(()=>t.slideElement,"mouseup",()=>{r.value=!1}),G(window,"mousemove",f=>{n.value=f.clientX,s.value=f.clientY});function u({x:f,y:d}){return{x:(f-t.left)/t.scale,y:(d-t.top)/t.scale}}return ne({globalX:w(()=>n.value),globalY:w(()=>s.value),inSlide:w(()=>i.value),isDown:w(()=>r.value),localX:a,localY:o,localXPercent:h,localYPercent:v,globalToLocal:u})},Ie=Oe(Et),Mt=()=>{const e=ne({});return ne({data:e})},Se=Oe(Mt);function zt(){const e=new AbortController,t=e.signal;return t.abort=()=>e.abort(),t}function Je(e){const t=zt();return e.addEventListener("abort",()=>{t.abort()}),t}function fs(e){return e?._object}function Tt(){const e=k(new Set),t=k(null),n=k(null);let s=null;class i{constructor(o){this.signal=zt(),this.hoveredSignal=null,this.locked=!1,this.element=o,this.addListener("mouseenter",this.onEnter)}addListener(o,h,v=this.signal){this.element.addEventListener(o,h.bind(this),{signal:v})}onEnter(){this.hoveredSignal=Je(this.signal),this.addListener("click",this.onClick,this.hoveredSignal),this.addListener("mouseleave",this.onLeave,this.hoveredSignal),t.value=this.element}onClick(){this.locked||(n.value=n.value===this.element?null:this.element)}onLeave(){this.hoveredSignal.abort(),this.hoveredSignal=null,t.value=null}dispose(){console.log("dispose"),this.signal.abort()}}function r(){const a=document.querySelectorAll("#slide-content .\\$obj"),o=new Set(a);[...o].filter(u=>!e.value.has(u)).forEach(u=>{e.value.add(u),u._object=new i(u)}),[...e.value].filter(u=>!o.has(u)).forEach(u=>{e.value.delete(u),u._object?.dispose()})}return s=setInterval(r,1e3),_t(()=>{s&&(clearInterval(s),s=null)}),ne({objects:e,hovered:t,active:n})}const Lt=Oe(Tt),vs=V({__name:"CoordHelper",setup(e){Y();const t=ds();return t.register(je,Pt),t.register(Ie,Et),t.register(Lt,Tt),t.register(Se,Mt,{shared:!1}),(n,s)=>(m(),ae(wt,{to:"body"},[He(n.$slots,"default")]))}}),ps=["onClick"],ms=["onClick"],gs=["onClick"],ys=["onClick"],_s=["onClick"],ws=["onClick"],bs=["onClick"],xs=["onClick"],Ss=["onClick"],$s=["onClick"],ks=V({__name:"MemoryEditor",setup(e){Y();const t=De().inject(Se);function n(o){navigator.clipboard.writeText(o)}const s=k(),{style:i}=Bt(s,{initialValue:{x:0,y:0}});function r(){t.data.savedPositions=[]}function a(o){t.data.savedPositions=t.data.savedPositions.filter(h=>h!==o)}return(o,h)=>{const v=mn;return m(),y("div",{ref_key:"draggableElement",ref:s,class:"fixed bg-black/40 p-2 rounded-xl h-auto w-auto z-100 max-w-[400px] flex flex-col gap-2 font-mono text-xs select-none",style:K(_(i))},[(m(!0),y(F,null,ue(_(t).data.savedPositions,u=>(m(),y("div",{key:u.x+":"+u.y,class:"flex flex-wrap bg-blue-500/20 rounded-full overflow-hidden"},[p("div",{class:"record",onClick:f=>n(`${u.x.toFixed(0)}`)}," x:"+P(u.x.toFixed(0)),9,ps),p("div",{class:"record",onClick:f=>n(`${u.y.toFixed(0)}`)}," y:"+P(u.y.toFixed(0)),9,ms),p("div",{class:"record",onClick:f=>n(`${u.xPercent}%`)}," x%:"+P(u.xPercent),9,gs),p("div",{class:"record",onClick:f=>n(`${u.yPercent}%`)}," y%:"+P(u.yPercent),9,ys),p("div",{class:"record",onClick:f=>a(u)},[q(v)],8,_s)]))),128)),(m(!0),y(F,null,ue(_(t).data.savedChanges.values(),u=>(m(),y("div",{key:u.x+":"+u.y,class:"flex flex-wrap bg-blue-500/20 rounded-full overflow-hidden"},[p("div",{class:"record",onClick:f=>n(`${u.x.toFixed(0)}`)},"x:"+P(u.x.toFixed(0)),9,ws),p("div",{class:"record",onClick:f=>n(`${u.y.toFixed(0)}`)},"y:"+P(u.y.toFixed(0)),9,bs),p("div",{class:"record",onClick:f=>n(`size-${u.width.toFixed(0)}_${u.height.toFixed(0)}`)}," size ",8,xs),p("div",{class:"record",onClick:f=>n(`pos-${u.x.toFixed(0)}_${u.y.toFixed(0)}`)}," pos ",8,Ss),p("div",{class:"record",onClick:f=>n(`sp-${u.x.toFixed(0)}_${u.y.toFixed(0)}_${u.width.toFixed(0)}_${u.height.toFixed(0)}`)}," sp ",8,$s)]))),128)),p("div",{class:"bg-blue-500/30 active:bg-blue-500 px-2 py-1 rounded-full cursor-pointer duration-100 self-center",onClick:h[0]||(h[0]=u=>r())},[q(v)])],4)}}}),Cs=V({__name:"ObjectEdit",setup(e){Y();const t=De(),n=t.inject(Lt),s=t.inject(Ie),i=t.inject(je),r=t.inject(Se);r.data.savedChanges=new Map;const a=new Set(["ArrowDown","ArrowUp","ArrowRight","ArrowLeft"]),o=w(()=>l.value??n.active?.getBoundingClientRect()),h=w(()=>{const c=n.hovered?.getBoundingClientRect();return c?{left:`${c.left}px`,top:`${c.top}px`,width:`${c.width}px`,height:`${c.height}px`}:null}),v=w(()=>o.value?{left:`${o.value.left}px`,top:`${o.value.top}px`,width:`${o.value.width}px`,height:`${o.value.height}px`}:{});let u=null,f=null,d=null;const l=k();return W(()=>fs(n.active),(c,g)=>{g&&(f?.abort(),f=null),c&&(f=Je(c.signal),c._registered||(c._registered=!0,c.signal.addEventListener("abort",()=>{r.data.savedChanges.delete(c)})),document.body.addEventListener("keydown",x=>{if(console.log(x.key),x.key==="Escape"){n.active=null;return}if(!a.has(x.key))return;l.value=c.element.getBoundingClientRect();const C=s.globalToLocal({x:l.value.left,y:l.value.top});C.width=l.value.width/i.scale,C.height=l.value.height/i.scale;let D=x.shiftKey?10:x.altKey?1:5;x.key==="ArrowDown"?C.y+=D:x.key==="ArrowUp"?C.y-=D:x.key==="ArrowRight"?C.x+=D:x.key==="ArrowLeft"&&(C.x-=D);const b=C.x+C.width/2,E=C.y+C.height/2;c.element.style.transition="none",c.element.style.left=`${b}px`,c.element.style.top=`${E}px`,console.log({left:c.element.style.left,top:c.element.style.top}),l.value=c.element.getBoundingClientRect(),r.data.savedChanges.set(c,{x:b,y:E,width:C.width/i.scale,height:C.height/i.scale}),x.stopImmediatePropagation()},{signal:f,capture:!0}),document.body.addEventListener("keyup",x=>{a.has(x.key)&&c.element.style.removeProperty("transition")},{signal:f,capture:!0}),c.addListener("mousedown",x=>{x.stopImmediatePropagation(),u=Je(f);const C=c.element.getBoundingClientRect(),D=(x.clientX-C.left-C.width/2)/i.scale,b=(x.clientY-C.top-C.height/2)/i.scale;d={x:D,y:b},c.element.style.transition="none",u.addEventListener("abort",()=>{c.element.style.removeProperty("transition")}),window.addEventListener("mousemove",E=>{c.locked=!0;const O=s.globalToLocal({x:E.clientX,y:E.clientY});l.value=c.element.getBoundingClientRect();const H={x:O.x-d.x,y:O.y-d.y,width:l.value.width/i.scale,height:l.value.height/i.scale};c.element.style.left=`${H.x}px`,c.element.style.top=`${H.y}px`,r.data.savedChanges.set(c,H)},{signal:u}),window.addEventListener("mouseup",E=>{u?.abort(),u=null,l.value=void 0,setTimeout(()=>{c.locked=!1},100)},{signal:u})},f))}),(c,g)=>(m(),y(F,null,[h.value&&_(n).active!==_(n).hovered?(m(),y("div",{key:0,class:"fixed pointer-events-none border-2 z-[999] border-blue-500",style:K(h.value)},null,4)):T("v-if",!0),_(n).active?(m(),y("div",{key:1,class:"fixed pointer-events-none border-2 z-[999] border-green-500",style:K(v.value)},null,4)):T("v-if",!0)],64))}}),Ps=V({__name:"MouseSizeSelect",setup(e){Y();const t=De(),n=t.inject(Ie),s=t.inject(Se),i=t.inject(je);return W(()=>n.isDown,r=>{r?s.data.selectSize={startX:n.globalX,startY:n.globalY}:s.data.selectSize=null}),W(()=>[n.globalX,n.globalY],([r,a])=>{s.data.selectSize&&(s.data.selectSize.width=Math.abs(r-s.data.selectSize.startX)/i.scale,s.data.selectSize.height=Math.abs(a-s.data.selectSize.startY)/i.scale,s.data.selectSize.widthPercent=Math.round(s.data.selectSize.width/(i.width??0)*1e4)/100,s.data.selectSize.heightPercent=Math.round(s.data.selectSize.height/(i.height??0)*1e4)/100)}),(r,a)=>_(s).data.selectSize?(m(),y("div",{key:0,ref:"selectionBox",class:"fixed b-[1px] border-dashed border-white/50 pointer-events-none",style:K({left:`${Math.min(_(s).data.selectSize.startX,_(n).globalX)}px`,top:`${Math.min(_(s).data.selectSize.startY,_(n).globalY)}px`,width:`${Math.abs(_(n).globalX-_(s).data.selectSize.startX)}px`,height:`${Math.abs(_(n).globalY-_(s).data.selectSize.startY)}px`})},null,4)):T("v-if",!0)}}),Es=V({__name:"MousePosTooltip",setup(e){Y();const t=De(),n=t.inject(Ie),s=t.inject(Se);s.data.savedPositions??=[];const i=w(()=>s.data.selectSize?{width:Math.round(s.data.selectSize.width)||0,height:Math.round(s.data.selectSize.height)||0,widthPercent:Math.round(s.data.selectSize.widthPercent*100)/100||0,heightPercent:Math.round(s.data.selectSize.heightPercent*100)/100||0}:null),r=w(()=>i.value?i.value.width!==0||i.value.height!==0:!1),{alt_q:a}=Xt();return W(a,o=>{o&&s.data.savedPositions.push({x:n.globalX,y:n.globalY,xPercent:n.localXPercent,yPercent:n.localYPercent})}),(o,h)=>_(n).inSlide?(m(),y("div",{key:0,class:"absolute bg-[rgba(0,0,0,0.8)] text-white p-2 rounded-md text-sm pointer-events-none z-[1000] font-mono",style:K({left:`${_(n).globalX+10}px`,top:`${_(n).globalY+10}px`})},[r.value?(m(),y(F,{key:0},[Q(" width: "+P(i.value.width)+"px ("+P(i.value.widthPercent)+"%) ",1),h[0]||(h[0]=p("br",null,null,-1)),Q(" height: "+P(i.value.height)+"px ("+P(i.value.heightPercent)+"%) ",1)],64)):(m(),y(F,{key:1},[Q(" px "+P(Math.round(_(n).localX))+" "+P(Math.round(_(n).localY))+" ",1),h[1]||(h[1]=p("br",null,null,-1)),Q(" % "+P(_(n).localXPercent)+" "+P(_(n).localYPercent),1)],64))],4)):T("v-if",!0)}}),ze=ee("slidev-show-timeline-editor",!1,{listenToStorageChanges:!1}),B=ee("slidev-timeline-editor-vertical",!1,{listenToStorageChanges:!1}),Ce=ee("slidev-timeline-editor-width",typeof window<"u"?window.innerWidth*.3:400,{listenToStorageChanges:!1}),Pe=ee("slidev-timeline-editor-height",typeof window<"u"?window.innerHeight*.3:250,{listenToStorageChanges:!1});k(0);const Ms={key:1,class:"complex-container"},zs={class:"expand-btn"},Ts={key:0,class:"i-carbon:chevron-down text-xs"},Ls={key:1,class:"i-carbon:chevron-right text-xs"},As={key:0,class:"object-name"},Ds={class:"object-type"},Os={class:"object-size"},js={key:1,class:"object-preview"},Is={key:0,class:"complex-content"},Ns={key:0,class:"array-items"},Fs={class:"array-index"},Vs={key:1,class:"object-properties"},Rs={class:"property-line"},Ks={class:"property-key"},Ys=V({__name:"ObjectViewer",props:{data:{},depth:{},name:{}},setup(e){Y();const n=e.depth??0,s=k(n<2);function i(){s.value=!s.value}function r(d){return d!==null&&typeof d=="object"&&!Array.isArray(d)}function a(d){return Array.isArray(d)}function o(d){return!r(d)&&!a(d)}function h(d){return d===null?"null":d===void 0?"undefined":typeof d=="boolean"?"boolean":typeof d=="number"?"number":typeof d=="string"?"string":a(d)?"array":r(d)?"object":"unknown"}function v(d){return d===null?"null":d===void 0?"undefined":typeof d=="boolean"?d?"true":"false":typeof d=="number"?String(d):typeof d=="string"?d:String(d)}function u(d){return Object.keys(d)}function f(d){return a(d)?d.length:r(d)?Object.keys(d).length:0}return(d,l)=>{const c=Ht("ObjectViewer",!0);return m(),y("div",{class:"object-viewer",style:K({paddingLeft:_(n)>0?"12px":"0"})},[o(e.data)?(m(),y("div",{key:0,class:R(["primitive-value",`type-${h(e.data)}`])},P(v(e.data)),3)):(m(),y("div",Ms,[p("div",{class:"complex-header",onClick:i},[p("button",zs,[s.value?(m(),y("div",Ts)):(m(),y("div",Ls))]),e.name?(m(),y("span",As,P(e.name),1)):T("v-if",!0),p("span",Ds,P(a(e.data)?"Array":"Object"),1),p("span",Os," ("+P(f(e.data))+") ",1),s.value?T("v-if",!0):(m(),y("div",js,P(a(e.data)?"[...]":"{...}"),1))]),s.value?(m(),y("div",Is,[a(e.data)?(m(),y("div",Ns,[(m(!0),y(F,null,ue(e.data,(g,x)=>(m(),y("div",{key:x,class:"array-item"},[p("span",Fs,"["+P(x)+"]",1),q(c,{data:g,depth:_(n)+1},null,8,["data","depth"])]))),128))])):(m(),y("div",Vs,[(m(!0),y(F,null,ue(u(e.data),g=>(m(),y("div",{key:g,class:"object-property"},[p("div",Rs,[p("span",Ks,P(g)+":",1),q(c,{data:e.data[g],depth:_(n)+1},null,8,["data","depth"])])]))),128))]))])):T("v-if",!0)]))],4)}}}),Bs=de(Ys,[["__scopeId","data-v-29eb889d"]]),Xs={key:0,class:"edit-hint"},Hs={class:"edit-mode"},Us=V({__name:"EditableValue",props:{value:{},path:{},stepIndex:{},propertyName:{}},emits:["update"],setup(e,{emit:t}){Y();const n=e,s=t,i=k(!1),r=k(""),a=k(),o=w(()=>n.value===null?"null":n.value===void 0?"undefined":typeof n.value=="boolean"?"boolean":typeof n.value=="number"?"number":typeof n.value=="string"?"string":Array.isArray(n.value)?"array":typeof n.value=="object"?"object":"unknown"),h=w(()=>n.value===null?"null":n.value===void 0?"undefined":typeof n.value=="boolean"?n.value?"true":"false":typeof n.value=="number"?String(n.value):typeof n.value=="string"?`"${n.value}"`:Array.isArray(n.value)?`[${n.value.length} items]`:typeof n.value=="object"?`{${Object.keys(n.value).length} keys}`:String(n.value)),v=w(()=>["string","number","boolean"].includes(o.value));function u(){v.value&&(i.value=!0,o.value==="string"?r.value=n.value||"":r.value=String(n.value),setTimeout(()=>{a.value?.focus(),a.value?.select()},0))}function f(){i.value=!1,r.value=""}function d(){if(!v.value)return;let g;try{switch(o.value){case"string":g=r.value.replace(/^"(.*)"$/,"$1");break;case"number":if(g=parseFloat(r.value),isNaN(g)){console.warn("Invalid number:",r.value);return}break;case"boolean":if(r.value.toLowerCase()==="true")g=!0;else if(r.value.toLowerCase()==="false")g=!1;else{console.warn("Invalid boolean:",r.value);return}break;default:return}g!==n.value&&s("update",n.path,n.value,g,n.stepIndex,n.propertyName),i.value=!1,r.value=""}catch(x){console.error("Error parsing value:",x)}}function l(g){g.key==="Enter"?(g.preventDefault(),d()):g.key==="Escape"&&(g.preventDefault(),f())}function c(g){i.value&&!g.target?.closest(".editable-value")&&d()}return W(i,async g=>{await new Promise(x=>setTimeout(x,0)),g?document.addEventListener("click",c):document.removeEventListener("click",c)}),(g,x)=>(m(),y("div",{class:R(["editable-value",{"is-editable":v.value}])},[T(" –†–µ–∂–∏–º –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è "),i.value?(m(),y(F,{key:1},[T(" –†–µ–∂–∏–º —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è "),p("div",Hs,[Ut(p("input",{ref_key:"inputRef",ref:a,"onUpdate:modelValue":x[0]||(x[0]=C=>r.value=C),class:R(["edit-input",`type-${o.value}`]),onKeydown:l,onBlur:d},null,34),[[Gt,r.value]]),p("div",{class:"edit-actions"},[p("button",{onClick:d,class:"action-btn save",title:"–°–æ—Ö—Ä–∞–Ω–∏—Ç—å (Enter)"},"‚úì"),p("button",{onClick:f,class:"action-btn cancel",title:"–û—Ç–º–µ–Ω–∏—Ç—å (Esc)"},"‚úó")])])],2112)):(m(),y("div",{key:0,class:R(["display-mode",`type-${o.value}`]),onClick:u},[Q(P(h.value)+" ",1),v.value?(m(),y("span",Xs,"‚úèÔ∏è")):T("v-if",!0)],2))],2))}}),Gs=de(Us,[["__scopeId","data-v-0522c536"]]);function qs(e,t,n,s){try{if(!e)return console.warn("File content is empty, cannot find location"),null;const i=e.split(`
`);let r=-1,a=0;for(let u=0;u<i.length;u++){const f=i[u];if(f.trim()==="timeline:"){r=u,a=f.indexOf("timeline:");break}}if(r===-1)return console.warn("Timeline not found in file"),null;let o=-1,h=-1,v=a+2;for(let u=r+1;u<i.length;u++){const f=i[u],d=f.trim();if(!d)continue;const l=f.length-f.trimStart().length;if(l<=a&&d)break;if(d.startsWith("-")&&l===a+2&&(o++,o===n)){h=u,v=l+2;break}}if(h===-1)return console.warn(`Step ${n} not found in timeline`),null;for(let u=h+1;u<i.length;u++){const f=i[u],d=f.trim();if(!d)continue;if(f.length-f.trimStart().length<v&&d)break;if(d.startsWith(`${s}:`)){const c=f.indexOf(":");return{filePath:"",lineNumber:u+1,columnStart:c+1,columnEnd:f.length,content:f}}}return console.warn(`Property ${s} not found in step ${n}`),null}catch(i){return console.error("Error finding value location:",i),null}}function At(e,t,n){const s=e.indexOf(":");if(s===-1)return console.warn("No colon found in line:",e),e;const i=e.substring(0,s+1),r=Ae(t);return`${i} ${r}`}function Ae(e){return e===null?"null":e===void 0?"undefined":typeof e=="boolean"?e?"true":"false":typeof e=="number"?String(e):typeof e=="string"?e.includes(":")||e.includes('"')||e.includes("'")||e.includes(`
`)?`"${e.replace(/"/g,'\\"')}"`:e:Array.isArray(e)?`[${e.map(Ae).join(", ")}]`:typeof e=="object"?JSON.stringify(e):String(e)}function Ws(e){const{path:t,stepIndex:n,propertyName:s,oldValue:i,newValue:r,location:a}=e;let o=`üîÑ –ò–∑–º–µ–Ω–µ–Ω–∏–µ –≤ timeline:
`;return o+=`   üìç –ü—É—Ç—å: ${t}
`,o+=`   üìä –®–∞–≥: ${n+1}
`,o+=`   üè∑Ô∏è  –°–≤–æ–π—Å—Ç–≤–æ: ${s}
`,o+=`   üì§ –ë—ã–ª–æ: ${Ae(i)}
`,o+=`   üì• –°—Ç–∞–ª–æ: ${Ae(r)}
`,a&&(o+=`   üìÑ –§–∞–π–ª: —Å—Ç—Ä–æ–∫–∞ ${a.lineNumber}
`,o+=`   üìù –¢–µ–∫—É—â–∞—è —Å—Ç—Ä–æ–∫–∞: "${a.content}"
`,o+=`   ‚úèÔ∏è  –ù–æ–≤–∞—è —Å—Ç—Ä–æ–∫–∞: "${At(a.content,r)}"
`),o}async function Js(e,t){try{console.log("üîÑ –û–±—Ä–∞–±–æ—Ç–∫–∞ –∏–∑–º–µ–Ω–µ–Ω–∏—è —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º Slidev –¥–∞–Ω–Ω—ã—Ö:",{change:e,filepath:t.filepath,slideStart:t.start}),e.slideInfo={filePath:t.filepath,slideStartLine:t.start};const n=await Zs(t.filepath);if(!n){console.warn("‚ö†Ô∏è  –ù–µ —É–¥–∞–ª–æ—Å—å –ø–æ–ª—É—á–∏—Ç—å —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ —Ñ–∞–π–ª–∞");return}const s=qs(n,e.path,e.stepIndex,e.propertyName);s&&(s.filePath=t.filepath,e.location=s);const i=Ws(e);console.log(i),console.group("üîß –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è"),console.log("–ò–∑–º–µ–Ω–µ–Ω–∏–µ:",e),console.log("–ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ —Å–ª–∞–π–¥–µ:",e.slideInfo),console.log("–ú–µ—Å—Ç–æ–ø–æ–ª–æ–∂–µ–Ω–∏–µ:",s),console.log("–ù–æ–≤–∞—è —Å—Ç—Ä–æ–∫–∞:",s?At(s.content,e.newValue,e.propertyName):"N/A"),console.groupEnd()}catch(n){console.error("Error simulating file update with Slidev:",n)}}async function Zs(e){try{return console.warn(`‚ö†Ô∏è  –ü–æ–ª—É—á–µ–Ω–∏–µ —Å–æ–¥–µ—Ä–∂–∏–º–æ–≥–æ —Ñ–∞–π–ª–∞ ${e} –Ω–µ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ`),console.warn("–í —Ä–µ–∞–ª—å–Ω–æ–π —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏ –∑–¥–µ—Å—å –±—É–¥–µ—Ç —á—Ç–µ–Ω–∏–µ —Ñ–∞–π–ª–∞ —Å –¥–∏—Å–∫–∞"),`---
layout: center
timeline:
  - block1: 'outline outline-2 outline-[#CCCCCC88]'
    block2: '-blur-hidden fx'
    block3: '-blur-hidden outline-[#00000088]'
    opacity: 0.5
    scale: 1.0
  - block1: 'outline-[#00000088]'
    block2: 'outline outline-2 outline-[#CCCCCC88]'
    opacity: 0.8
    scale: 1.2
---

# –°–ª–∞–π–¥ 1

–°–æ–¥–µ—Ä–∂–∏–º–æ–µ –ø–µ—Ä–≤–æ–≥–æ —Å–ª–∞–π–¥–∞

---

# –°–ª–∞–π–¥ 2

–°–æ–¥–µ—Ä–∂–∏–º–æ–µ –≤—Ç–æ—Ä–æ–≥–æ —Å–ª–∞–π–¥–∞

---

# –°–ª–∞–π–¥ 3

–°–æ–¥–µ—Ä–∂–∏–º–æ–µ —Ç—Ä–µ—Ç—å–µ–≥–æ —Å–ª–∞–π–¥–∞`}catch(t){return console.error("Error getting file content:",t),""}}const Qs={class:"property-header"},ei={class:"property-name"},ti={key:0,class:"change-indicator"},ni={class:"property-content"},si=V({__name:"PropertyDiff",props:{name:{},value:{},prevValue:{},showDiff:{type:Boolean},stepIndex:{},path:{},slideMeta:{}},emits:["update"],setup(e,{emit:t}){Y();const n=e,s=t,i=w(()=>n.prevValue===void 0?!0:JSON.stringify(n.value)!==JSON.stringify(n.prevValue)),r=w(()=>n.prevValue===void 0?"new":n.value===void 0?"removed":"modified");function a(h){return typeof h!="object"||h===null}async function o(h,v,u,f,d){await Js({path:h,stepIndex:f,propertyName:d,oldValue:v,newValue:u},n.slideMeta),s("update",h,v,u,f,d)}return(h,v)=>(m(),y("div",{class:R(["property-diff",{"is-changed":i.value&&e.showDiff,[`change-${r.value}`]:e.showDiff}])},[p("div",Qs,[p("span",ei,P(e.name),1),i.value&&e.showDiff?(m(),y("span",ti,P(r.value==="new"?"‚ú®":r.value==="removed"?"‚ùå":"üìù"),1)):T("v-if",!0)]),p("div",ni,[T(" –î–ª—è –ø—Ä–æ—Å—Ç—ã—Ö –∑–Ω–∞—á–µ–Ω–∏–π –∏—Å–ø–æ–ª—å–∑—É–µ–º EditableValue "),a(e.value)?(m(),ae(Gs,{key:0,value:e.value,path:e.path,"step-index":e.stepIndex,"property-name":e.name,onUpdate:o},null,8,["value","path","step-index","property-name"])):(m(),y(F,{key:1},[T(" –î–ª—è —Å–ª–æ–∂–Ω—ã—Ö –æ–±—ä–µ–∫—Ç–æ–≤ –∏—Å–ø–æ–ª—å–∑—É–µ–º ObjectViewer "),q(Bs,{data:e.value,depth:0},null,8,["data"])],2112))]),T(" –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –ø—Ä–µ–¥—ã–¥—É—â–µ–µ –∑–Ω–∞—á–µ–Ω–∏–µ –µ—Å–ª–∏ –µ—Å—Ç—å –∏–∑–º–µ–Ω–µ–Ω–∏–µ "),T(` <div v-if="showDiff && hasChanged && changeType === 'modified'" class="previous-value">\r
      <div class="previous-label">–ë—ã–ª–æ:</div>\r
      <ObjectViewer :data="prevValue" :depth="0" />\r
    </div> `)],2))}}),ii=de(si,[["__scopeId","data-v-93987a0d"]]),ri={class:"flex pb-2 text-xl -mt-1 items-center"},oi={class:"relative overflow-auto rounded bg-[#1a1a1a] p-2"},ai={key:0,class:"text-white/50 text-center py-8 text-sm"},li={key:1,class:"flex flex-col gap-2"},ci={class:"bg-blue-500/20 rounded p-2 border border-blue-500/50"},ui={class:"text-white font-bold text-lg font-mono"},di={class:"flex flex-col gap-1"},hi=["onClick"],fi={class:"step-number"},vi={class:"step-title"},pi={key:0,class:"text-xs opacity-70"},mi={class:"changes-badge"},gi=["onClick"],yi={key:0,class:"i-carbon:chevron-up"},_i={key:1,class:"i-carbon:chevron-down"},wi={key:0,class:"step-content"},bi=["onClick"],xi={class:"text-xs text-white/50"},Si=V({__name:"SideTimelineEditor",props:{resize:{type:Boolean}},setup(e){Y();const t=e,{clicks:n,currentSlideRoute:s,go:i}=fe(),r=w(()=>{const S=s.value.meta?.slide,$={filepath:S?.filepath||"slides.md",start:S?.start||0};return console.log("üîç –î–∞–Ω–Ω—ã–µ —Å–ª–∞–π–¥–∞ –∏–∑ Slidev:",{slide:S,filepath:$.filepath,start:$.start,currentSlideRoute:s.value}),$}),a=w(()=>s.value.meta?.slide?.frontmatter||{}),o=w(()=>a.value.timeline??[]),h=w(()=>(a.value.timeline??[]).length>0),v=w(()=>{if(!h.value)return[];const S=new Set;return o.value.forEach($=>{Object.keys($).forEach(L=>{L.startsWith("$")||S.add(L)})}),Array.from(S).sort()}),u=w(()=>Math.min(n.value,o.value.length-1)),f=k(new Set);function d(S){f.value.has(S)?f.value.delete(S):f.value.add(S)}function l(S){return f.value.has(S)}function c(S){return v.value.filter($=>b(S,$)).length}function g(S){return c(S)>3}function x(S){S>=0&&S<o.value.length&&i(s.value.no,S,!0)}function C(S,$){return o.value[S]?.[$]}function D(S,$){return S===0?void 0:o.value[S-1]?.[$]}function b(S,$){if(S===0)return!0;const L=o.value[S]?.[$],z=o.value[S-1]?.[$];return typeof L=="object"&&typeof z=="object"?JSON.stringify(L)!==JSON.stringify(z):L!==void 0&&L!==z}function E(){ze.value=!1}function O(S,$,L,z,j){console.log("üîÑ –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å–≤–æ–π—Å—Ç–≤–∞ –≤ timeline:",{path:S,stepIndex:z,propertyName:j,oldValue:$,newValue:L})}const H=k(!1);function me(){H.value=!0}function se(S){B.value?Pe.value=Math.min(Math.max(150,S??Pe.value),window.innerHeight-200):Ce.value=Math.min(Math.max(300,S??Ce.value),window.innerWidth-200)}return t.resize&&(G("pointermove",S=>{H.value&&se(B.value?window.innerHeight-S.pageY:window.innerWidth-S.pageX)},{passive:!0}),G("pointerup",()=>{H.value=!1}),G("resize",()=>{se()})),(S,$)=>(m(),y(F,null,[e.resize?(m(),y("div",{key:0,class:R(["fixed bg-gray-400 select-none opacity-0 hover:opacity-10 z-dragging",_(B)?"left-0 right-0 w-full h-10px":"top-0 bottom-0 w-10px h-full"]),style:K({opacity:H.value?"0.3":void 0,bottom:_(B)?`${_(Pe)-5}px`:void 0,right:_(B)?void 0:`${_(Ce)-5}px`,cursor:_(B)?"row-resize":"col-resize"}),onPointerdown:me},null,38)):T("v-if",!0),p("div",{class:R(["shadow bg-main p-2 pt-4 grid grid-rows-[max-content_1fr] h-full overflow-hidden",e.resize?"border-l border-gray-400 border-opacity-20":""]),style:K(e.resize?{height:_(B)?`${_(Pe)}px`:void 0,width:_(B)?void 0:`${_(Ce)}px`}:{})},[p("div",ri,[$[5]||($[5]=p("span",{class:"text-2xl pt-1"}," Timeline ",-1)),$[6]||($[6]=p("div",{class:"flex-auto"},null,-1)),e.resize?(m(),y(F,{key:0},[_(B)?(m(),y("button",{key:0,title:"Dock to right",class:"slidev-icon-btn",onClick:$[0]||($[0]=L=>B.value=!1)},[...$[2]||($[2]=[p("div",{class:"i-carbon:open-panel-right"},null,-1)])])):(m(),y("button",{key:1,title:"Dock to bottom",class:"slidev-icon-btn",onClick:$[1]||($[1]=L=>B.value=!0)},[...$[3]||($[3]=[p("div",{class:"i-carbon:open-panel-bottom"},null,-1)])]))],64)):T("v-if",!0),p("button",{title:"Close",class:"slidev-icon-btn",onClick:E},[...$[4]||($[4]=[p("div",{class:"i-carbon:close"},null,-1)])])]),p("div",oi,[h.value?(m(),y("div",li,[p("div",ci,[p("div",ui,P(u.value+1)+" / "+P(o.value.length),1)]),p("div",di,[(m(!0),y(F,null,ue(o.value,(L,z)=>(m(),y("div",{key:z,class:R(["step-card",{"step-active":z===u.value,"step-past":z<u.value,"step-future":z>u.value}])},[p("div",{class:"step-header",onClick:j=>x(z)},[p("span",fi,P(z+1),1),p("span",vi,[Q(" –®–∞–≥ "+P(z+1)+" ",1),L.$clicksAlias?(m(),y("span",pi," ("+P(Array.isArray(L.$clicksAlias)?L.$clicksAlias.join(", "):L.$clicksAlias)+") ",1)):T("v-if",!0)]),$[8]||($[8]=p("div",{class:"flex-auto"},null,-1)),p("span",mi,P(c(z)),1),p("button",{class:"expand-btn",onClick:qt(j=>d(z),["stop"])},[l(z)?(m(),y("div",yi)):(m(),y("div",_i))],8,gi)],8,hi),!g(z)||l(z)?(m(),y("div",wi,[(m(!0),y(F,null,ue(v.value.filter(j=>b(z,j)),j=>(m(),ae(ii,{key:j,name:j,value:C(z,j),"prev-value":D(z,j),"show-diff":z>0,"step-index":z,path:`timeline.${z}.${j}`,"slide-meta":r.value,onUpdate:O},null,8,["name","value","prev-value","show-diff","step-index","path","slide-meta"]))),128))])):(m(),y("div",{key:1,class:"step-content-collapsed",onClick:j=>d(z)},[p("div",xi,P(c(z))+" –∏–∑–º–µ–Ω–µ–Ω–∏–π ‚Ä¢ –ö–ª–∏–∫ –¥–ª—è —Ä–∞—Å–∫—Ä—ã—Ç–∏—è ",1)],8,bi))],2))),128))])])):(m(),y("div",ai,[...$[7]||($[7]=[Q(" –ù–µ—Ç —Ç–∞–π–º–ª–∞–π–Ω–∞ –Ω–∞ —ç—Ç–æ–º —Å–ª–∞–π–¥–µ.",-1),p("br",null,null,-1),Q(" –î–æ–±–∞–≤—å—Ç–µ frontmatter —Å ",-1),p("code",{class:"text-blue-400"},"timeline",-1)])]))])],6)],64))}}),$i=de(Si,[["__scopeId","data-v-2b3b38d2"]]),Xe=[],be={async renamePart(e,t){return(await fetch("/__slides_parts_api/rename",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({oldSrc:e,newName:t})})).json()},async createPart(e,t){return(await fetch("/__slides_parts_api/create",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:e,position:t})})).json()},async deletePart(e){return(await fetch("/__slides_parts_api/delete",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({src:e})})).json()},async movePart(e,t){return(await fetch("/__slides_parts_api/move",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({src:e,direction:t})})).json()},async toggleHide(e){return(await fetch("/__slides_parts_api/toggle-hide",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({src:e})})).json()}},xe=ee("slidev-show-parts-manager",!1,{listenToStorageChanges:!1}),X=ee("slidev-parts-manager-vertical",!1,{listenToStorageChanges:!1}),Ee=ee("slidev-parts-manager-width",typeof window<"u"?window.innerWidth*.3:400,{listenToStorageChanges:!1}),Me=ee("slidev-parts-manager-height",typeof window<"u"?window.innerHeight*.4:300,{listenToStorageChanges:!1}),ki={class:"flex pb-2 text-xl -mt-1 items-center"},Ci={class:"relative overflow-y-auto rounded bg-[#1a1a1a] p-2"},Pi={key:0,class:"text-white/50 text-center py-8 text-sm"},Ei={key:1,class:"flex flex-col gap-1"},Mi={class:"part-info"},zi={class:"part-num"},Ti={class:"part-name"},Li={key:0,class:"hide-mark"},Ai={class:"part-actions"},Di=["onClick","disabled"],Oi=["onClick","disabled"],ji=["onClick","title"],Ii={key:0,class:"i-carbon:view"},Ni={key:1,class:"i-carbon:view-off"},Fi=["onClick"],Vi=["onClick"],Ri={key:2,class:"absolute inset-0 bg-black/60 rounded flex items-center justify-center"},Ki=V({__name:"SidePartsManager",props:{resize:{type:Boolean}},setup(e){Y();const t=e,n=k(!1);async function s(){const d=prompt("–í–≤–µ–¥–∏—Ç–µ –∏–º—è –Ω–æ–≤–æ–π —á–∞—Å—Ç–∏:");if(!d)return;const l=prompt("–í–≤–µ–¥–∏—Ç–µ –ø–æ–∑–∏—Ü–∏—é (–æ—Å—Ç–∞–≤—å—Ç–µ –ø—É—Å—Ç—ã–º –¥–ª—è –¥–æ–±–∞–≤–ª–µ–Ω–∏—è –≤ –∫–æ–Ω–µ—Ü):"),c=l?parseInt(l):void 0;n.value=!0;try{const g=await be.createPart(d,c);g.success||alert(`–û—à–∏–±–∫–∞: ${g.error}`)}catch(g){alert(`–û—à–∏–±–∫–∞ –ø—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏: ${g}`)}finally{n.value=!1}}async function i(d){const l=prompt(`–ù–æ–≤–æ–µ –∏–º—è –¥–ª—è "${d.name}":`,d.name);if(!(!l||l===d.name)){n.value=!0;try{const c=await be.renamePart(d.src,l);c.success||alert(`–û—à–∏–±–∫–∞: ${c.error}`)}catch(c){alert(`–û—à–∏–±–∫–∞ –ø—Ä–∏ –ø–µ—Ä–µ–∏–º–µ–Ω–æ–≤–∞–Ω–∏–∏: ${c}`)}finally{n.value=!1}}}async function r(d){if(confirm(`–í—ã —É–≤–µ—Ä–µ–Ω—ã, —á—Ç–æ —Ö–æ—Ç–∏—Ç–µ —É–¥–∞–ª–∏—Ç—å —á–∞—Å—Ç—å "${d.name}"?

–§–∞–π–ª: ${d.src}

–≠—Ç–æ –¥–µ–π—Å—Ç–≤–∏–µ –Ω–µ–æ–±—Ä–∞—Ç–∏–º–æ!`)){n.value=!0;try{const c=await be.deletePart(d.src);c.success||alert(`–û—à–∏–±–∫–∞: ${c.error}`)}catch(c){alert(`–û—à–∏–±–∫–∞ –ø—Ä–∏ —É–¥–∞–ª–µ–Ω–∏–∏: ${c}`)}finally{n.value=!1}}}async function a(d,l){n.value=!0;try{const c=await be.movePart(d.src,l);c.success||alert(`–û—à–∏–±–∫–∞: ${c.error}`)}catch(c){alert(`–û—à–∏–±–∫–∞ –ø—Ä–∏ –ø–µ—Ä–µ–º–µ—â–µ–Ω–∏–∏: ${c}`)}finally{n.value=!1}}async function o(d){n.value=!0;try{const l=await be.toggleHide(d.src);l.success||alert(`–û—à–∏–±–∫–∞: ${l.error}`)}catch(l){alert(`–û—à–∏–±–∫–∞ –ø—Ä–∏ –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–∏ –≤–∏–¥–∏–º–æ—Å—Ç–∏: ${l}`)}finally{n.value=!1}}function h(){xe.value=!1}const v=k(!1);function u(){v.value=!0}function f(d){X.value?Me.value=Math.min(Math.max(200,d??Me.value),window.innerHeight-200):Ee.value=Math.min(Math.max(300,d??Ee.value),window.innerWidth-200)}return t.resize&&(G("pointermove",d=>{v.value&&f(X.value?window.innerHeight-d.pageY:window.innerWidth-d.pageX)},{passive:!0}),G("pointerup",()=>{v.value=!1}),G("resize",()=>{f()})),(d,l)=>(m(),y(F,null,[e.resize?(m(),y("div",{key:0,class:R(["fixed bg-gray-400 select-none opacity-0 hover:opacity-10 z-dragging",_(X)?"left-0 right-0 w-full h-10px":"top-0 bottom-0 w-10px h-full"]),style:K({opacity:v.value?"0.3":void 0,bottom:_(X)?`${_(Me)-5}px`:void 0,right:_(X)?void 0:`${_(Ee)-5}px`,cursor:_(X)?"row-resize":"col-resize"}),onPointerdown:u},null,38)):T("v-if",!0),p("div",{class:R(["shadow bg-main p-2 pt-4 grid grid-rows-[max-content_1fr] h-full overflow-hidden",e.resize?"border-l border-gray-400 border-opacity-20":""]),style:K(e.resize?{height:_(X)?`${_(Me)}px`:void 0,width:_(X)?void 0:`${_(Ee)}px`}:{})},[p("div",ki,[l[6]||(l[6]=p("span",{class:"text-2xl pt-1"}," Parts ",-1)),l[7]||(l[7]=p("div",{class:"flex-auto"},null,-1)),e.resize?(m(),y(F,{key:0},[_(X)?(m(),y("button",{key:0,title:"Dock to right",class:"slidev-icon-btn",onClick:l[0]||(l[0]=c=>X.value=!1)},[...l[2]||(l[2]=[p("div",{class:"i-carbon:open-panel-right"},null,-1)])])):(m(),y("button",{key:1,title:"Dock to bottom",class:"slidev-icon-btn",onClick:l[1]||(l[1]=c=>X.value=!0)},[...l[3]||(l[3]=[p("div",{class:"i-carbon:open-panel-bottom"},null,-1)])]))],64)):T("v-if",!0),p("button",{title:"Create part",class:"slidev-icon-btn",onClick:s},[...l[4]||(l[4]=[p("div",{class:"i-carbon:add"},null,-1)])]),p("button",{title:"Close",class:"slidev-icon-btn",onClick:h},[...l[5]||(l[5]=[p("div",{class:"i-carbon:close"},null,-1)])])]),p("div",Ci,[_(Xe).length===0?(m(),y("div",Pi,[...l[8]||(l[8]=[Q(" –ù–µ—Ç —á–∞—Å—Ç–µ–π —Å–ª–∞–π–¥–æ–≤.",-1),p("br",null,null,-1),Q("–ù–∞–∂–º–∏—Ç–µ + —á—Ç–æ–±—ã —Å–æ–∑–¥–∞—Ç—å. ",-1)])])):(m(),y("div",Ei,[(m(!0),y(F,null,ue(_(Xe),c=>(m(),y("div",{key:c.position,class:R(["part-row",{"part-hidden":c.hidden}])},[p("div",Mi,[p("span",zi,P(c.position),1),p("span",Ti,[Q(P(c.name)+" ",1),c.hidden?(m(),y("span",Li,"‚¶ª")):T("v-if",!0)])]),p("div",Ai,[p("button",{class:"action",onClick:g=>a(c,"up"),disabled:c.position===1,title:"‚¨Ü"},[...l[9]||(l[9]=[p("div",{class:"i-carbon:arrow-up"},null,-1)])],8,Di),p("button",{class:"action",onClick:g=>a(c,"down"),disabled:c.position===_(Xe).length,title:"‚¨á"},[...l[10]||(l[10]=[p("div",{class:"i-carbon:arrow-down"},null,-1)])],8,Oi),p("button",{class:"action",onClick:g=>o(c),title:c.hidden?"–ü–æ–∫–∞–∑–∞—Ç—å":"–°–∫—Ä—ã—Ç—å"},[c.hidden?(m(),y("div",Ii)):(m(),y("div",Ni))],8,ji),p("button",{class:"action",onClick:g=>i(c),title:"–ü–µ—Ä–µ–∏–º–µ–Ω–æ–≤–∞—Ç—å"},[...l[11]||(l[11]=[p("div",{class:"i-carbon:edit"},null,-1)])],8,Fi),p("button",{class:"action action-danger",onClick:g=>r(c),title:"–£–¥–∞–ª–∏—Ç—å"},[...l[12]||(l[12]=[p("div",{class:"i-carbon:trash-can"},null,-1)])],8,Vi)])],2))),128))])),n.value?(m(),y("div",Ri,[...l[13]||(l[13]=[p("div",{class:"text-2xl animate-spin"},"‚è≥",-1)])])):T("v-if",!0)])],6)],64))}}),Yi=de(Ki,[["__scopeId","data-v-f9b2e590"]]),Bi={class:"bottom-20px right-20px absolute text-lg opacity-50 bg-black/50 px-3 py-1 rounded-full"},Xi={__name:"global-top",setup(e){Y();const{currentSlideNo:t,currentSlideRoute:n,total:s}=fe(),i=w(()=>n.value.meta?.slide?.frontmatter||{}),r=w(()=>!1),a=w(()=>xe.value||ze.value);function o(){const v=document.getElementById("page-root");v&&(a.value?(v.style.display="grid",(xe.value?X.value:B.value)?(v.style.gridTemplateColumns="",v.style.gridTemplateRows="1fr max-content"):(v.style.gridTemplateRows="",v.style.gridTemplateColumns="1fr max-content")):(v.style.display="",v.style.gridTemplateColumns="",v.style.gridTemplateRows=""))}W([xe,X,ze,B],()=>{o()});const h=k(!1);return Ze(async()=>{await mt();do await new Promise(v=>setTimeout(v,100));while(!document.getElementById("page-root"));o(),h.value=!0}),(v,u)=>{const f=Yi,d=$i,l=Es,c=Ps,g=Cs,x=ks,C=vs;return m(),y("div",{class:R(i.value.slideClass)},[(m(),ae(wt,{to:"#page-root",defer:"",disabled:!h.value},[_(xe)?(m(),ae(f,{key:0,resize:""})):T("v-if",!0),_(ze)?(m(),ae(d,{key:1,resize:""})):T("v-if",!0)],8,["disabled"])),r.value?(m(),ae(C,{key:0},{default:Wt(()=>[q(l),q(c),q(g),q(x)]),_:1})):T("v-if",!0),p("div",Bi,P(_(t))+" / "+P(_(s)),1),p("div",{class:R(_(gn)(["absolute pos-20 text-[2.5em] transition-all duration-500",i.value.topTitleClass]))},P(i.value.topTitle),3)],2)}}},Hi=V({__name:"GlslBackground",props:{stages:{}},setup(e){Y();const t=e,n=()=>({stages:_n(t.stages)}),s=k(null),i=k(null);let r=null,a=null,o=null;const h=async()=>{if(!r||!i.value)return;const f=n();a=new yn(r,i.value.width,i.value.height),await a.initialize(f)},v=async()=>{if(!i.value||!r||!s.value)return;const f=s.value.clientWidth,d=s.value.clientHeight;f===0||d===0||(i.value.width=f,i.value.height=d,r.viewport(0,0,f,d),a&&(a.destroy(),a=null),await h())},u=()=>{if(!(!r||!i.value)){if(i.value.width===0||i.value.height===0){o=requestAnimationFrame(u);return}if(r.clearColor(0,0,0,1),r.clear(r.COLOR_BUFFER_BIT),a){const f=n();a.render(f,void 0,{})}o=requestAnimationFrame(u)}};return Ze(async()=>{if(i.value){if(r=i.value.getContext("webgl"),!r){console.error("Unable to initialize WebGL");return}if(v(),i.value.width===0||i.value.height===0){console.error("Canvas has zero size after resize");return}window.addEventListener("resize",v),await h(),u()}}),Jt(()=>{window.removeEventListener("resize",v),o!==null&&cancelAnimationFrame(o),a&&a.destroy()}),W(()=>t.stages,async()=>{r&&(a&&(a.destroy(),a=null),await h())}),(f,d)=>(m(),y("div",{ref_key:"container",ref:s,class:"absolute inset-0 z-[-10] w-full h-full"},[p("canvas",{ref_key:"canvas",ref:i,id:"glsl-background"},null,512)],512))}}),Ui=`#ifdef GL_ES\r
precision highp float;\r
#endif\r
\r
// Original author: https://www.shadertoy.com/view/XlfGRj\r
\r
uniform float u_time;\r
uniform vec2 u_resolution;\r
uniform vec4 u_baseColor;\r
uniform float u_slideNumber;\r
#define PI 3.14159265359\r
\r
#define iterations 15\r
#define formuparam 0.57\r
\r
#define volsteps 20\r
#define stepsize 0.1\r
\r
#define zoom   0.800\r
#define tile   0.750\r
#define speed  0.0001 \r
\r
#define brightness 0.0017\r
#define darkmatter 0.600\r
#define distfading 0.660\r
#define saturation 0.850\r
\r
void main()\r
{\r
	//get coords and direction\r
	vec2 uv=gl_FragCoord.xy/u_resolution.xy-.5;\r
	uv.y*=u_resolution.y/u_resolution.x;\r
	vec3 dir=vec3(uv*zoom,1.);\r
	float time=u_time*speed+.25;\r
\r
  vec2 u_mouse = vec2(sin(u_slideNumber / 2.0) * 5.0, cos(u_slideNumber / 2.0) * 5.0);\r
\r
	//mouse rotation\r
	float a1=.5+u_mouse.x/u_resolution.x*2.;\r
	float a2=.8+u_mouse.y/u_resolution.y*2.;\r
	mat2 rot1=mat2(cos(a1),sin(a1),-sin(a1),cos(a1));\r
	mat2 rot2=mat2(cos(a2),sin(a2),-sin(a2),cos(a2));\r
	dir.xz*=rot1;\r
	dir.xy*=rot2;\r
	vec3 from=vec3(1.,.5,0.3);\r
	from+=vec3(time*2.,time,-2.);\r
	from.xz*=rot1;\r
	from.xy*=rot2;\r
	\r
	//volumetric rendering\r
	float s=0.1,fade=1.;\r
	vec3 v=vec3(0.);\r
	for (int r=0; r<volsteps; r++) {\r
		vec3 p=from+s*dir*.5;\r
		p = abs(vec3(tile)-mod(p,vec3(tile*2.))); // tiling fold\r
		float pa,a=pa=0.;\r
		for (int i=0; i<iterations; i++) { \r
			p=abs(p)/dot(p,p)-formuparam; // the magic formula\r
			a+=abs(length(p)-pa); // absolute sum of average change\r
			pa=length(p);\r
		}\r
		float dm=max(0.,darkmatter-a*a*.001); //dark matter\r
		a*=a*a; // add contrast\r
		if (r>6) fade*=1.-dm; // dark matter, don't render near\r
		//v+=vec3(dm,dm*.5,0.);\r
		v+=fade;\r
		v+=vec3(s,s*s,s*s*s*s)*a*brightness*fade; // coloring based on distance\r
		fade*=distfading; // distance fading\r
		s+=stepsize;\r
	}\r
	v=mix(vec3(length(v)),v,saturation); //color adjust\r
\r
	gl_FragColor = vec4(v*.01,1.);	\r
}`,Gi=`
#ifdef GL_ES
precision highp float;
#endif

uniform sampler2D u_inputTexture;
uniform vec2 u_resolution;
uniform float u_shading;

void main() {
    vec2 uv = gl_FragCoord.xy / u_resolution.xy;
    vec3 color = texture2D(u_inputTexture, uv).rgb;
    float shading = 1. - u_shading;
    gl_FragColor = vec4(color * shading, 1.0);
}
`,qi=V({__name:"global-bottom",setup(e){Y();const{currentSlideRoute:t,currentSlideNo:n}=fe(),s=w(()=>t.value.meta?.slide?.frontmatter||{}),i=k([0,0,0,1]),r=Ke(i,{duration:2e3,transition:Ye.easeOutSine}),a=Ke(n,{duration:2e3,transition:Ye.easeOutSine}),o=Ke(w(()=>s.value.shading?.4:.25),{duration:2e3,transition:Ye.easeOutSine}),h=w(()=>[{fragmentShader:Ui,uniforms:{u_baseColor:{type:"vec4",value:r.value},u_slideNumber:{type:"float",value:a.value}}},{fragmentShader:Gi,uniforms:{u_shading:{type:"float",value:o.value}}}]);function v(u){return new Promise(f=>setTimeout(f,u))}return W(n,async()=>{const u=`[data-slidev-no="${n.value}"] .slidev-layout`;for(;!document.querySelector(u);)await v(100);const f=document.querySelector(u),d=getComputedStyle(f).getPropertyValue("--v-color");i.value=d.replace("rgb(","").replace(")","").split(",").map(l=>Number(l)/255).concat(1)},{immediate:!0}),(u,f)=>(m(),y("div",{class:R(s.value.slideClass)},[q(Hi,{stages:h.value},null,8,["stages"])],2))}}),Wi=V({__name:"slide-bottom",setup(e){const t=Zt("root");function n(r,a){if(a===null||typeof a!="object")return a;(r===null||typeof r!="object")&&(r={});for(const o in a)Object.prototype.hasOwnProperty.call(a,o)&&(r[o]=n(r[o],a[o]));return r}let s=fe(),i=Y();if(i.$frontmatter.timeline){const r=w(()=>i.$frontmatter.timeline),a=w(()=>{let l=new Set(Object.keys(r.value[0]));return l.delete("$clicksAlias"),l.add("$stepsCount"),Array.from(l)});let o=w(()=>r.value.length);const h=w(()=>{const l=o.value,c=Array.from({length:l},()=>n({},r.value[0]));let g=0,x={};return r.value.forEach(C=>{let D=0,b=l;D=g++,C??={},C.$clicksAlias&&(Array.isArray(C.$clicksAlias)?C.$clicksAlias.forEach(E=>{x[E]=[D,b]}):x[C.$clicksAlias]=[D,b]);for(let E=D;E<b;E++)c[E]=n(c[E],C)}),{states:c,aliases:x}}),v=w(()=>h.value.aliases),u=w(()=>{const l=i.$page.value-s.currentSlideNo.value;return l===0?Math.min(s.clicks.value,o.value-1):l<0?(console.log("diff < 0",s.currentSlideNo.value,i.$page.value),o.value-1):0}),f=w(()=>h.value.states[u.value]),d=[a.value.map(l=>[l,w(()=>{const c=f.value?.[l];return c===void 0&&console.warn(`Key ${l} not found in ${f.value} ${u.value}`),c})]),Object.keys(v.value).map(l=>[l,w(()=>v.value[l][u.value])]),[["$stepsCount",w(()=>h.value.states.length)]]].flat();i.$clicksContext.timeline=ne(Object.fromEntries(d)),Ze(()=>{i.$clicksContext.register(t.value,i.$clicksContext.calculateSince(1,o.value-1))}),W(()=>[i.$clicksContext.total,i.$clicksContext.current],([l,c],[g,x])=>{l===0&&c===0&&(i.$clicksContext.register(t.value,i.$clicksContext.calculateSince(1,o.value-1)),setTimeout(()=>{i.$clicksContext.current=x},100))}),gt(()=>{i.$clicksContext.unregister(t.value)})}return(r,a)=>(m(),y("span",{ref_key:"root",ref:t},null,512))}}),ur={render:()=>[Qe(Xi)]},dr={render:()=>[Qe(qi)]},Ji={render:()=>[]},Zi={render:()=>[Qe(Wi)]},Qi=["data-slidev-no","lang"],er=V({__name:"SlideWrapper",props:{clicksContext:{type:Object,required:!0},renderContext:{type:String,default:"slide"},route:{type:Object,required:!0}},setup(e){const t=e,n=w(()=>t.route.meta?.slide?.frontmatter.zoom??1);oe(cn,t.route),oe(un,t.route.meta.slide.frontmatter),oe(dn,k(t.route.no)),oe(hn,k(t.renderContext)),oe(fn,Qt(t,"clicksContext")),oe(vn,n);const s=w(()=>n.value===1?void 0:{width:`${100/n.value}%`,height:`${100/n.value}%`,transformOrigin:"top left",transform:`scale(${n.value})`}),i=w(()=>({...s.value,"user-select":Ue.selectable?void 0:"none"}));return(r,a)=>(m(),y("div",{"data-slidev-no":t.route.no,class:R(_(pn)(e.route,["slide","presenter"].includes(t.renderContext)?"":"disable-view-transition")),style:K(i.value),lang:t.route.meta.slide.frontmatter.lang},[q(_(Zi)),(m(),ae(en(t.route.component))),q(_(Ji))],14,Qi))}}),hr=de(er,[["__scopeId","data-v-43bcea43"]]);export{dr as G,hr as S,lr as _,cr as a,wn as b,Jn as c,ze as d,ur as e,xe as s,ar as u};
