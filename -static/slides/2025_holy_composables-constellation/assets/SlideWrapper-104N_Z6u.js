import{r as $,A as x,U as _,a2 as Nt,Z as ee,aH as Ot,y as Ut,Q as ne,p as gt,L as q,d as U,f as y,i as M,o as m,aI as jt,G as Bt,P as yt,aJ as oe,k as B,g as v,j as Ye,F as O,E as Vt,aK as _t,aq as xt,aL as Xt,ap as H,b as ae,aM as bt,aN as Kt,ak as ce,t as C,e as W,V as Yt,ae as Q,a as Gt,n as j,ai as Ht,aj as Wt,av as qt,M as Ze,w as Jt,H as Zt,aO as Be,aP as Ve,am as Qt,h as Qe,af as en,aw as tn}from"./modules/vue-BRelu3v2.js";import{S as wt,a as fe,v as Ge,a3 as Xe,a4 as st,a2 as nn,a5 as sn,a6 as ve,a7 as rn,a8 as on,a9 as rt,K as it,V as ot,W as at,b as an,T as ln,aa as un,_ as de,ab as cn,ac as dn,ad as hn,ae as fn,af as vn,ag as pn,ah as mn}from"./index-Cc15j6SR.js";import{u as V}from"./slidev/context-DYFVWEvA.js";import{d as gn}from"./modules/unplugin-icons-C6rnUQFW.js";import{t as yn}from"./bundle-mjs-D6B6e0vX.js";function _n(e){return{info:$(wt(e)?.meta.slide??null),update:async()=>{}}}const xn={};function pi(e){function t(n){return xn[n]??=_n(n)}return{info:x({get(){return t(_(e)).info.value},set(n){t(_(e)).info.value=n}}),update:async(n,s)=>{const r=t(s??_(e)),i=await r.update(n);return i&&(r.info.value=i),i}}}var bn=Object.defineProperty,lt=Object.getOwnPropertySymbols,wn=Object.prototype.hasOwnProperty,Sn=Object.prototype.propertyIsEnumerable,ut=(e,t,n)=>t in e?bn(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,He=(e,t)=>{for(var n in t||(t={}))wn.call(t,n)&&ut(e,n,t[n]);if(lt)for(var n of lt(t))Sn.call(t,n)&&ut(e,n,t[n]);return e},En=()=>({emit(e,...t){for(let n=this.events[e]||[],s=0,r=n.length;s<r;s++)n[s](...t)},events:{},on(e,t){var n;return((n=this.events)[e]||(n[e]=[])).push(t),()=>{var s;this.events[e]=(s=this.events[e])==null?void 0:s.filter(r=>t!==r)}}});function Me(e,t){return e-t}function $n(e){return e<0?-1:1}function Re(e){return[Math.abs(e),$n(e)]}function St(){const e=()=>((1+Math.random())*65536|0).toString(16).substring(1);return`${e()+e()}-${e()}-${e()}-${e()}-${e()}${e()}${e()}`}var kn=2,te=kn;function Et(e,t){const n=document.createElementNS("http://www.w3.org/2000/svg","defs"),s=document.createElementNS("http://www.w3.org/2000/svg","marker"),r=document.createElementNS("http://www.w3.org/2000/svg","path");return r.setAttribute("fill",t),s.setAttribute("id",e),s.setAttribute("viewBox","0 -5 10 10"),s.setAttribute("refX","5"),s.setAttribute("refY","0"),s.setAttribute("markerWidth","4"),s.setAttribute("markerHeight","4"),s.setAttribute("orient","auto"),r.setAttribute("d","M0,-5L10,0L0,5"),s.appendChild(r),n.appendChild(s),n}function Cn(e,t){const n=e.x-t.x,s=e.y-t.y;return n*n+s*s}function Pn(e,t,n){let s=t.x,r=t.y,i=n.x-s,a=n.y-r;if(i!==0||a!==0){const o=((e.x-s)*i+(e.y-r)*a)/(i*i+a*a);o>1?(s=n.x,r=n.y):o>0&&(s+=i*o,r+=a*o)}return i=e.x-s,a=e.y-r,i*i+a*a}function Tn(e,t){let n=e[0];const s=[n];let r;for(let i=1,a=e.length;i<a;i++)r=e[i],Cn(r,n)>t&&(s.push(r),n=r);return n!==r&&r&&s.push(r),s}function We(e,t,n,s,r){let i=s,a=0;for(let o=t+1;o<n;o++){const u=Pn(e[o],e[t],e[n]);u>i&&(a=o,i=u)}i>s&&(a-t>1&&We(e,t,a,s,r),r.push(e[a]),n-a>1&&We(e,a,n,s,r))}function An(e,t){const n=e.length-1,s=[e[0]];return We(e,0,n,t,s),s.push(e[n]),s}function ct(e,t,n=!1){if(e.length<=2)return e;const s=t*t;return e=n?e:Tn(e,s),e=An(e,s),e}var pe=class{constructor(e){this.drauu=e,this.event=void 0,this.point=void 0,this.start=void 0,this.el=null}onSelected(e){}onUnselected(){}onStart(e){}onMove(e){return!1}onEnd(e){}get brush(){return this.drauu.brush}get shiftPressed(){return this.drauu.shiftPressed}get altPressed(){return this.drauu.altPressed}get svgElement(){return this.drauu.el}getMousePosition(e){var t,n,s,r;const i=this.drauu.el,a=(t=this.drauu.options.cssZoom)!=null?t:1,o=(n=this.drauu.options.coordinateScale)!=null?n:1,u=(s=this.drauu.options.offset)!=null?s:{x:0,y:0};if(this.drauu.options.coordinateTransform===!1){const p=this.drauu.el.getBoundingClientRect();return{x:(e.pageX/a-p.left+u.x)*o,y:(e.pageY/a-p.top+u.y)*o,pressure:e.pressure}}else{const p=this.drauu.svgPoint;p.x=e.clientX/a+u.x,p.y=e.clientY/a+u.y;const d=p.matrixTransform((r=i.getScreenCTM())==null?void 0:r.inverse());return{x:d.x*o,y:d.y*o,pressure:e.pressure}}}createElement(e,t){var n;const s=document.createElementNS("http://www.w3.org/2000/svg",e),r=t?He(He({},this.brush),t):this.brush;return s.setAttribute("fill",(n=r.fill)!=null?n:"transparent"),s.setAttribute("stroke",r.color),s.setAttribute("stroke-width",r.size.toString()),s.setAttribute("stroke-linecap","round"),r.dasharray&&s.setAttribute("stroke-dasharray",r.dasharray),s}attr(e,t){this.el.setAttribute(e,typeof t=="string"?t:t.toFixed(te))}_setEvent(e){this.event=e,this.point=this.getMousePosition(e)}_eventDown(e){return this._setEvent(e),this.start=this.point,this.onStart(this.point)}_eventMove(e){return this._setEvent(e),this.onMove(this.point)}_eventUp(e){return this._setEvent(e),this.onEnd(this.point)}},Mn=class ue extends pe{constructor(){super(...arguments),this.points=[],this.count=0}onStart(t){if(this.el=this.createElement("path",{fill:"transparent"}),this.points=[t],this.brush.arrowEnd){this.arrowId=St();const n=Et(this.arrowId,this.brush.color);this.el.appendChild(n)}return this.el}onMove(t){return this.el||this.onStart(t),this.points[this.points.length-1]!==t&&(this.points.push(t),this.count+=1),this.count>5&&(this.points=ct(this.points,1,!0),this.count=0),this.attr("d",ue.toSvgData(this.points)),!0}onEnd(){const t=this.el;if(this.el=null,!t)return!1;if(t.setAttribute("d",ue.toSvgData(ct(this.points,1,!0))),!t.getTotalLength()){const{x:n,y:s}=this.points[0],r=this.brush.size/2;t.setAttribute("d",`M ${n-r} ${s} a ${r},${r} 0 1,0 ${r*2},0 a ${r},${r} 0 1,0 ${-r*2},0`),t.setAttribute("fill",this.brush.color),t.setAttribute("stroke-width","0")}return!0}static line(t,n){const s=n.x-t.x,r=n.y-t.y;return{length:Math.sqrt(s**2+r**2),angle:Math.atan2(r,s)}}static controlPoint(t,n,s,r){const i=n||t,a=s||t,o=.2,u=ue.line(i,a),p=u.angle+(r?Math.PI:0),d=u.length*o,f=t.x+Math.cos(p)*d,h=t.y+Math.sin(p)*d;return{x:f,y:h}}static bezierCommand(t,n,s){const r=ue.controlPoint(s[n-1],s[n-2],t),i=ue.controlPoint(t,s[n-1],s[n+1],!0);return`C ${r.x.toFixed(te)},${r.y.toFixed(te)} ${i.x.toFixed(te)},${i.y.toFixed(te)} ${t.x.toFixed(te)},${t.y.toFixed(te)}`}static toSvgData(t){return t.reduce((n,s,r,i)=>r===0?`M ${s.x.toFixed(te)},${s.y.toFixed(te)}`:`${n} ${ue.bezierCommand(s,r,i)}`,"")}},Rn=class extends pe{onStart(e){return this.el=this.createElement("ellipse"),this.attr("cx",e.x),this.attr("cy",e.y),this.el}onMove(e){if(!this.el||!this.start)return!1;let[t,n]=Re(e.x-this.start.x),[s,r]=Re(e.y-this.start.y);if(this.shiftPressed){const i=Math.min(t,s);t=i,s=i}if(this.altPressed)this.attr("cx",this.start.x),this.attr("cy",this.start.y),this.attr("rx",t),this.attr("ry",s);else{const[i,a]=[this.start.x,this.start.x+t*n].sort(Me),[o,u]=[this.start.y,this.start.y+s*r].sort(Me);this.attr("cx",(i+a)/2),this.attr("cy",(o+u)/2),this.attr("rx",(a-i)/2),this.attr("ry",(u-o)/2)}return!0}onEnd(){const e=this.el;if(this.el=null,!e)return!1;try{if(!e.getTotalLength())return!1}catch{return!1}return!0}},Ln=class extends pe{constructor(){super(...arguments),this.pathSubFactor=20,this.pathFragments=[],this._erased=[]}onSelected(e){const t=(n,s)=>{if(n&&n.length)for(let r=0;r<n.length;r++){const i=n[r];if(i.getTotalLength){const a=i.getTotalLength();for(let o=0;o<this.pathSubFactor;o++){const u=i.getPointAtLength(a*o/this.pathSubFactor),p=i.getPointAtLength(a*(o+1)/this.pathSubFactor);this.pathFragments.push({x1:u.x,x2:p.x,y1:u.y,y2:p.y,segment:o,element:s||i})}}else i.children&&t(i.children,i)}};e&&t(e.children)}onUnselected(){this.pathFragments=[]}onStart(e){this.svgPointPrevious=this.svgElement.createSVGPoint(),this.svgPointPrevious.x=e.x,this.svgPointPrevious.y=e.y}onMove(e){this.svgPointCurrent=this.svgElement.createSVGPoint(),this.svgPointCurrent.x=e.x,this.svgPointCurrent.y=e.y;const t=this.checkAndEraseElement();return this.svgPointPrevious=this.svgPointCurrent,t}onEnd(){this.svgPointPrevious=void 0,this.svgPointCurrent=void 0;const e=this._erased;return this._erased=[],{undo:()=>e.forEach(t=>this.drauu._restoreNode(t)),redo:()=>e.forEach(t=>this.drauu._removeNode(t))}}checkAndEraseElement(){if(this.pathFragments.length)for(let e=0;e<this.pathFragments.length;e++){const t=this.pathFragments[e];if(this.svgPointPrevious&&this.svgPointCurrent){const n={x1:this.svgPointPrevious.x,x2:this.svgPointCurrent.x,y1:this.svgPointPrevious.y,y2:this.svgPointCurrent.y};this.lineLineIntersect(t,n)&&(this.drauu._removeNode(t.element),this._erased.push(t.element))}}return this._erased.length&&(this.pathFragments=this.pathFragments.filter(e=>!this._erased.includes(e.element))),this._erased.length>0}lineLineIntersect(e,t){const n=e.x1,s=e.x2,r=t.x1,i=t.x2,a=e.y1,o=e.y2,u=t.y1,p=t.y2,d=(n-s)*(u-p)-(a-o)*(r-i),f=(n*o-a*s)*(r-i)-(n-s)*(r*p-u*i),h=(n*o-a*s)*(u-p)-(a-o)*(r*p-u*i),l=(c,g,w)=>c>=g&&c<=w?!0:c>=w&&c<=g;if(d===0)return!1;{const c={x:f/d,y:h/d};return l(c.x,n,s)&&l(c.y,a,o)&&l(c.x,r,i)&&l(c.y,u,p)}}},Dn=class extends pe{onStart(e){if(this.el=this.createElement("line",{fill:"transparent"}),this.attr("x1",e.x),this.attr("y1",e.y),this.attr("x2",e.x),this.attr("y2",e.y),this.brush.arrowEnd){const t=St(),n=document.createElementNS("http://www.w3.org/2000/svg","g");return n.append(Et(t,this.brush.color)),n.append(this.el),this.attr("marker-end",`url(#${t})`),n}return this.el}onMove(e){if(!this.el)return!1;let{x:t,y:n}=e;if(this.shiftPressed){const s=e.x-this.start.x,r=e.y-this.start.y;if(r!==0){let i=s/r;i=Math.round(i),Math.abs(i)<=1?(t=this.start.x+r*i,n=this.start.y+r):(t=this.start.x+s,n=this.start.y)}}return this.altPressed?(this.attr("x1",this.start.x*2-t),this.attr("y1",this.start.y*2-n),this.attr("x2",t),this.attr("y2",n)):(this.attr("x1",this.start.x),this.attr("y1",this.start.y),this.attr("x2",t),this.attr("y2",n)),!0}onEnd(){const e=this.el;if(this.el=null,!e)return!1;try{if(e.getTotalLength()<5)return!1}catch{return!1}return!0}},Fn=class extends pe{onStart(e){return this.el=this.createElement("rect"),this.brush.cornerRadius&&(this.attr("rx",this.brush.cornerRadius),this.attr("ry",this.brush.cornerRadius)),this.attr("x",e.x),this.attr("y",e.y),this.el}onMove(e){if(!this.el||!this.start)return!1;let[t,n]=Re(e.x-this.start.x),[s,r]=Re(e.y-this.start.y);if(this.shiftPressed){const i=Math.min(t,s);t=i,s=i}if(this.altPressed)this.attr("x",this.start.x-t),this.attr("y",this.start.y-s),this.attr("width",t*2),this.attr("height",s*2);else{const[i,a]=[this.start.x,this.start.x+t*n].sort(Me),[o,u]=[this.start.y,this.start.y+s*r].sort(Me);this.attr("x",i),this.attr("y",o),this.attr("width",a-i),this.attr("height",u-o)}return!0}onEnd(){const e=this.el;if(this.el=null,!e)return!1;try{if(!e.getTotalLength())return!1}catch{return!1}return!0}};function dt(e,t,n,s=r=>r){return e*s(.5-t*(.5-n))}function zn(e){return[-e[0],-e[1]]}function Z(e,t){return[e[0]+t[0],e[1]+t[1]]}function G(e,t){return[e[0]-t[0],e[1]-t[1]]}function J(e,t){return[e[0]*t,e[1]*t]}function In(e,t){return[e[0]/t,e[1]/t]}function ye(e){return[e[1],-e[0]]}function ht(e,t){return e[0]*t[0]+e[1]*t[1]}function Nn(e,t){return e[0]===t[0]&&e[1]===t[1]}function On(e){return Math.hypot(e[0],e[1])}function Un(e){return e[0]*e[0]+e[1]*e[1]}function ft(e,t){return Un(G(e,t))}function $t(e){return In(e,On(e))}function jn(e,t){return Math.hypot(e[1]-t[1],e[0]-t[0])}function _e(e,t,n){let s=Math.sin(n),r=Math.cos(n),i=e[0]-t[0],a=e[1]-t[1],o=i*r-a*s,u=i*s+a*r;return[o+t[0],u+t[1]]}function qe(e,t,n){return Z(e,J(G(t,e),n))}function vt(e,t,n){return Z(e,J(t,n))}var{min:he,PI:Bn}=Math,pt=.275,xe=Bn+1e-4;function Vn(e,t={}){let{size:n=16,smoothing:s=.5,thinning:r=.5,simulatePressure:i=!0,easing:a=T=>T,start:o={},end:u={},last:p=!1}=t,{cap:d=!0,easing:f=T=>T*(2-T)}=o,{cap:h=!0,easing:l=T=>--T*T*T+1}=u;if(e.length===0||n<=0)return[];let c=e[e.length-1].runningLength,g=o.taper===!1?0:o.taper===!0?Math.max(n,c):o.taper,w=u.taper===!1?0:u.taper===!0?Math.max(n,c):u.taper,k=Math.pow(n*s,2),D=[],b=[],P=e.slice(0,10).reduce((T,N)=>{let L=N.pressure;if(i){let I=he(1,N.distance/n),Oe=he(1,1-I);L=he(1,T+(Oe-T)*(I*pt))}return(T+L)/2},e[0].pressure),F=dt(n,r,e[e.length-1].pressure,a),Y,me=e[0].vector,se=e[0].point,S=se,E=se,R=S,A=!1;for(let T=0;T<e.length;T++){let{pressure:N}=e[T],{point:L,vector:I,distance:Oe,runningLength:ge}=e[T];if(T<e.length-1&&c-ge<3)continue;if(r){if(i){let ie=he(1,Oe/n),je=he(1,1-ie);N=he(1,P+(je-P)*(ie*pt))}F=dt(n,r,N,a)}else F=n/2;Y===void 0&&(Y=F);let Ft=ge<g?f(ge/g):1,zt=c-ge<w?l((c-ge)/w):1;F=Math.max(.01,F*Math.min(Ft,zt));let et=(T<e.length-1?e[T+1]:e[T]).vector,Ue=T<e.length-1?ht(I,et):1,It=ht(I,me)<0&&!A,tt=Ue!==null&&Ue<0;if(It||tt){let ie=J(ye(me),F);for(let je=1/13,$e=0;$e<=1;$e+=je)E=_e(G(L,ie),L,xe*$e),D.push(E),R=_e(Z(L,ie),L,xe*-$e),b.push(R);se=E,S=R,tt&&(A=!0);continue}if(A=!1,T===e.length-1){let ie=J(ye(I),F);D.push(G(L,ie)),b.push(Z(L,ie));continue}let nt=J(ye(qe(et,I,Ue)),F);E=G(L,nt),(T<=1||ft(se,E)>k)&&(D.push(E),se=E),R=Z(L,nt),(T<=1||ft(S,R)>k)&&(b.push(R),S=R),P=N,me=I}let z=e[0].point.slice(0,2),re=e.length>1?e[e.length-1].point.slice(0,2):Z(e[0].point,[1,1]),Ne=[],Ee=[];if(e.length===1){if(!(g||w)||p){let T=vt(z,$t(ye(G(z,re))),-(Y||F)),N=[];for(let L=1/13,I=L;I<=1;I+=L)N.push(_e(T,z,xe*2*I));return N}}else{if(!(g||w&&e.length===1))if(d)for(let N=1/13,L=N;L<=1;L+=N){let I=_e(b[0],z,xe*L);Ne.push(I)}else{let N=G(D[0],b[0]),L=J(N,.5),I=J(N,.51);Ne.push(G(z,L),G(z,I),Z(z,I),Z(z,L))}let T=ye(zn(e[e.length-1].vector));if(w||g&&e.length===1)Ee.push(re);else if(h){let N=vt(re,T,F);for(let L=1/29,I=L;I<1;I+=L)Ee.push(_e(N,re,xe*3*I))}else Ee.push(Z(re,J(T,F)),Z(re,J(T,F*.99)),G(re,J(T,F*.99)),G(re,J(T,F)))}return D.concat(Ee,b.reverse(),Ne)}function Xn(e,t={}){var n;let{streamline:s=.5,size:r=16,last:i=!1}=t;if(e.length===0)return[];let a=.15+(1-s)*.85,o=Array.isArray(e[0])?e:e.map(({x:l,y:c,pressure:g=.5})=>[l,c,g]);if(o.length===2){let l=o[1];o=o.slice(0,-1);for(let c=1;c<5;c++)o.push(qe(o[0],l,c/4))}o.length===1&&(o=[...o,[...Z(o[0],[1,1]),...o[0].slice(2)]]);let u=[{point:[o[0][0],o[0][1]],pressure:o[0][2]>=0?o[0][2]:.25,vector:[1,1],distance:0,runningLength:0}],p=!1,d=0,f=u[0],h=o.length-1;for(let l=1;l<o.length;l++){let c=i&&l===h?o[l].slice(0,2):qe(f.point,o[l],a);if(Nn(f.point,c))continue;let g=jn(c,f.point);if(d+=g,l<h&&!p){if(d<r)continue;p=!0}f={point:c,pressure:o[l][2]>=0?o[l][2]:.5,vector:$t(G(f.point,c)),distance:g,runningLength:d},u.push(f)}return u[0].vector=((n=u[1])==null?void 0:n.vector)||[0,0],u}function Kn(e,t={}){return Vn(Xn(e,t),t)}var Yn=class kt extends pe{constructor(){super(...arguments),this.points=[]}onStart(t){return this.el=document.createElementNS("http://www.w3.org/2000/svg","path"),this.points=[t],this.attr("fill",this.brush.color),this.attr("d",this.getSvgData(this.points)),this.el}onMove(t){return this.el||this.onStart(t),this.points[this.points.length-1]!==t&&this.points.push(t),this.attr("d",this.getSvgData(this.points)),!0}onEnd(){const t=this.el;return this.el=null,!!t}getSvgData(t){return kt.getSvgData(t,this.brush)}static getSvgData(t,n){const s=Kn(t,He({size:n.size,thinning:.9,simulatePressure:!1,start:{taper:5},end:{taper:5}},n.stylusOptions));if(!s.length)return"";const r=s.reduce((i,[a,o],u,p)=>{const[d,f]=p[(u+1)%p.length];return i.push(a,o,(a+d)/2,(o+f)/2),i},["M",...s[0],"Q"]);return r.push("Z"),r.map(i=>typeof i=="number"?i.toFixed(2):i).join(" ")}};function Gn(e){return{draw:new Mn(e),stylus:new Yn(e),line:new Dn(e),rectangle:new Fn(e),ellipse:new Rn(e),eraseLine:new Ln(e)}}var Hn=class{constructor(e={}){this.options=e,this.el=null,this.svgPoint=null,this.eventEl=null,this.shiftPressed=!1,this.altPressed=!1,this.drawing=!1,this._emitter=En(),this._originalPointerId=null,this._models=Gn(this),this._opStack=[],this._opIndex=0,this._disposables=[],this._elements=[],this.options.brush||(this.options.brush={color:"black",size:3,mode:"stylus"}),e.el&&this.mount(e.el,e.eventTarget,e.window)}get model(){return this._models[this.mode]}get mounted(){return!!this.el}get mode(){return this.options.brush.mode||"stylus"}set mode(e){this._models[this.mode].onUnselected(),this.options.brush.mode=e,this.model.onSelected(this.el)}get brush(){return this.options.brush}set brush(e){this.options.brush=e}resolveSelector(e){return typeof e=="string"?document.querySelector(e):e||null}mount(e,t,n=window){if(this.el)throw new Error("[drauu] already mounted, unmount previous target first");if(this.el=this.resolveSelector(e),!this.el)throw new Error("[drauu] target element not found");if(this.el.tagName.toLocaleLowerCase()!=="svg")throw new Error("[drauu] can only mount to a SVG element");if(!this.el.createSVGPoint)throw new Error("[drauu] SVG element must be create by document.createElementNS('http://www.w3.org/2000/svg', 'svg')");this.svgPoint=this.el.createSVGPoint();const s=this.resolveSelector(t)||this.el,r=this.eventStart.bind(this),i=this.eventMove.bind(this),a=this.eventEnd.bind(this),o=this.eventKeyboard.bind(this);s.addEventListener("pointerdown",r,{passive:!1}),n.addEventListener("pointermove",i,{passive:!1}),n.addEventListener("pointerup",a,{passive:!1}),n.addEventListener("pointercancel",a,{passive:!1}),n.addEventListener("keydown",o,!1),n.addEventListener("keyup",o,!1),this._disposables.push(()=>{s.removeEventListener("pointerdown",r),n.removeEventListener("pointermove",i),n.removeEventListener("pointerup",a),n.removeEventListener("pointercancel",a),n.removeEventListener("keydown",o,!1),n.removeEventListener("keyup",o,!1)}),this._emitter.emit("mounted")}unmount(){this._disposables.forEach(e=>e()),this._disposables.length=0,this._elements.length=0,this.el=null,this._emitter.emit("unmounted")}on(e,t){return this._emitter.on(e,t)}undo(){return!this.canUndo()||this.drawing?!1:(this._opStack[--this._opIndex].undo(),this._emitter.emit("changed"),!0)}redo(){return!this.canRedo()||this.drawing?!1:(this._opStack[this._opIndex++].redo(),this._emitter.emit("changed"),!0)}canRedo(){return this._opIndex<this._opStack.length}canUndo(){return this._opIndex>0}eventMove(e){!this.acceptsInput(e)||!this.drawing||this.model._eventMove(e)&&(e.stopPropagation(),e.preventDefault(),this._emitter.emit("changed"))}eventStart(e){this.acceptsInput(e)&&(e.stopPropagation(),e.preventDefault(),this._currentNode&&this.cancel(),this.drawing=!0,this._originalPointerId=e.pointerId,this._emitter.emit("start"),this._currentNode=this.model._eventDown(e),this._currentNode&&this.mode!=="eraseLine"&&this.el.appendChild(this._currentNode),this._emitter.emit("changed"))}eventEnd(e){if(!this.acceptsInput(e)||!this.drawing)return;const t=this.model._eventUp(e);if(!t)this.cancel();else if(t===!0){const n=this._currentNode;n&&(this._appendNode(n),this.commit({undo:()=>this._removeNode(n),redo:()=>this._restoreNode(n)}))}else this.commit(t);this.drawing=!1,this._emitter.emit("end"),this._emitter.emit("changed"),this._originalPointerId=null}acceptsInput(e){return(!this.options.acceptsInputTypes||this.options.acceptsInputTypes.includes(e.pointerType))&&!(this._originalPointerId&&this._originalPointerId!==e.pointerId)}eventKeyboard(e){this.shiftPressed===e.shiftKey&&this.altPressed===e.altKey||(this.shiftPressed=e.shiftKey,this.altPressed=e.altKey,this.model.point&&this.model.onMove(this.model.point)&&this._emitter.emit("changed"))}commit(e){this._opStack.length=this._opIndex,this._opStack.push(e),this._opIndex++;const t=this._currentNode;this._currentNode=void 0,this._emitter.emit("committed",t)}clear(){this._opStack.length=0,this._opIndex=0,this._elements=[],this.cancel(),this.el.innerHTML="",this._emitter.emit("changed")}cancel(){this._currentNode&&(this.el.removeChild(this._currentNode),this._currentNode=void 0,this._emitter.emit("canceled"))}dump(){return this.el.innerHTML}load(e){this.clear(),this.el.innerHTML=e}_appendNode(e){const t=this._elements.at(-1);t?t.after(e):this.el.append(e);const n=this._elements.push(e)-1;e.dataset.drauu_index=n.toString()}_removeNode(e){e.remove(),this._elements[+e.dataset.drauu_index]=null}_restoreNode(e){const t=+e.dataset.drauu_index;this._elements[t]=e;for(let n=t-1;n>=0;n--){const s=this._elements[n];if(s){s.after(e);return}}this.el.prepend(e)}};function Wn(e){return new Hn(e)}const qn=Nt(()=>{const{currentSlideNo:e,isPresenter:t}=fe(),n=["#ff595e","#ffca3a","#8ac926","#1982c4","#6a4c93","#ffffff","#000000"],s=ee("slidev-drawing-enabled",!1),r=ee("slidev-drawing-pinned",!1),i=Ot(ee("slidev-drawing-brush",{color:n[0],size:4,mode:"stylus"})),a=$(!1),o=$(!1),u=$(!1),p=$(!1),d=$("stylus"),f=x(()=>Ge.drawings.syncAll||t.value);let h=!1;const l=x({get(){return d.value},set(b){d.value=b,b==="arrow"?(g.mode="line",i.arrowEnd=!0):(g.mode=b,i.arrowEnd=!1)}}),c=ne({brush:i,acceptsInputTypes:x(()=>s.value&&(!Ge.drawings.presenterOnly||t.value)?void 0:["pen"]),coordinateTransform:!1}),g=Ut(Wn(c));function w(){g.clear(),f.value&&st(e.value,"")}function k(){u.value=g.canRedo(),o.value=g.canUndo(),p.value=!!g.el?.children.length}function D(b){h=!0;const P=Xe[b||e.value];P!=null?g.load(P):g.clear(),k(),h=!1}return g.on("changed",()=>{if(k(),!h){const b=g.dump(),P=e.value;(Xe[P]||"")!==b&&f.value&&st(P,g.dump())}}),sn(b=>{h=!0,b[e.value]!=null&&g.load(b[e.value]||""),h=!1,k()}),gt(()=>{q(e,()=>{g.mounted&&D()},{immediate:!0})}),g.on("start",()=>a.value=!0),g.on("end",()=>a.value=!1),window.addEventListener("keydown",b=>{if(!s.value||nn.value)return;const P=!b.ctrlKey&&!b.altKey&&!b.shiftKey&&!b.metaKey;let F=!0;b.code==="KeyZ"&&(b.ctrlKey||b.metaKey)?b.shiftKey?g.redo():g.undo():b.code==="Escape"?s.value=!1:b.code==="KeyL"&&P?l.value="line":b.code==="KeyA"&&P?l.value="arrow":b.code==="KeyS"&&P?l.value="stylus":b.code==="KeyR"&&P?l.value="rectangle":b.code==="KeyE"&&P?l.value="ellipse":b.code==="KeyC"&&P?w():b.code.startsWith("Digit")&&P&&+b.code[5]<=n.length?i.color=n[+b.code[5]-1]:F=!1,F&&(b.preventDefault(),b.stopPropagation())},!1),{brush:i,brushColors:n,canClear:p,canRedo:u,canUndo:o,clear:w,drauu:g,drauuOptions:c,drawingEnabled:s,drawingMode:l,drawingPinned:r,drawingState:Xe,isDrawing:a,loadCanvas:D}}),Jn=["innerHTML"],mi=U({__name:"DrawingPreview",props:{page:{}},setup(e){const{drawingState:t}=qn();return(n,s)=>_(t)[e.page]?(m(),y("svg",{key:0,class:"w-full h-full absolute top-0 pointer-events-none",innerHTML:_(t)[e.page]},null,8,Jn)):M("v-if",!0)}}),le=ne({});let Zn=[],Qn=[];ve(le,"$syncUp",!0);ve(le,"$syncDown",!0);ve(le,"$paused",!1);ve(le,"$onSet",e=>Zn.push(e));ve(le,"$onPatch",e=>Qn.push(e));rn();ve(le,"$patch",async()=>!1);const es=on(le,le,!0);window.navigator.userAgent.match(/Chrome\/(\d+)/)?.[1];window.navigator.userAgent.match(/Chrome\/(\d+)/)?.[1];class ts{constructor(){this._screenshotSession=null}getSnapshot(t,n){const s=t+(n?"-dark":"-light"),r=es.state[s];if(!r)return;const i=wt(t);if(i&&r?.revision===i?.meta.slide.revision)return r.image}async saveSnapshot(t,n,s){return!1}async startCapturing(t){return!1}}const ns=new ts,ss=["id"],rs=["id"],is={class:"slidev-slide-container w-full h-full relative"},os=["src"],as=U({__name:"SlideContainer",props:{width:{type:Number},meta:{default:()=>({})},isMain:{type:Boolean,default:!1},no:{type:Number,required:!1},useSnapshot:{type:Boolean,default:!1},contentStyle:{type:Object,default:()=>({})}},setup(e){const t=e,{isPrintMode:n}=fe(),s=$(null),r=jt(s),i=$(null),a=x(()=>t.width??r.width.value),o=x(()=>t.width?t.width/rt.value:r.height.value),u=x(()=>it.value&&!n.value?+it.value:Math.min(a.value/ot.value,o.value/at.value)),p=x(()=>({...t.contentStyle,height:`${at.value}px`,width:`${ot.value}px`,transform:`translate(-50%, -50%) scale(${u.value})`,"--slidev-slide-scale":u.value})),d=x(()=>t.width?{width:`${t.width}px`,height:`${t.width/rt.value}px`}:{});if(t.isMain){const h=document.documentElement.style;Bt(()=>h.setProperty("--slidev-slide-scale",u.value.toString())),yt(()=>h.removeProperty("--slidev-slide-scale"))}oe(ln,u),oe(un,i);const f=x(()=>{if(!(t.no==null||!t.useSnapshot))return ns.getSnapshot(t.no,an.value)});return(h,l)=>f.value?(m(),y(O,{key:1},[M(" Image Snapshot "),v("div",is,[v("img",{src:f.value,class:"w-full h-full object-cover",style:B(d.value)},null,12,os),l[0]||(l[0]=v("div",{absolute:"","bottom-1":"","right-1":"","p0.5":"","text-cyan:75":"","bg-cyan:10":"",rounded:"",title:"Snapshot"},[v("div",{class:"i-carbon-camera"})],-1))])],2112)):(m(),y("div",{key:0,id:e.isMain?"slide-container":void 0,ref_key:"container",ref:s,class:"slidev-slide-container",style:B(d.value)},[v("div",{id:e.isMain?"slide-content":void 0,ref_key:"slideElement",ref:i,class:"slidev-slide-content",style:B(p.value)},[Ye(h.$slots,"default",{},void 0,!0)],12,rs),Ye(h.$slots,"controls",{},void 0,!0)],12,ss))}}),gi=de(as,[["__scopeId","data-v-27d129d0"]]),Ct=Symbol("diContainer");function ls(e){let t=0,n,s;const r=()=>{t-=1,s&&t<=0&&(s.stop(),n=void 0,s=void 0)};return((...i)=>(t+=1,s||(s=_t(!0),n=s.run(()=>e(...i))),xt(r),n))}function us(e){let t,n;return((...s)=>(n||(n=_t(!0),t=n.run(()=>e(...s))),t))}function cs(){const e={services:ne(new Map)};return Xt(Ct,e),{register:(t,n,s={shared:!0})=>{const r=s.shared?ls(n):us(n);e.services.set(t,r)}}}function De(){const e=Vt(Ct);if(!e)throw new Error("Di container not found");const t={inject:n=>{const s=e.services.get(n);if(!s)throw new Error(`Service with key ${String(n)} not found`);return s(t)}};return t}function Fe(e){return Symbol.for(e.name)}function ds(e){return typeof e=="number"?new Promise(t=>setTimeout(t,e)):new Promise(t=>{const n=Symbol(),s=setInterval(()=>{const r=e(n);r!==n&&(clearInterval(s),t(r))},100)})}const Pt=()=>{const e=$(),t=$(1),n=$(),s=$(0),r=$(0),i=$(0),a=$(0);q(()=>e.value,async u=>{u||(e.value=await ds(p=>document.querySelector("#slide-content")??p))},{immediate:!0});function o(){const u=e.value.getBoundingClientRect();n.value=u,s.value=u.left,r.value=u.top,i.value=e.value.clientWidth/t.value,a.value=e.value.clientHeight/t.value,t.value=u.width/e.value.clientWidth}return q(()=>e.value,()=>{o()}),H(window,"resize",()=>{o()}),ne({slideElement:e,rect:n,scale:t,left:s,top:r,width:i,height:a})},ze=Fe(Pt),Tt=e=>{const t=e.inject(ze),n=$(0),s=$(0),r=$(!1),i=$(!1),a=x(()=>(n.value-t.left)/t.scale),o=x(()=>(s.value-t.top)/t.scale),u=x(()=>Math.round(a.value/(t.width/t.scale)*1e4)/100),p=x(()=>Math.round(o.value/(t.height/t.scale)*1e4)/100);H(()=>t.slideElement,"mouseleave",()=>{r.value=!1}),H(()=>t.slideElement,"mouseenter",()=>{r.value=!0}),H(()=>t.slideElement,"mousedown",()=>{i.value=!0}),H(()=>t.slideElement,"mouseup",()=>{i.value=!1}),H(window,"mousemove",f=>{n.value=f.clientX,s.value=f.clientY});function d({x:f,y:h}){return{x:(f-t.left)/t.scale,y:(h-t.top)/t.scale}}return ne({globalX:x(()=>n.value),globalY:x(()=>s.value),inSlide:x(()=>r.value),isDown:x(()=>i.value),localX:a,localY:o,localXPercent:u,localYPercent:p,globalToLocal:d})},Ie=Fe(Tt),At=()=>{const e=ne({});return ne({data:e})},Se=Fe(At);function Mt(){const e=new AbortController,t=e.signal;return t.abort=()=>e.abort(),t}function Je(e){const t=Mt();return e.addEventListener("abort",()=>{t.abort()}),t}function hs(e){return e?._object}function Rt(){const e=$(new Set),t=$(null),n=$(null);let s=null;class r{constructor(o){this.signal=Mt(),this.hoveredSignal=null,this.locked=!1,this.element=o,this.addListener("mouseenter",this.onEnter)}addListener(o,u,p=this.signal){this.element.addEventListener(o,u.bind(this),{signal:p})}onEnter(){this.hoveredSignal=Je(this.signal),this.addListener("click",this.onClick,this.hoveredSignal),this.addListener("mouseleave",this.onLeave,this.hoveredSignal),t.value=this.element}onClick(){this.locked||(n.value=n.value===this.element?null:this.element)}onLeave(){this.hoveredSignal.abort(),this.hoveredSignal=null,t.value=null}dispose(){console.log("dispose"),this.signal.abort()}}function i(){const a=document.querySelectorAll("#slide-content .\\$obj"),o=new Set(a);[...o].filter(d=>!e.value.has(d)).forEach(d=>{e.value.add(d),d._object=new r(d)}),[...e.value].filter(d=>!o.has(d)).forEach(d=>{e.value.delete(d),d._object?.dispose()})}return s=setInterval(i,1e3),xt(()=>{s&&(clearInterval(s),s=null)}),ne({objects:e,hovered:t,active:n})}const Lt=Fe(Rt),fs=U({__name:"CoordHelper",setup(e){V();const t=cs();return t.register(ze,Pt),t.register(Ie,Tt),t.register(Lt,Rt),t.register(Se,At,{shared:!1}),(n,s)=>(m(),ae(bt,{to:"body"},[Ye(n.$slots,"default")]))}}),vs=["onClick"],ps=["onClick"],ms=["onClick"],gs=["onClick"],ys=["onClick"],_s=["onClick"],xs=["onClick"],bs=["onClick"],ws=["onClick"],Ss=["onClick"],Es=U({__name:"MemoryEditor",setup(e){V();const t=De().inject(Se);function n(o){navigator.clipboard.writeText(o)}const s=$(),{style:r}=Kt(s,{initialValue:{x:0,y:0}});function i(){t.data.savedPositions=[]}function a(o){t.data.savedPositions=t.data.savedPositions.filter(u=>u!==o)}return(o,u)=>{const p=gn;return m(),y("div",{ref_key:"draggableElement",ref:s,class:"fixed bg-black/40 p-2 rounded-xl h-auto w-auto z-100 max-w-[400px] flex flex-col gap-2 font-mono text-xs select-none",style:B(_(r))},[(m(!0),y(O,null,ce(_(t).data.savedPositions,d=>(m(),y("div",{key:d.x+":"+d.y,class:"flex flex-wrap bg-blue-500/20 rounded-full overflow-hidden"},[v("div",{class:"record",onClick:f=>n(`${d.x.toFixed(0)}`)}," x:"+C(d.x.toFixed(0)),9,vs),v("div",{class:"record",onClick:f=>n(`${d.y.toFixed(0)}`)}," y:"+C(d.y.toFixed(0)),9,ps),v("div",{class:"record",onClick:f=>n(`${d.xPercent}%`)}," x%:"+C(d.xPercent),9,ms),v("div",{class:"record",onClick:f=>n(`${d.yPercent}%`)}," y%:"+C(d.yPercent),9,gs),v("div",{class:"record",onClick:f=>a(d)},[W(p)],8,ys)]))),128)),(m(!0),y(O,null,ce(_(t).data.savedChanges.values(),d=>(m(),y("div",{key:d.x+":"+d.y,class:"flex flex-wrap bg-blue-500/20 rounded-full overflow-hidden"},[v("div",{class:"record",onClick:f=>n(`${d.x.toFixed(0)}`)},"x:"+C(d.x.toFixed(0)),9,_s),v("div",{class:"record",onClick:f=>n(`${d.y.toFixed(0)}`)},"y:"+C(d.y.toFixed(0)),9,xs),v("div",{class:"record",onClick:f=>n(`size-${d.width.toFixed(0)}_${d.height.toFixed(0)}`)}," size ",8,bs),v("div",{class:"record",onClick:f=>n(`pos-${d.x.toFixed(0)}_${d.y.toFixed(0)}`)}," pos ",8,ws),v("div",{class:"record",onClick:f=>n(`sp-${d.x.toFixed(0)}_${d.y.toFixed(0)}_${d.width.toFixed(0)}_${d.height.toFixed(0)}`)}," sp ",8,Ss)]))),128)),v("div",{class:"bg-blue-500/30 active:bg-blue-500 px-2 py-1 rounded-full cursor-pointer duration-100 self-center",onClick:u[0]||(u[0]=d=>i())},[W(p)])],4)}}}),$s=U({__name:"ObjectEdit",setup(e){V();const t=De(),n=t.inject(Lt),s=t.inject(Ie),r=t.inject(ze),i=t.inject(Se);i.data.savedChanges=new Map;const a=new Set(["ArrowDown","ArrowUp","ArrowRight","ArrowLeft"]),o=x(()=>l.value??n.active?.getBoundingClientRect()),u=x(()=>{const c=n.hovered?.getBoundingClientRect();return c?{left:`${c.left}px`,top:`${c.top}px`,width:`${c.width}px`,height:`${c.height}px`}:null}),p=x(()=>o.value?{left:`${o.value.left}px`,top:`${o.value.top}px`,width:`${o.value.width}px`,height:`${o.value.height}px`}:{});let d=null,f=null,h=null;const l=$();return q(()=>hs(n.active),(c,g)=>{g&&(f?.abort(),f=null),c&&(f=Je(c.signal),c._registered||(c._registered=!0,c.signal.addEventListener("abort",()=>{i.data.savedChanges.delete(c)})),document.body.addEventListener("keydown",w=>{if(console.log(w.key),w.key==="Escape"){n.active=null;return}if(!a.has(w.key))return;l.value=c.element.getBoundingClientRect();const k=s.globalToLocal({x:l.value.left,y:l.value.top});k.width=l.value.width/r.scale,k.height=l.value.height/r.scale;let D=w.shiftKey?10:w.altKey?1:5;w.key==="ArrowDown"?k.y+=D:w.key==="ArrowUp"?k.y-=D:w.key==="ArrowRight"?k.x+=D:w.key==="ArrowLeft"&&(k.x-=D);const b=k.x+k.width/2,P=k.y+k.height/2;c.element.style.transition="none",c.element.style.left=`${b}px`,c.element.style.top=`${P}px`,console.log({left:c.element.style.left,top:c.element.style.top}),l.value=c.element.getBoundingClientRect(),i.data.savedChanges.set(c,{x:b,y:P,width:k.width/r.scale,height:k.height/r.scale}),w.stopImmediatePropagation()},{signal:f,capture:!0}),document.body.addEventListener("keyup",w=>{a.has(w.key)&&c.element.style.removeProperty("transition")},{signal:f,capture:!0}),c.addListener("mousedown",w=>{w.stopImmediatePropagation(),d=Je(f);const k=c.element.getBoundingClientRect(),D=(w.clientX-k.left-k.width/2)/r.scale,b=(w.clientY-k.top-k.height/2)/r.scale;h={x:D,y:b},c.element.style.transition="none",d.addEventListener("abort",()=>{c.element.style.removeProperty("transition")}),window.addEventListener("mousemove",P=>{c.locked=!0;const F=s.globalToLocal({x:P.clientX,y:P.clientY});l.value=c.element.getBoundingClientRect();const Y={x:F.x-h.x,y:F.y-h.y,width:l.value.width/r.scale,height:l.value.height/r.scale};c.element.style.left=`${Y.x}px`,c.element.style.top=`${Y.y}px`,i.data.savedChanges.set(c,Y)},{signal:d}),window.addEventListener("mouseup",P=>{d?.abort(),d=null,l.value=void 0,setTimeout(()=>{c.locked=!1},100)},{signal:d})},f))}),(c,g)=>(m(),y(O,null,[u.value&&_(n).active!==_(n).hovered?(m(),y("div",{key:0,class:"fixed pointer-events-none border-2 z-[999] border-blue-500",style:B(u.value)},null,4)):M("v-if",!0),_(n).active?(m(),y("div",{key:1,class:"fixed pointer-events-none border-2 z-[999] border-green-500",style:B(p.value)},null,4)):M("v-if",!0)],64))}}),ks=U({__name:"MouseSizeSelect",setup(e){V();const t=De(),n=t.inject(Ie),s=t.inject(Se),r=t.inject(ze);return q(()=>n.isDown,i=>{i?s.data.selectSize={startX:n.globalX,startY:n.globalY}:s.data.selectSize=null}),q(()=>[n.globalX,n.globalY],([i,a])=>{s.data.selectSize&&(s.data.selectSize.width=Math.abs(i-s.data.selectSize.startX)/r.scale,s.data.selectSize.height=Math.abs(a-s.data.selectSize.startY)/r.scale,s.data.selectSize.widthPercent=Math.round(s.data.selectSize.width/(r.width??0)*1e4)/100,s.data.selectSize.heightPercent=Math.round(s.data.selectSize.height/(r.height??0)*1e4)/100)}),(i,a)=>_(s).data.selectSize?(m(),y("div",{key:0,ref:"selectionBox",class:"fixed b-[1px] border-dashed border-white/50 pointer-events-none",style:B({left:`${Math.min(_(s).data.selectSize.startX,_(n).globalX)}px`,top:`${Math.min(_(s).data.selectSize.startY,_(n).globalY)}px`,width:`${Math.abs(_(n).globalX-_(s).data.selectSize.startX)}px`,height:`${Math.abs(_(n).globalY-_(s).data.selectSize.startY)}px`})},null,4)):M("v-if",!0)}}),Cs=U({__name:"MousePosTooltip",setup(e){V();const t=De(),n=t.inject(Ie),s=t.inject(Se);s.data.savedPositions??=[];const r=x(()=>s.data.selectSize?{width:Math.round(s.data.selectSize.width)||0,height:Math.round(s.data.selectSize.height)||0,widthPercent:Math.round(s.data.selectSize.widthPercent*100)/100||0,heightPercent:Math.round(s.data.selectSize.heightPercent*100)/100||0}:null),i=x(()=>r.value?r.value.width!==0||r.value.height!==0:!1),{alt_q:a}=Yt();return q(a,o=>{o&&s.data.savedPositions.push({x:n.globalX,y:n.globalY,xPercent:n.localXPercent,yPercent:n.localYPercent})}),(o,u)=>_(n).inSlide?(m(),y("div",{key:0,class:"absolute bg-[rgba(0,0,0,0.8)] text-white p-2 rounded-md text-sm pointer-events-none z-[1000] font-mono",style:B({left:`${_(n).globalX+10}px`,top:`${_(n).globalY+10}px`})},[i.value?(m(),y(O,{key:0},[Q(" width: "+C(r.value.width)+"px ("+C(r.value.widthPercent)+"%) ",1),u[0]||(u[0]=v("br",null,null,-1)),Q(" height: "+C(r.value.height)+"px ("+C(r.value.heightPercent)+"%) ",1)],64)):(m(),y(O,{key:1},[Q(" px "+C(Math.round(_(n).localX))+" "+C(Math.round(_(n).localY))+" ",1),u[1]||(u[1]=v("br",null,null,-1)),Q(" % "+C(_(n).localXPercent)+" "+C(_(n).localYPercent),1)],64))],4)):M("v-if",!0)}}),Ae=ee("slidev-show-timeline-editor",!1,{listenToStorageChanges:!1}),X=ee("slidev-timeline-editor-vertical",!1,{listenToStorageChanges:!1}),ke=ee("slidev-timeline-editor-width",typeof window<"u"?window.innerWidth*.3:400,{listenToStorageChanges:!1}),Ce=ee("slidev-timeline-editor-height",typeof window<"u"?window.innerHeight*.3:250,{listenToStorageChanges:!1});$(0);const Ps={key:1,class:"complex-container"},Ts={class:"expand-btn"},As={key:0,class:"i-carbon:chevron-down text-xs"},Ms={key:1,class:"i-carbon:chevron-right text-xs"},Rs={key:0,class:"object-name"},Ls={class:"object-type"},Ds={class:"object-size"},Fs={key:1,class:"object-preview"},zs={key:0,class:"complex-content"},Is={key:0,class:"array-items"},Ns={class:"array-index"},Os={key:1,class:"object-properties"},Us={class:"property-line"},js={class:"property-key"},Bs=U({__name:"ObjectViewer",props:{data:{},depth:{},name:{}},setup(e){V();const n=e.depth??0,s=$(n<2);function r(){s.value=!s.value}function i(h){return h!==null&&typeof h=="object"&&!Array.isArray(h)}function a(h){return Array.isArray(h)}function o(h){return!i(h)&&!a(h)}function u(h){return h===null?"null":h===void 0?"undefined":typeof h=="boolean"?"boolean":typeof h=="number"?"number":typeof h=="string"?"string":a(h)?"array":i(h)?"object":"unknown"}function p(h){return h===null?"null":h===void 0?"undefined":typeof h=="boolean"?h?"true":"false":typeof h=="number"?String(h):typeof h=="string"?h:String(h)}function d(h){return Object.keys(h)}function f(h){return a(h)?h.length:i(h)?Object.keys(h).length:0}return(h,l)=>{const c=Gt("ObjectViewer",!0);return m(),y("div",{class:"object-viewer",style:B({paddingLeft:_(n)>0?"12px":"0"})},[o(e.data)?(m(),y("div",{key:0,class:j(["primitive-value",`type-${u(e.data)}`])},C(p(e.data)),3)):(m(),y("div",Ps,[v("div",{class:"complex-header",onClick:r},[v("button",Ts,[s.value?(m(),y("div",As)):(m(),y("div",Ms))]),e.name?(m(),y("span",Rs,C(e.name),1)):M("v-if",!0),v("span",Ls,C(a(e.data)?"Array":"Object"),1),v("span",Ds," ("+C(f(e.data))+") ",1),s.value?M("v-if",!0):(m(),y("div",Fs,C(a(e.data)?"[...]":"{...}"),1))]),s.value?(m(),y("div",zs,[a(e.data)?(m(),y("div",Is,[(m(!0),y(O,null,ce(e.data,(g,w)=>(m(),y("div",{key:w,class:"array-item"},[v("span",Ns,"["+C(w)+"]",1),W(c,{data:g,depth:_(n)+1},null,8,["data","depth"])]))),128))])):(m(),y("div",Os,[(m(!0),y(O,null,ce(d(e.data),g=>(m(),y("div",{key:g,class:"object-property"},[v("div",Us,[v("span",js,C(g)+":",1),W(c,{data:e.data[g],depth:_(n)+1},null,8,["data","depth"])])]))),128))]))])):M("v-if",!0)]))],4)}}}),Vs=de(Bs,[["__scopeId","data-v-29eb889d"]]),Xs={key:0,class:"edit-hint"},Ks={class:"edit-mode"},Ys=U({__name:"EditableValue",props:{value:{},path:{},stepIndex:{},propertyName:{}},emits:["update"],setup(e,{emit:t}){V();const n=e,s=t,r=$(!1),i=$(""),a=$(),o=x(()=>n.value===null?"null":n.value===void 0?"undefined":typeof n.value=="boolean"?"boolean":typeof n.value=="number"?"number":typeof n.value=="string"?"string":Array.isArray(n.value)?"array":typeof n.value=="object"?"object":"unknown"),u=x(()=>n.value===null?"null":n.value===void 0?"undefined":typeof n.value=="boolean"?n.value?"true":"false":typeof n.value=="number"?String(n.value):typeof n.value=="string"?`"${n.value}"`:Array.isArray(n.value)?`[${n.value.length} items]`:typeof n.value=="object"?`{${Object.keys(n.value).length} keys}`:String(n.value)),p=x(()=>["string","number","boolean"].includes(o.value));function d(){p.value&&(r.value=!0,o.value==="string"?i.value=n.value||"":i.value=String(n.value),setTimeout(()=>{a.value?.focus(),a.value?.select()},0))}function f(){r.value=!1,i.value=""}function h(){if(!p.value)return;let g;try{switch(o.value){case"string":g=i.value.replace(/^"(.*)"$/,"$1");break;case"number":if(g=parseFloat(i.value),isNaN(g)){console.warn("Invalid number:",i.value);return}break;case"boolean":if(i.value.toLowerCase()==="true")g=!0;else if(i.value.toLowerCase()==="false")g=!1;else{console.warn("Invalid boolean:",i.value);return}break;default:return}g!==n.value&&s("update",n.path,n.value,g,n.stepIndex,n.propertyName),r.value=!1,i.value=""}catch(w){console.error("Error parsing value:",w)}}function l(g){g.key==="Enter"?(g.preventDefault(),h()):g.key==="Escape"&&(g.preventDefault(),f())}function c(g){r.value&&!g.target?.closest(".editable-value")&&h()}return q(r,async g=>{await new Promise(w=>setTimeout(w,0)),g?document.addEventListener("click",c):document.removeEventListener("click",c)}),(g,w)=>(m(),y("div",{class:j(["editable-value",{"is-editable":p.value}])},[M(" –†–µ–∂–∏–º –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è "),r.value?(m(),y(O,{key:1},[M(" –†–µ–∂–∏–º —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è "),v("div",Ks,[Ht(v("input",{ref_key:"inputRef",ref:a,"onUpdate:modelValue":w[0]||(w[0]=k=>i.value=k),class:j(["edit-input",`type-${o.value}`]),onKeydown:l,onBlur:h},null,34),[[Wt,i.value]]),v("div",{class:"edit-actions"},[v("button",{onClick:h,class:"action-btn save",title:"–°–æ—Ö—Ä–∞–Ω–∏—Ç—å (Enter)"},"‚úì"),v("button",{onClick:f,class:"action-btn cancel",title:"–û—Ç–º–µ–Ω–∏—Ç—å (Esc)"},"‚úó")])])],2112)):(m(),y("div",{key:0,class:j(["display-mode",`type-${o.value}`]),onClick:d},[Q(C(u.value)+" ",1),p.value?(m(),y("span",Xs,"‚úèÔ∏è")):M("v-if",!0)],2))],2))}}),Gs=de(Ys,[["__scopeId","data-v-0522c536"]]);function Hs(e,t,n,s){try{if(!e)return console.warn("File content is empty, cannot find location"),null;const r=e.split(`
`);let i=-1,a=0;for(let d=0;d<r.length;d++){const f=r[d];if(f.trim()==="timeline:"){i=d,a=f.indexOf("timeline:");break}}if(i===-1)return console.warn("Timeline not found in file"),null;let o=-1,u=-1,p=a+2;for(let d=i+1;d<r.length;d++){const f=r[d],h=f.trim();if(!h)continue;const l=f.length-f.trimStart().length;if(l<=a&&h)break;if(h.startsWith("-")&&l===a+2&&(o++,o===n)){u=d,p=l+2;break}}if(u===-1)return console.warn(`Step ${n} not found in timeline`),null;for(let d=u+1;d<r.length;d++){const f=r[d],h=f.trim();if(!h)continue;if(f.length-f.trimStart().length<p&&h)break;if(h.startsWith(`${s}:`)){const c=f.indexOf(":");return{filePath:"",lineNumber:d+1,columnStart:c+1,columnEnd:f.length,content:f}}}return console.warn(`Property ${s} not found in step ${n}`),null}catch(r){return console.error("Error finding value location:",r),null}}function Dt(e,t,n){const s=e.indexOf(":");if(s===-1)return console.warn("No colon found in line:",e),e;const r=e.substring(0,s+1),i=Le(t);return`${r} ${i}`}function Le(e){return e===null?"null":e===void 0?"undefined":typeof e=="boolean"?e?"true":"false":typeof e=="number"?String(e):typeof e=="string"?e.includes(":")||e.includes('"')||e.includes("'")||e.includes(`
`)?`"${e.replace(/"/g,'\\"')}"`:e:Array.isArray(e)?`[${e.map(Le).join(", ")}]`:typeof e=="object"?JSON.stringify(e):String(e)}function Ws(e){const{path:t,stepIndex:n,propertyName:s,oldValue:r,newValue:i,location:a}=e;let o=`üîÑ –ò–∑–º–µ–Ω–µ–Ω–∏–µ –≤ timeline:
`;return o+=`   üìç –ü—É—Ç—å: ${t}
`,o+=`   üìä –®–∞–≥: ${n+1}
`,o+=`   üè∑Ô∏è  –°–≤–æ–π—Å—Ç–≤–æ: ${s}
`,o+=`   üì§ –ë—ã–ª–æ: ${Le(r)}
`,o+=`   üì• –°—Ç–∞–ª–æ: ${Le(i)}
`,a&&(o+=`   üìÑ –§–∞–π–ª: —Å—Ç—Ä–æ–∫–∞ ${a.lineNumber}
`,o+=`   üìù –¢–µ–∫—É—â–∞—è —Å—Ç—Ä–æ–∫–∞: "${a.content}"
`,o+=`   ‚úèÔ∏è  –ù–æ–≤–∞—è —Å—Ç—Ä–æ–∫–∞: "${Dt(a.content,i)}"
`),o}async function qs(e,t){try{console.log("üîÑ –û–±—Ä–∞–±–æ—Ç–∫–∞ –∏–∑–º–µ–Ω–µ–Ω–∏—è —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º Slidev –¥–∞–Ω–Ω—ã—Ö:",{change:e,filepath:t.filepath,slideStart:t.start}),e.slideInfo={filePath:t.filepath,slideStartLine:t.start};const n=await Js(t.filepath);if(!n){console.warn("‚ö†Ô∏è  –ù–µ —É–¥–∞–ª–æ—Å—å –ø–æ–ª—É—á–∏—Ç—å —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ —Ñ–∞–π–ª–∞");return}const s=Hs(n,e.path,e.stepIndex,e.propertyName);s&&(s.filePath=t.filepath,e.location=s);const r=Ws(e);console.log(r),console.group("üîß –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è"),console.log("–ò–∑–º–µ–Ω–µ–Ω–∏–µ:",e),console.log("–ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ —Å–ª–∞–π–¥–µ:",e.slideInfo),console.log("–ú–µ—Å—Ç–æ–ø–æ–ª–æ–∂–µ–Ω–∏–µ:",s),console.log("–ù–æ–≤–∞—è —Å—Ç—Ä–æ–∫–∞:",s?Dt(s.content,e.newValue,e.propertyName):"N/A"),console.groupEnd()}catch(n){console.error("Error simulating file update with Slidev:",n)}}async function Js(e){try{return console.warn(`‚ö†Ô∏è  –ü–æ–ª—É—á–µ–Ω–∏–µ —Å–æ–¥–µ—Ä–∂–∏–º–æ–≥–æ —Ñ–∞–π–ª–∞ ${e} –Ω–µ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ`),console.warn("–í —Ä–µ–∞–ª—å–Ω–æ–π —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏ –∑–¥–µ—Å—å –±—É–¥–µ—Ç —á—Ç–µ–Ω–∏–µ —Ñ–∞–π–ª–∞ —Å –¥–∏—Å–∫–∞"),`---
layout: center
timeline:
  - block1: 'outline outline-2 outline-[#CCCCCC88]'
    block2: '-blur-hidden fx'
    block3: '-blur-hidden outline-[#00000088]'
    opacity: 0.5
    scale: 1.0
  - block1: 'outline-[#00000088]'
    block2: 'outline outline-2 outline-[#CCCCCC88]'
    opacity: 0.8
    scale: 1.2
---

# –°–ª–∞–π–¥ 1

–°–æ–¥–µ—Ä–∂–∏–º–æ–µ –ø–µ—Ä–≤–æ–≥–æ —Å–ª–∞–π–¥–∞

---

# –°–ª–∞–π–¥ 2

–°–æ–¥–µ—Ä–∂–∏–º–æ–µ –≤—Ç–æ—Ä–æ–≥–æ —Å–ª–∞–π–¥–∞

---

# –°–ª–∞–π–¥ 3

–°–æ–¥–µ—Ä–∂–∏–º–æ–µ —Ç—Ä–µ—Ç—å–µ–≥–æ —Å–ª–∞–π–¥–∞`}catch(t){return console.error("Error getting file content:",t),""}}const Zs={class:"property-header"},Qs={class:"property-name"},er={key:0,class:"change-indicator"},tr={class:"property-content"},nr=U({__name:"PropertyDiff",props:{name:{},value:{},prevValue:{},showDiff:{type:Boolean},stepIndex:{},path:{},slideMeta:{}},emits:["update"],setup(e,{emit:t}){V();const n=e,s=t,r=x(()=>n.prevValue===void 0?!0:JSON.stringify(n.value)!==JSON.stringify(n.prevValue)),i=x(()=>n.prevValue===void 0?"new":n.value===void 0?"removed":"modified");function a(u){return typeof u!="object"||u===null}async function o(u,p,d,f,h){await qs({path:u,stepIndex:f,propertyName:h,oldValue:p,newValue:d},n.slideMeta),s("update",u,p,d,f,h)}return(u,p)=>(m(),y("div",{class:j(["property-diff",{"is-changed":r.value&&e.showDiff,[`change-${i.value}`]:e.showDiff}])},[v("div",Zs,[v("span",Qs,C(e.name),1),r.value&&e.showDiff?(m(),y("span",er,C(i.value==="new"?"‚ú®":i.value==="removed"?"‚ùå":"üìù"),1)):M("v-if",!0)]),v("div",tr,[M(" –î–ª—è –ø—Ä–æ—Å—Ç—ã—Ö –∑–Ω–∞—á–µ–Ω–∏–π –∏—Å–ø–æ–ª—å–∑—É–µ–º EditableValue "),a(e.value)?(m(),ae(Gs,{key:0,value:e.value,path:e.path,"step-index":e.stepIndex,"property-name":e.name,onUpdate:o},null,8,["value","path","step-index","property-name"])):(m(),y(O,{key:1},[M(" –î–ª—è —Å–ª–æ–∂–Ω—ã—Ö –æ–±—ä–µ–∫—Ç–æ–≤ –∏—Å–ø–æ–ª—å–∑—É–µ–º ObjectViewer "),W(Vs,{data:e.value,depth:0},null,8,["data"])],2112))]),M(" –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –ø—Ä–µ–¥—ã–¥—É—â–µ–µ –∑–Ω–∞—á–µ–Ω–∏–µ –µ—Å–ª–∏ –µ—Å—Ç—å –∏–∑–º–µ–Ω–µ–Ω–∏–µ "),M(` <div v-if="showDiff && hasChanged && changeType === 'modified'" class="previous-value">\r
      <div class="previous-label">–ë—ã–ª–æ:</div>\r
      <ObjectViewer :data="prevValue" :depth="0" />\r
    </div> `)],2))}}),sr=de(nr,[["__scopeId","data-v-93987a0d"]]),rr={class:"flex pb-2 text-xl -mt-1 items-center"},ir={class:"relative overflow-auto rounded bg-[#1a1a1a] p-2"},or={key:0,class:"text-white/50 text-center py-8 text-sm"},ar={key:1,class:"flex flex-col gap-2"},lr={class:"bg-blue-500/20 rounded p-2 border border-blue-500/50"},ur={class:"text-white font-bold text-lg font-mono"},cr={class:"flex flex-col gap-1"},dr=["onClick"],hr={class:"step-number"},fr={class:"step-title"},vr={key:0,class:"text-xs opacity-70"},pr={class:"changes-badge"},mr=["onClick"],gr={key:0,class:"i-carbon:chevron-up"},yr={key:1,class:"i-carbon:chevron-down"},_r={key:0,class:"step-content"},xr=["onClick"],br={class:"text-xs text-white/50"},wr=U({__name:"SideTimelineEditor",props:{resize:{type:Boolean}},setup(e){V();const t=e,{clicks:n,currentSlideRoute:s,go:r}=fe(),i=x(()=>{const S=s.value.meta?.slide,E={filepath:S?.filepath||"slides.md",start:S?.start||0};return console.log("üîç –î–∞–Ω–Ω—ã–µ —Å–ª–∞–π–¥–∞ –∏–∑ Slidev:",{slide:S,filepath:E.filepath,start:E.start,currentSlideRoute:s.value}),E}),a=x(()=>s.value.meta?.slide?.frontmatter||{}),o=x(()=>a.value.timeline??[]),u=x(()=>(a.value.timeline??[]).length>0),p=x(()=>{if(!u.value)return[];const S=new Set;return o.value.forEach(E=>{Object.keys(E).forEach(R=>{R.startsWith("$")||S.add(R)})}),Array.from(S).sort()}),d=x(()=>Math.min(n.value,o.value.length-1)),f=$(new Set);function h(S){f.value.has(S)?f.value.delete(S):f.value.add(S)}function l(S){return f.value.has(S)}function c(S){return p.value.filter(E=>b(S,E)).length}function g(S){return c(S)>3}function w(S){S>=0&&S<o.value.length&&r(s.value.no,S,!0)}function k(S,E){return o.value[S]?.[E]}function D(S,E){return S===0?void 0:o.value[S-1]?.[E]}function b(S,E){if(S===0)return!0;const R=o.value[S]?.[E],A=o.value[S-1]?.[E];return typeof R=="object"&&typeof A=="object"?JSON.stringify(R)!==JSON.stringify(A):R!==void 0&&R!==A}function P(){Ae.value=!1}function F(S,E,R,A,z){console.log("üîÑ –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å–≤–æ–π—Å—Ç–≤–∞ –≤ timeline:",{path:S,stepIndex:A,propertyName:z,oldValue:E,newValue:R})}const Y=$(!1);function me(){Y.value=!0}function se(S){X.value?Ce.value=Math.min(Math.max(150,S??Ce.value),window.innerHeight-200):ke.value=Math.min(Math.max(300,S??ke.value),window.innerWidth-200)}return t.resize&&(H("pointermove",S=>{Y.value&&se(X.value?window.innerHeight-S.pageY:window.innerWidth-S.pageX)},{passive:!0}),H("pointerup",()=>{Y.value=!1}),H("resize",()=>{se()})),(S,E)=>(m(),y(O,null,[e.resize?(m(),y("div",{key:0,class:j(["fixed bg-gray-400 select-none opacity-0 hover:opacity-10 z-dragging",_(X)?"left-0 right-0 w-full h-10px":"top-0 bottom-0 w-10px h-full"]),style:B({opacity:Y.value?"0.3":void 0,bottom:_(X)?`${_(Ce)-5}px`:void 0,right:_(X)?void 0:`${_(ke)-5}px`,cursor:_(X)?"row-resize":"col-resize"}),onPointerdown:me},null,38)):M("v-if",!0),v("div",{class:j(["shadow bg-main p-2 pt-4 grid grid-rows-[max-content_1fr] h-full overflow-hidden",e.resize?"border-l border-gray-400 border-opacity-20":""]),style:B(e.resize?{height:_(X)?`${_(Ce)}px`:void 0,width:_(X)?void 0:`${_(ke)}px`}:{})},[v("div",rr,[E[5]||(E[5]=v("span",{class:"text-2xl pt-1"}," Timeline ",-1)),E[6]||(E[6]=v("div",{class:"flex-auto"},null,-1)),e.resize?(m(),y(O,{key:0},[_(X)?(m(),y("button",{key:0,title:"Dock to right",class:"slidev-icon-btn",onClick:E[0]||(E[0]=R=>X.value=!1)},[...E[2]||(E[2]=[v("div",{class:"i-carbon:open-panel-right"},null,-1)])])):(m(),y("button",{key:1,title:"Dock to bottom",class:"slidev-icon-btn",onClick:E[1]||(E[1]=R=>X.value=!0)},[...E[3]||(E[3]=[v("div",{class:"i-carbon:open-panel-bottom"},null,-1)])]))],64)):M("v-if",!0),v("button",{title:"Close",class:"slidev-icon-btn",onClick:P},[...E[4]||(E[4]=[v("div",{class:"i-carbon:close"},null,-1)])])]),v("div",ir,[u.value?(m(),y("div",ar,[v("div",lr,[v("div",ur,C(d.value+1)+" / "+C(o.value.length),1)]),v("div",cr,[(m(!0),y(O,null,ce(o.value,(R,A)=>(m(),y("div",{key:A,class:j(["step-card",{"step-active":A===d.value,"step-past":A<d.value,"step-future":A>d.value}])},[v("div",{class:"step-header",onClick:z=>w(A)},[v("span",hr,C(A+1),1),v("span",fr,[Q(" –®–∞–≥ "+C(A+1)+" ",1),R.$clicksAlias?(m(),y("span",vr," ("+C(Array.isArray(R.$clicksAlias)?R.$clicksAlias.join(", "):R.$clicksAlias)+") ",1)):M("v-if",!0)]),E[8]||(E[8]=v("div",{class:"flex-auto"},null,-1)),v("span",pr,C(c(A)),1),v("button",{class:"expand-btn",onClick:qt(z=>h(A),["stop"])},[l(A)?(m(),y("div",gr)):(m(),y("div",yr))],8,mr)],8,dr),!g(A)||l(A)?(m(),y("div",_r,[(m(!0),y(O,null,ce(p.value.filter(z=>b(A,z)),z=>(m(),ae(sr,{key:z,name:z,value:k(A,z),"prev-value":D(A,z),"show-diff":A>0,"step-index":A,path:`timeline.${A}.${z}`,"slide-meta":i.value,onUpdate:F},null,8,["name","value","prev-value","show-diff","step-index","path","slide-meta"]))),128))])):(m(),y("div",{key:1,class:"step-content-collapsed",onClick:z=>h(A)},[v("div",br,C(c(A))+" –∏–∑–º–µ–Ω–µ–Ω–∏–π ‚Ä¢ –ö–ª–∏–∫ –¥–ª—è —Ä–∞—Å–∫—Ä—ã—Ç–∏—è ",1)],8,xr))],2))),128))])])):(m(),y("div",or,[...E[7]||(E[7]=[Q(" –ù–µ—Ç —Ç–∞–π–º–ª–∞–π–Ω–∞ –Ω–∞ —ç—Ç–æ–º —Å–ª–∞–π–¥–µ.",-1),v("br",null,null,-1),Q(" –î–æ–±–∞–≤—å—Ç–µ frontmatter —Å ",-1),v("code",{class:"text-blue-400"},"timeline",-1)])]))])],6)],64))}}),Sr=de(wr,[["__scopeId","data-v-2b3b38d2"]]),Ke=[],be={async renamePart(e,t){return(await fetch("/__slides_parts_api/rename",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({oldSrc:e,newName:t})})).json()},async createPart(e,t){return(await fetch("/__slides_parts_api/create",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:e,position:t})})).json()},async deletePart(e){return(await fetch("/__slides_parts_api/delete",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({src:e})})).json()},async movePart(e,t){return(await fetch("/__slides_parts_api/move",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({src:e,direction:t})})).json()},async toggleHide(e){return(await fetch("/__slides_parts_api/toggle-hide",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({src:e})})).json()}},we=ee("slidev-show-parts-manager",!1,{listenToStorageChanges:!1}),K=ee("slidev-parts-manager-vertical",!1,{listenToStorageChanges:!1}),Pe=ee("slidev-parts-manager-width",typeof window<"u"?window.innerWidth*.3:400,{listenToStorageChanges:!1}),Te=ee("slidev-parts-manager-height",typeof window<"u"?window.innerHeight*.4:300,{listenToStorageChanges:!1}),Er={class:"flex pb-2 text-xl -mt-1 items-center"},$r={class:"relative overflow-y-auto rounded bg-[#1a1a1a] p-2"},kr={key:0,class:"text-white/50 text-center py-8 text-sm"},Cr={key:1,class:"flex flex-col gap-1"},Pr={class:"part-info"},Tr={class:"part-num"},Ar={class:"part-name"},Mr={key:0,class:"hide-mark"},Rr={class:"part-actions"},Lr=["onClick","disabled"],Dr=["onClick","disabled"],Fr=["onClick","title"],zr={key:0,class:"i-carbon:view"},Ir={key:1,class:"i-carbon:view-off"},Nr=["onClick"],Or=["onClick"],Ur={key:2,class:"absolute inset-0 bg-black/60 rounded flex items-center justify-center"},jr=U({__name:"SidePartsManager",props:{resize:{type:Boolean}},setup(e){V();const t=e,n=$(!1);async function s(){const h=prompt("–í–≤–µ–¥–∏—Ç–µ –∏–º—è –Ω–æ–≤–æ–π —á–∞—Å—Ç–∏:");if(!h)return;const l=prompt("–í–≤–µ–¥–∏—Ç–µ –ø–æ–∑–∏—Ü–∏—é (–æ—Å—Ç–∞–≤—å—Ç–µ –ø—É—Å—Ç—ã–º –¥–ª—è –¥–æ–±–∞–≤–ª–µ–Ω–∏—è –≤ –∫–æ–Ω–µ—Ü):"),c=l?parseInt(l):void 0;n.value=!0;try{const g=await be.createPart(h,c);g.success||alert(`–û—à–∏–±–∫–∞: ${g.error}`)}catch(g){alert(`–û—à–∏–±–∫–∞ –ø—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏: ${g}`)}finally{n.value=!1}}async function r(h){const l=prompt(`–ù–æ–≤–æ–µ –∏–º—è –¥–ª—è "${h.name}":`,h.name);if(!(!l||l===h.name)){n.value=!0;try{const c=await be.renamePart(h.src,l);c.success||alert(`–û—à–∏–±–∫–∞: ${c.error}`)}catch(c){alert(`–û—à–∏–±–∫–∞ –ø—Ä–∏ –ø–µ—Ä–µ–∏–º–µ–Ω–æ–≤–∞–Ω–∏–∏: ${c}`)}finally{n.value=!1}}}async function i(h){if(confirm(`–í—ã —É–≤–µ—Ä–µ–Ω—ã, —á—Ç–æ —Ö–æ—Ç–∏—Ç–µ —É–¥–∞–ª–∏—Ç—å —á–∞—Å—Ç—å "${h.name}"?

–§–∞–π–ª: ${h.src}

–≠—Ç–æ –¥–µ–π—Å—Ç–≤–∏–µ –Ω–µ–æ–±—Ä–∞—Ç–∏–º–æ!`)){n.value=!0;try{const c=await be.deletePart(h.src);c.success||alert(`–û—à–∏–±–∫–∞: ${c.error}`)}catch(c){alert(`–û—à–∏–±–∫–∞ –ø—Ä–∏ —É–¥–∞–ª–µ–Ω–∏–∏: ${c}`)}finally{n.value=!1}}}async function a(h,l){n.value=!0;try{const c=await be.movePart(h.src,l);c.success||alert(`–û—à–∏–±–∫–∞: ${c.error}`)}catch(c){alert(`–û—à–∏–±–∫–∞ –ø—Ä–∏ –ø–µ—Ä–µ–º–µ—â–µ–Ω–∏–∏: ${c}`)}finally{n.value=!1}}async function o(h){n.value=!0;try{const l=await be.toggleHide(h.src);l.success||alert(`–û—à–∏–±–∫–∞: ${l.error}`)}catch(l){alert(`–û—à–∏–±–∫–∞ –ø—Ä–∏ –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–∏ –≤–∏–¥–∏–º–æ—Å—Ç–∏: ${l}`)}finally{n.value=!1}}function u(){we.value=!1}const p=$(!1);function d(){p.value=!0}function f(h){K.value?Te.value=Math.min(Math.max(200,h??Te.value),window.innerHeight-200):Pe.value=Math.min(Math.max(300,h??Pe.value),window.innerWidth-200)}return t.resize&&(H("pointermove",h=>{p.value&&f(K.value?window.innerHeight-h.pageY:window.innerWidth-h.pageX)},{passive:!0}),H("pointerup",()=>{p.value=!1}),H("resize",()=>{f()})),(h,l)=>(m(),y(O,null,[e.resize?(m(),y("div",{key:0,class:j(["fixed bg-gray-400 select-none opacity-0 hover:opacity-10 z-dragging",_(K)?"left-0 right-0 w-full h-10px":"top-0 bottom-0 w-10px h-full"]),style:B({opacity:p.value?"0.3":void 0,bottom:_(K)?`${_(Te)-5}px`:void 0,right:_(K)?void 0:`${_(Pe)-5}px`,cursor:_(K)?"row-resize":"col-resize"}),onPointerdown:d},null,38)):M("v-if",!0),v("div",{class:j(["shadow bg-main p-2 pt-4 grid grid-rows-[max-content_1fr] h-full overflow-hidden",e.resize?"border-l border-gray-400 border-opacity-20":""]),style:B(e.resize?{height:_(K)?`${_(Te)}px`:void 0,width:_(K)?void 0:`${_(Pe)}px`}:{})},[v("div",Er,[l[6]||(l[6]=v("span",{class:"text-2xl pt-1"}," Parts ",-1)),l[7]||(l[7]=v("div",{class:"flex-auto"},null,-1)),e.resize?(m(),y(O,{key:0},[_(K)?(m(),y("button",{key:0,title:"Dock to right",class:"slidev-icon-btn",onClick:l[0]||(l[0]=c=>K.value=!1)},[...l[2]||(l[2]=[v("div",{class:"i-carbon:open-panel-right"},null,-1)])])):(m(),y("button",{key:1,title:"Dock to bottom",class:"slidev-icon-btn",onClick:l[1]||(l[1]=c=>K.value=!0)},[...l[3]||(l[3]=[v("div",{class:"i-carbon:open-panel-bottom"},null,-1)])]))],64)):M("v-if",!0),v("button",{title:"Create part",class:"slidev-icon-btn",onClick:s},[...l[4]||(l[4]=[v("div",{class:"i-carbon:add"},null,-1)])]),v("button",{title:"Close",class:"slidev-icon-btn",onClick:u},[...l[5]||(l[5]=[v("div",{class:"i-carbon:close"},null,-1)])])]),v("div",$r,[_(Ke).length===0?(m(),y("div",kr,[...l[8]||(l[8]=[Q(" –ù–µ—Ç —á–∞—Å—Ç–µ–π —Å–ª–∞–π–¥–æ–≤.",-1),v("br",null,null,-1),Q("–ù–∞–∂–º–∏—Ç–µ + —á—Ç–æ–±—ã —Å–æ–∑–¥–∞—Ç—å. ",-1)])])):(m(),y("div",Cr,[(m(!0),y(O,null,ce(_(Ke),c=>(m(),y("div",{key:c.position,class:j(["part-row",{"part-hidden":c.hidden}])},[v("div",Pr,[v("span",Tr,C(c.position),1),v("span",Ar,[Q(C(c.name)+" ",1),c.hidden?(m(),y("span",Mr,"‚¶ª")):M("v-if",!0)])]),v("div",Rr,[v("button",{class:"action",onClick:g=>a(c,"up"),disabled:c.position===1,title:"‚¨Ü"},[...l[9]||(l[9]=[v("div",{class:"i-carbon:arrow-up"},null,-1)])],8,Lr),v("button",{class:"action",onClick:g=>a(c,"down"),disabled:c.position===_(Ke).length,title:"‚¨á"},[...l[10]||(l[10]=[v("div",{class:"i-carbon:arrow-down"},null,-1)])],8,Dr),v("button",{class:"action",onClick:g=>o(c),title:c.hidden?"–ü–æ–∫–∞–∑–∞—Ç—å":"–°–∫—Ä—ã—Ç—å"},[c.hidden?(m(),y("div",zr)):(m(),y("div",Ir))],8,Fr),v("button",{class:"action",onClick:g=>r(c),title:"–ü–µ—Ä–µ–∏–º–µ–Ω–æ–≤–∞—Ç—å"},[...l[11]||(l[11]=[v("div",{class:"i-carbon:edit"},null,-1)])],8,Nr),v("button",{class:"action action-danger",onClick:g=>i(c),title:"–£–¥–∞–ª–∏—Ç—å"},[...l[12]||(l[12]=[v("div",{class:"i-carbon:trash-can"},null,-1)])],8,Or)])],2))),128))])),n.value?(m(),y("div",Ur,[...l[13]||(l[13]=[v("div",{class:"text-2xl animate-spin"},"‚è≥",-1)])])):M("v-if",!0)])],6)],64))}}),Br=de(jr,[["__scopeId","data-v-f9b2e590"]]),Vr={class:"bottom-20px right-20px absolute text-lg opacity-50"},Xr={__name:"global-top",setup(e){V();const{currentSlideNo:t,currentSlideRoute:n}=fe(),s=x(()=>n.value.meta?.slide?.frontmatter||{}),r=x(()=>!1),i=x(()=>we.value||Ae.value);function a(){const u=document.getElementById("page-root");u&&(i.value?(u.style.display="grid",(we.value?K.value:X.value)?(u.style.gridTemplateColumns="",u.style.gridTemplateRows="1fr max-content"):(u.style.gridTemplateRows="",u.style.gridTemplateColumns="1fr max-content")):(u.style.display="",u.style.gridTemplateColumns="",u.style.gridTemplateRows=""))}q([we,K,Ae,X],()=>{a()});const o=$(!1);return Ze(async()=>{await gt();do await new Promise(u=>setTimeout(u,100));while(!document.getElementById("page-root"));a(),o.value=!0}),(u,p)=>{const d=Br,f=Sr,h=Cs,l=ks,c=$s,g=Es,w=fs;return m(),y("div",{class:j(s.value.slideClass)},[(m(),ae(bt,{to:"#page-root",defer:"",disabled:!o.value},[_(we)?(m(),ae(d,{key:0,resize:""})):M("v-if",!0),_(Ae)?(m(),ae(f,{key:1,resize:""})):M("v-if",!0)],8,["disabled"])),r.value?(m(),ae(w,{key:0},{default:Jt(()=>[W(h),W(l),W(c),W(g)]),_:1})):M("v-if",!0),v("div",Vr,C(_(t)),1),v("div",{class:j(_(yn)(["absolute pos-20 text-[2.5em] transition-all duration-500",s.value.topTitleClass]))},C(s.value.topTitle),3)],2)}}};function mt(e,t,n){const s=e.createShader(t);return s?(e.shaderSource(s,n),e.compileShader(s),e.getShaderParameter(s,e.COMPILE_STATUS)?s:(console.error("Shader compilation failed:",e.getShaderInfoLog(s)),e.deleteShader(s),null)):null}function Kr(e,t,n){const s=e.createProgram();return s?(e.attachShader(s,t),e.attachShader(s,n),e.linkProgram(s),e.getProgramParameter(s,e.LINK_STATUS)?s:(console.error("Program linking failed:",e.getProgramInfoLog(s)),null)):null}function Yr(e,t,n){const s=e.createFramebuffer(),r=e.createTexture();return!s||!r?null:(e.bindTexture(e.TEXTURE_2D,r),e.texImage2D(e.TEXTURE_2D,0,e.RGBA,t,n,0,e.RGBA,e.UNSIGNED_BYTE,null),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,e.LINEAR),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MAG_FILTER,e.LINEAR),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE),e.bindFramebuffer(e.FRAMEBUFFER,s),e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,r,0),e.checkFramebufferStatus(e.FRAMEBUFFER)!==e.FRAMEBUFFER_COMPLETE?(console.error("Framebuffer not complete"),e.deleteFramebuffer(s),e.deleteTexture(r),null):{fbo:s,texture:r})}async function Gr(e,t,n){const s=e.createTexture();if(!s)return null;e.activeTexture(e.TEXTURE0+n),e.bindTexture(e.TEXTURE_2D,s),e.texImage2D(e.TEXTURE_2D,0,e.RGBA,1,1,0,e.RGBA,e.UNSIGNED_BYTE,new Uint8Array([0,0,0,255]));try{const r=await Hr(t.source),i=t.options||{},a=i.wrap==="repeat"?e.REPEAT:i.wrap==="mirror"?e.MIRRORED_REPEAT:e.CLAMP_TO_EDGE;e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_S,a),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_T,a);const o=i.filter==="nearest"?e.NEAREST:e.LINEAR;return e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,o),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MAG_FILTER,o),e.pixelStorei(e.UNPACK_FLIP_Y_WEBGL,1),e.pixelStorei(e.UNPACK_PREMULTIPLY_ALPHA_WEBGL,0),e.texImage2D(e.TEXTURE_2D,0,e.RGBA,e.RGBA,e.UNSIGNED_BYTE,r),s}catch(r){return console.error("Error loading texture:",r),e.deleteTexture(s),null}}function Hr(e){return typeof e=="string"?new Promise((t,n)=>{const s=new Image;s.onload=()=>t(s),s.onerror=n,s.src=e}):Promise.resolve(e)}function Wr(e,t,n,s){const r=e.getUniformLocation(t,n);if(r)switch(s.type){case"float":e.uniform1f(r,s.value);break;case"vec2":e.uniform2fv(r,s.value);break;case"vec3":e.uniform3fv(r,s.value);break;case"vec4":e.uniform4fv(r,s.value);break;case"int":e.uniform1i(r,s.value);break;case"bool":e.uniform1i(r,s.value?1:0);break}}function qr(e){const t=e.createBuffer();if(!t)return null;const n=new Float32Array([-1,-1,1,-1,-1,1,1,1]);return e.bindBuffer(e.ARRAY_BUFFER,t),e.bufferData(e.ARRAY_BUFFER,n,e.STATIC_DRAW),t}function Jr(e,t,n){const s=e.getAttribLocation(t,"aVertexPosition");e.bindBuffer(e.ARRAY_BUFFER,n),e.enableVertexAttribArray(s),e.vertexAttribPointer(s,2,e.FLOAT,!1,0,0)}class Zr{constructor(t,n,s){this.quadBuffer=null,this.programs=[],this.framebuffers=[],this.textures={},this.textureUnits={},this.uniformLocations={},this.defaultVertexShader=`
    attribute vec4 aVertexPosition;
    varying vec2 v_texCoord;
    void main() {
      v_texCoord = (aVertexPosition.xy + 1.0) / 2.0;
      gl_Position = aVertexPosition;
    }
  `,this.gl=t,this.width=n,this.height=s,this.quadBuffer=qr(t),this.gl.enable(this.gl.BLEND),this.gl.getExtension("OES_standard_derivatives"),this.gl.getExtension("EXT_shader_texture_lod"),this.gl.blendFunc(this.gl.SRC_ALPHA,this.gl.ONE_MINUS_SRC_ALPHA)}async initialize(t){this.cleanup();for(let n=0;n<t.stages.length-1;n++){const s=Yr(this.gl,this.width,this.height);if(!s)return console.error(`Failed to create framebuffer for stage ${n}`),!1;this.framebuffers.push(s)}for(let n=0;n<t.stages.length;n++){const s=t.stages[n],r=mt(this.gl,this.gl.VERTEX_SHADER,this.defaultVertexShader),i=mt(this.gl,this.gl.FRAGMENT_SHADER,s.fragmentShader);if(!r||!i)return console.error(`Failed to create shaders for stage ${n}`),!1;const a=Kr(this.gl,r,i);if(!a)return console.error(`Failed to create program for stage ${n}`),!1;this.programs.push(a),this.quadBuffer&&Jr(this.gl,a,this.quadBuffer),s.textures&&await this.loadStageTextures(s.textures,n)}return!0}async loadStageTextures(t,n){for(let s=0;s<t.length;s++){const r=t[s],i=r.name||`u_texture${n}_${s}`,a=Object.keys(this.textureUnits).length,o=await Gr(this.gl,r,a);if(o){this.textures[i]=o,this.textureUnits[i]=a;const u=this.programs[n],p=this.gl.getUniformLocation(u,i);p&&this.gl.uniform1i(p,a)}}}render(t,n,s){for(let r=0;r<t.stages.length;r++){const i=t.stages[r],a=this.programs[r];this.gl.useProgram(a),r===t.stages.length-1?this.gl.bindFramebuffer(this.gl.FRAMEBUFFER,null):this.gl.bindFramebuffer(this.gl.FRAMEBUFFER,this.framebuffers[r].fbo),this.gl.viewport(0,0,this.width,this.height),this.gl.clearColor(0,0,0,0),this.gl.clear(this.gl.COLOR_BUFFER_BIT),this.setStageUniforms(a,i.uniforms||{}),this.setBaseUniforms(a,s),n&&this.setStageUniforms(a,n),this.bindInputTextures(i,r),this.gl.drawArrays(this.gl.TRIANGLE_STRIP,0,4)}}setStageUniforms(t,n){Object.entries(n).forEach(([s,r])=>{Wr(this.gl,t,s,r)})}setBaseUniforms(t,n){const s=this.gl.getUniformLocation(t,"u_time"),r=this.gl.getUniformLocation(t,"u_resolution"),i=this.gl.getUniformLocation(t,"u_imageSize");s&&this.gl.uniform1f(s,performance.now()/1e3),r&&this.gl.uniform2f(r,this.width,this.height),i&&n?.imageSize&&this.gl.uniform2f(i,n.imageSize[0],n.imageSize[1])}bindInputTextures(t,n){if(n>0){const r=this.gl.getUniformLocation(this.programs[n],"u_inputTexture");if(r){const i=this.framebuffers[n-1];this.gl.activeTexture(this.gl.TEXTURE0),this.gl.bindTexture(this.gl.TEXTURE_2D,i.texture),this.gl.uniform1i(r,0)}}t.textures&&t.textures.forEach((s,r)=>{const i=s.name||`u_texture${n}_${r}`,a=this.textures[i],o=this.textureUnits[i];a!==void 0&&(this.gl.activeTexture(this.gl.TEXTURE0+o),this.gl.bindTexture(this.gl.TEXTURE_2D,a))})}resize(t,n){this.width=t,this.height=n,this.framebuffers.forEach(s=>{this.gl.deleteFramebuffer(s.fbo),this.gl.deleteTexture(s.texture)}),this.framebuffers=[]}cleanup(){this.programs.forEach(t=>{this.gl.deleteProgram(t)}),this.programs=[],this.framebuffers.forEach(t=>{this.gl.deleteFramebuffer(t.fbo),this.gl.deleteTexture(t.texture)}),this.framebuffers=[],Object.values(this.textures).forEach(t=>{this.gl.deleteTexture(t)}),this.textures={},this.textureUnits={},this.uniformLocations={}}destroy(){this.cleanup(),this.quadBuffer&&this.gl.deleteBuffer(this.quadBuffer)}}function Qr(e,t={}){switch(e){case"vignette":const n=t.borderSize??.2,s=t.blurWidth??.1;return`
        precision mediump float;
        varying vec2 v_texCoord;
        uniform sampler2D u_texture0_0;
        
        void main() {
          vec4 color = texture2D(u_texture0_0, v_texCoord);
          
          float borderSize = ${n};
          float blurWidth = ${s};
          
          float left = smoothstep(0.0, blurWidth, v_texCoord.x);
          float right = smoothstep(1.0, 1.0 - blurWidth, v_texCoord.x);
          float top = smoothstep(0.0, blurWidth, v_texCoord.y);
          float bottom = smoothstep(1.0, 1.0 - blurWidth, v_texCoord.y);
          
          float vignette = min(min(left, right), min(top, bottom));
          
          gl_FragColor = vec4(color.rgb, color.a * vignette);
        }
      `;case"blur":return`
        precision mediump float;
        varying vec2 v_texCoord;
        uniform sampler2D u_texture0_0;
        uniform vec2 u_resolution;
        
        void main() {
          float blurAmount = ${t.blurAmount??1};
          vec2 offset = blurAmount / u_resolution;
          
          vec4 sum = vec4(0.0);
          sum += texture2D(u_texture0_0, v_texCoord + vec2(-2.0 * offset.x, -2.0 * offset.y)) * 0.0625;
          sum += texture2D(u_texture0_0, v_texCoord + vec2(-1.0 * offset.x, -1.0 * offset.y)) * 0.125;
          sum += texture2D(u_texture0_0, v_texCoord) * 0.25;
          sum += texture2D(u_texture0_0, v_texCoord + vec2(1.0 * offset.x, 1.0 * offset.y)) * 0.125;
          sum += texture2D(u_texture0_0, v_texCoord + vec2(2.0 * offset.x, 2.0 * offset.y)) * 0.0625;
          
          gl_FragColor = sum;
        }
      `;case"copy":default:return`
        precision mediump float;
        varying vec2 v_texCoord;
        uniform sampler2D u_texture0_0;
        
        void main() {
          gl_FragColor = texture2D(u_texture0_0, v_texCoord);
        }
      `}}function ei(e,t){if(Array.isArray(e)&&e.length>0){const n=e[0];if(Array.isArray(n)&&n.length===2&&typeof n[0]=="string")return e.map(s=>{const[r,i]=s,a={};return i&&Object.entries(i).forEach(([u,p])=>{a[u]={type:"float",value:p}}),{fragmentShader:Qr(r,i),uniforms:Object.keys(a).length>0?a:void 0}})}return e}const ti=U({__name:"GlslBackground",props:{stages:{}},setup(e){V();const t=e,n=()=>({stages:ei(t.stages)}),s=$(null),r=$(null);let i=null,a=null,o=null;const u=async()=>{if(!i||!r.value)return;const f=n();a=new Zr(i,r.value.width,r.value.height),await a.initialize(f)},p=async()=>{if(!r.value||!i||!s.value)return;const f=s.value.clientWidth,h=s.value.clientHeight;f===0||h===0||(r.value.width=f,r.value.height=h,i.viewport(0,0,f,h),a&&(a.destroy(),a=null),await u())},d=()=>{if(!(!i||!r.value)){if(r.value.width===0||r.value.height===0){o=requestAnimationFrame(d);return}if(i.clearColor(0,0,0,1),i.clear(i.COLOR_BUFFER_BIT),a){const f=n();a.render(f,void 0,{})}o=requestAnimationFrame(d)}};return Ze(async()=>{if(r.value){if(i=r.value.getContext("webgl"),!i){console.error("Unable to initialize WebGL");return}if(p(),r.value.width===0||r.value.height===0){console.error("Canvas has zero size after resize");return}window.addEventListener("resize",p),await u(),d()}}),Zt(()=>{window.removeEventListener("resize",p),o!==null&&cancelAnimationFrame(o),a&&a.destroy()}),q(()=>t.stages,async()=>{i&&(a&&(a.destroy(),a=null),await u())}),(f,h)=>(m(),y("div",{ref_key:"container",ref:s,class:"absolute inset-0 z-[-10] w-full h-full"},[v("canvas",{ref_key:"canvas",ref:r,id:"glsl-background"},null,512)],512))}}),ni=`#ifdef GL_ES\r
precision highp float;\r
#endif\r
\r
// Original author: https://www.shadertoy.com/view/XlfGRj\r
\r
uniform float u_time;\r
uniform vec2 u_resolution;\r
uniform vec4 u_baseColor;\r
uniform float u_slideNumber;\r
#define PI 3.14159265359\r
\r
#define iterations 15\r
#define formuparam 0.57\r
\r
#define volsteps 20\r
#define stepsize 0.1\r
\r
#define zoom   0.800\r
#define tile   0.750\r
#define speed  0.0001 \r
\r
#define brightness 0.0017\r
#define darkmatter 0.600\r
#define distfading 0.660\r
#define saturation 0.850\r
\r
void main()\r
{\r
	//get coords and direction\r
	vec2 uv=gl_FragCoord.xy/u_resolution.xy-.5;\r
	uv.y*=u_resolution.y/u_resolution.x;\r
	vec3 dir=vec3(uv*zoom,1.);\r
	float time=u_time*speed+.25;\r
\r
  vec2 u_mouse = vec2(sin(u_slideNumber / 2.0) * 5.0, cos(u_slideNumber / 2.0) * 5.0);\r
\r
	//mouse rotation\r
	float a1=.5+u_mouse.x/u_resolution.x*2.;\r
	float a2=.8+u_mouse.y/u_resolution.y*2.;\r
	mat2 rot1=mat2(cos(a1),sin(a1),-sin(a1),cos(a1));\r
	mat2 rot2=mat2(cos(a2),sin(a2),-sin(a2),cos(a2));\r
	dir.xz*=rot1;\r
	dir.xy*=rot2;\r
	vec3 from=vec3(1.,.5,0.3);\r
	from+=vec3(time*2.,time,-2.);\r
	from.xz*=rot1;\r
	from.xy*=rot2;\r
	\r
	//volumetric rendering\r
	float s=0.1,fade=1.;\r
	vec3 v=vec3(0.);\r
	for (int r=0; r<volsteps; r++) {\r
		vec3 p=from+s*dir*.5;\r
		p = abs(vec3(tile)-mod(p,vec3(tile*2.))); // tiling fold\r
		float pa,a=pa=0.;\r
		for (int i=0; i<iterations; i++) { \r
			p=abs(p)/dot(p,p)-formuparam; // the magic formula\r
			a+=abs(length(p)-pa); // absolute sum of average change\r
			pa=length(p);\r
		}\r
		float dm=max(0.,darkmatter-a*a*.001); //dark matter\r
		a*=a*a; // add contrast\r
		if (r>6) fade*=1.-dm; // dark matter, don't render near\r
		//v+=vec3(dm,dm*.5,0.);\r
		v+=fade;\r
		v+=vec3(s,s*s,s*s*s*s)*a*brightness*fade; // coloring based on distance\r
		fade*=distfading; // distance fading\r
		s+=stepsize;\r
	}\r
	v=mix(vec3(length(v)),v,saturation); //color adjust\r
\r
	gl_FragColor = vec4(v*.01,1.);	\r
}`,si=`
#ifdef GL_ES
precision highp float;
#endif

uniform sampler2D u_inputTexture;
uniform vec2 u_resolution;
uniform float u_shading;

void main() {
    vec2 uv = gl_FragCoord.xy / u_resolution.xy;
    vec3 color = texture2D(u_inputTexture, uv).rgb;
    float shading = 1. - u_shading;
    gl_FragColor = vec4(color * shading, 1.0);
}
`,ri=U({__name:"global-bottom",setup(e){V();const{currentSlideRoute:t,currentSlideNo:n}=fe(),s=x(()=>t.value.meta?.slide?.frontmatter||{}),r=$([0,0,0,1]),i=Be(r,{duration:2e3,transition:Ve.easeOutSine}),a=Be(n,{duration:2e3,transition:Ve.easeOutSine}),o=Be(x(()=>s.value.shading?.4:.25),{duration:2e3,transition:Ve.easeOutSine}),u=x(()=>[{fragmentShader:ni,uniforms:{u_baseColor:{type:"vec4",value:i.value},u_slideNumber:{type:"float",value:a.value}}},{fragmentShader:si,uniforms:{u_shading:{type:"float",value:o.value}}}]);function p(d){return new Promise(f=>setTimeout(f,d))}return q(n,async()=>{const d=`[data-slidev-no="${n.value}"] .slidev-layout`;for(;!document.querySelector(d);)await p(100);const f=document.querySelector(d),h=getComputedStyle(f).getPropertyValue("--v-color");r.value=h.replace("rgb(","").replace(")","").split(",").map(l=>Number(l)/255).concat(1)},{immediate:!0}),(d,f)=>(m(),y("div",{class:j(s.value.slideClass)},[W(ti,{stages:u.value},null,8,["stages"])],2))}}),ii=U({__name:"slide-bottom",setup(e){const t=Qt("root");function n(i,a){if(a===null||typeof a!="object")return a;(i===null||typeof i!="object")&&(i={});for(const o in a)Object.prototype.hasOwnProperty.call(a,o)&&(i[o]=n(i[o],a[o]));return i}let s=fe(),r=V();if(r.$frontmatter.timeline){const i=x(()=>r.$frontmatter.timeline),a=x(()=>{let l=new Set(Object.keys(i.value[0]));return l.delete("$clicksAlias"),l.add("$stepsCount"),Array.from(l)});let o=x(()=>i.value.length);const u=x(()=>{const l=o.value,c=Array.from({length:l},()=>n({},i.value[0]));let g=0,w={};return i.value.forEach(k=>{let D=0,b=l;D=g++,k??={},k.$clicksAlias&&(Array.isArray(k.$clicksAlias)?k.$clicksAlias.forEach(P=>{w[P]=[D,b]}):w[k.$clicksAlias]=[D,b]);for(let P=D;P<b;P++)c[P]=n(c[P],k)}),{states:c,aliases:w}}),p=x(()=>u.value.aliases),d=x(()=>{const l=r.$page.value-s.currentSlideNo.value;return l===0?Math.min(s.clicks.value,o.value-1):l<0?(console.log("diff < 0",s.currentSlideNo.value,r.$page.value),o.value-1):0}),f=x(()=>u.value.states[d.value]),h=[a.value.map(l=>[l,x(()=>{const c=f.value?.[l];return c===void 0&&console.warn(`Key ${l} not found in ${f.value} ${d.value}`),c})]),Object.keys(p.value).map(l=>[l,x(()=>p.value[l][d.value])]),[["$stepsCount",x(()=>u.value.states.length)]]].flat();r.$clicksContext.timeline=ne(Object.fromEntries(h)),Ze(()=>{r.$clicksContext.register(t.value,r.$clicksContext.calculateSince(1,o.value-1))}),q(()=>[r.$clicksContext.total,r.$clicksContext.current],([l,c],[g,w])=>{l===0&&c===0&&(r.$clicksContext.register(t.value,r.$clicksContext.calculateSince(1,o.value-1)),setTimeout(()=>{r.$clicksContext.current=w},100))}),yt(()=>{r.$clicksContext.unregister(t.value)})}return(i,a)=>(m(),y("span",{ref_key:"root",ref:t},null,512))}}),yi={render:()=>[Qe(Xr)]},_i={render:()=>[Qe(ri)]},oi={render:()=>[]},ai={render:()=>[Qe(ii)]},li=["data-slidev-no","lang"],ui=U({__name:"SlideWrapper",props:{clicksContext:{type:Object,required:!0},renderContext:{type:String,default:"slide"},route:{type:Object,required:!0}},setup(e){const t=e,n=x(()=>t.route.meta?.slide?.frontmatter.zoom??1);oe(cn,t.route),oe(dn,t.route.meta.slide.frontmatter),oe(hn,$(t.route.no)),oe(fn,$(t.renderContext)),oe(vn,en(t,"clicksContext")),oe(pn,n);const s=x(()=>n.value===1?void 0:{width:`${100/n.value}%`,height:`${100/n.value}%`,transformOrigin:"top left",transform:`scale(${n.value})`}),r=x(()=>({...s.value,"user-select":Ge.selectable?void 0:"none"}));return(i,a)=>(m(),y("div",{"data-slidev-no":t.route.no,class:j(_(mn)(e.route,["slide","presenter"].includes(t.renderContext)?"":"disable-view-transition")),style:B(r.value),lang:t.route.meta.slide.frontmatter.lang},[W(_(ai)),(m(),ae(tn(t.route.component))),W(_(oi))],14,li))}}),xi=de(ui,[["__scopeId","data-v-43bcea43"]]);export{_i as G,xi as S,mi as _,gi as a,_n as b,qn as c,Ae as d,yi as e,we as s,pi as u};
